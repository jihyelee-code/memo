(()=>{var r={185:()=>{},904:(t,e,r)=>{r.d(e,{M:()=>u});var n=r(485);function i(t="200px",e="230px"){this.CORNER_RESIZER={LEFT:"left",TOP:"top",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",RIGHT:"right",BOTTOM:"bottom",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right"},this.modalMinimumSize={width:Number(t.match(/\d+/g)[0]),height:Number(e.match(/\d+/g)[0])},this.body=document.querySelector("body"),this.modal=null}function o(t){this.BTN_CLICK={BG_COLOR:'[data-click="bgColor"]',MINIMIZE:'[data-click="minimize"]',MAXIMIZE:'[data-click="maximize"]',CLOSE:'[data-click="close"]',DRAG:'[data-click="drag"]'},this.modal=t,this.modalName=t.dataset.name,this.unsubscribe=null,this.originInfo={width:"0px",height:"0px",x:"0px",y:"0px"}}i.prototype.init=function(t){for(var e in this.modal=t,this.CORNER_RESIZER){e=this.CORNER_RESIZER[e],e=this.modal.querySelectorAll(`[corner="${e}"]`);0<e.length&&e.forEach(t=>{t.addEventListener("mousedown",t=>this.resizeClickStartHandler(t,this))})}return this},i.prototype.resizeClickStartHandler=function(t,e){t.preventDefault();var r=t.currentTarget,n=r.parentElement.parentElement.dataset.name,r=r.getAttribute("corner"),t={x:t.pageX,y:t.pageY};e.updateAsCurrent(n,t,r)},i.prototype.updateAsCurrent=function(t,e,r){return n.M.dispatch({type:"focus",name:t}),n.M.dispatch({type:"modalResizeObserver/start",name:t,mousePosition:e,resizeTriggerProp:r}),this},i.prototype.resizeInfo=function(){return n.M.getState().modalResizeObserver},i.prototype.resizedModalInfo=function(){return this.getModal()[this.resizeInfo().name]},i.prototype.isModalResized=function(){return this.resizeInfo().isResized},i.prototype.subscribeIfResize=function(){this.body.addEventListener("mousemove",t=>this.resizeHandler(t,this))},i.prototype.resizeHandler=function(t){t.preventDefault(),t.stopPropagation(),this.isModalResized()&&this.resizeModal(t)},i.prototype.getWidthFromUnpositionedModal=function(t){return this.getOriginPosition().x+this.getOriginSize().width-t},i.prototype.getWidthFromPositionedModal=function(t){return t-this.getOriginPosition().x},i.prototype.getHeightFromUnpositionedModal=function(t){return this.getOriginPosition().y+this.getOriginSize().height-t},i.prototype.getHeightFromPositionedModal=function(t){return t-this.getOriginPosition().y},i.prototype.setSizeWithWidth=function(t){return this.checkIfMinimumWidth(t)?null:{width:t,height:this.getOriginSize().height}},i.prototype.setSizeWithHeight=function(t){return this.checkIfMinimumHeight(t)?null:{width:this.getOriginSize().width,height:t}},i.prototype.checkIfMinimumWidth=function(t){return t<this.modalMinimumSize.width},i.prototype.checkIfMinimumHeight=function(t){return t<this.modalMinimumSize.height},i.prototype.resizeModal=function(t){var a=t.pageX,s=t.pageY;if(!(s<u)){let t=!1,e=!1,r=0,n=0,i=0,o=0;switch(this.resizeInfo().resizeTriggerProp){case this.CORNER_RESIZER.LEFT:r=this.getWidthFromUnpositionedModal(a),(i=this.setSizeWithWidth(r))&&(this.body.style.cursor="ew-resize",o={x:a,y:this.getOriginPosition().y},this.updateModal(i,o,this));break;case this.CORNER_RESIZER.RIGHT:r=this.getWidthFromPositionedModal(a),(i=this.setSizeWithWidth(r))&&(this.updateModalSize(i),this.body.style.cursor="ew-resize");break;case this.CORNER_RESIZER.BOTTOM:n=this.getHeightFromPositionedModal(s),(i=this.setSizeWithHeight(n))&&(this.body.style.cursor="ns-resize",this.updateModalSize(i));break;case this.CORNER_RESIZER.TOP:n=this.getHeightFromUnpositionedModal(s),(i=this.setSizeWithHeight(n))&&(o={x:this.getOriginPosition().x,y:s},this.updateModal(i,o,this),this.body.style.cursor="ns-resize");break;case this.CORNER_RESIZER.TOP_RIGHT:if(r=this.getWidthFromPositionedModal(a),n=this.getHeightFromUnpositionedModal(s),o={x:this.getOriginPosition().x,y:s},t=this.checkIfMinimumWidth(r),e=this.checkIfMinimumHeight(n),!t||!e){if(this.body.style.cursor="nesw-resize",t&&!e)r=this.modalMinimumSize.width;else if(!t&&e){i={width:r,height:this.getOriginSize().height},this.updateModalSize(i);break}i={width:r,height:n},this.updateModal(i,o)}break;case this.CORNER_RESIZER.TOP_LEFT:r=this.getWidthFromUnpositionedModal(a),n=this.getHeightFromUnpositionedModal(s),o={x:a,y:s},t=this.checkIfMinimumWidth(r),e=this.checkIfMinimumHeight(n),t&&e||(this.body.style.cursor="nwse-resize",t&&!e?(i={width:this.getOriginSize().width,height:n},o.x=this.getOriginPosition().x):!t&&e?(i={width:r,height:this.getOriginSize().height},o.y=this.getOriginPosition().y):i={width:r,height:n},this.updateModal(i,o));break;case this.CORNER_RESIZER.BOTTOM_RIGHT:r=this.getWidthFromPositionedModal(a),n=this.getHeightFromPositionedModal(s),t=this.checkIfMinimumWidth(r),e=this.checkIfMinimumHeight(n),t&&e||(this.body.style.cursor="nwse-resize",this.checkIfMinimumWidth(r)&&(r=this.modalMinimumSize.width),this.checkIfMinimumHeight(n)&&(n=this.modalMinimumSize.height),i={width:r,height:n},this.updateModalSize(i));break;case this.CORNER_RESIZER.BOTTOM_LEFT:r=this.getWidthFromUnpositionedModal(a),n=this.getHeightFromPositionedModal(s),o={x:a,y:this.getOriginPosition().y},t=this.checkIfMinimumWidth(r),e=this.checkIfMinimumHeight(n),t&&e||(this.body.style.cursor="nesw-resize",t&&!e?(i={width:this.getOriginSize().width,height:n},this.updateModalSize(i)):(!t&&e?(i={width:r,height:this.getOriginSize().height},o.y=this.getOriginPosition().y):i={width:r,height:n},this.updateModal(i,o)))}}},i.prototype.getModal=function(){return n.M.getState().modalMutateObserver},i.prototype.getOriginSize=function(){var t=this.resizedModalInfo();return{width:parseFloat(t.width.match(/\d+/g)[0]),height:parseFloat(t.height.match(/\d+/g)[0])}},i.prototype.updateModalSize=function(t){n.M.dispatch({type:"modalMutateObserver/size",name:this.resizeInfo().name,width:t.width+"px",height:t.height+"px"})},i.prototype.updateModal=function(t,e){n.M.dispatch({type:"modalMutateObserver/update",name:this.resizeInfo().name,x:e.x+"px",y:e.y+"px",width:t.width+"px",height:t.height+"px"})},i.prototype.getOriginPosition=function(){var t=this.resizedModalInfo();return{x:parseFloat(t.x.match(/\d+/g)[0]),y:parseFloat(t.y.match(/\d+/g)[0])}},i.prototype.subscribeIfFinishResize=function(){this.body.addEventListener("mouseup",t=>this.finishResizeHandler(t))},i.prototype.finishResizeHandler=function(t){t.preventDefault(),t.stopPropagation(),this.body.style.cursor="default",this.isModalResized()&&n.M.dispatch({type:"modalResizeObserver/end"})},i.prototype.subscribe=function(){return this.subscribeIfResize(),this.subscribeIfFinishResize(),this},o.prototype.bgColorEvent=function(){var t=this.modal.querySelector(this.BTN_CLICK.BG_COLOR);let e=this.modal;t.addEventListener("change",t=>{t.preventDefault(),e.style.backgroundColor=t.target.value})},o.prototype.maximizeEvent=function(t,e){var r=e.modal.querySelector(e.BTN_CLICK.MAXIMIZE),t=(t.preventDefault(),n.M.getState()),t=t.modalMutateObserver[e.modalName];e.originInfo.width=t.width,e.originInfo.height=t.height,e.originInfo.x=t.x,e.originInfo.y=t.y,r.parentElement.querySelector(e.BTN_CLICK.MINIMIZE).classList.remove("d-none"),r.classList.add("d-none"),n.M.dispatch({type:"modalMutateObserver/maximize",name:e.modalName})},o.prototype.minimizeEvent=function(t,e){var r=e.modal.querySelector(e.BTN_CLICK.MINIMIZE);t.preventDefault(),r.parentElement.querySelector(e.BTN_CLICK.MAXIMIZE).classList.remove("d-none"),r.classList.add("d-none"),n.M.dispatch({type:"modalMutateObserver/update",name:e.modalName,x:e.originInfo.x,y:e.originInfo.y,width:e.originInfo.width,height:e.originInfo.height})},o.prototype.closeEvent=function(){this.modal.querySelector(this.BTN_CLICK.CLOSE).addEventListener("click",t=>{t.preventDefault(),this.unsubscribe(),n.M.dispatch({type:"modalMutateObserver/delete",name:this.modalName}),n.M.dispatch({type:"focus",name:""}),this.modal.parentElement.removeChild(this.modal)})},o.prototype.zIndexEvent=function(){this.modal.addEventListener("mousedown",t=>{t.stopPropagation(),this.updateAsCurrent()})},o.prototype.updateAsCurrent=function(){var t=(0,n.f)();n.M.dispatch({type:"modalMutateObserver/active",name:this.modalName,zIndex:t}),n.M.dispatch({type:"focus",name:this.modalName})},o.prototype.updateModalState=function(){var t=n.M.getState();this.modalName===t.focusedModalObserver.name&&((t=t.modalMutateObserver[this.modalName]).width&&(this.modal.style.width=t.width),t.height&&(this.modal.style.height=t.height),t.x&&(this.modal.style.left=t.x),t.y&&(this.modal.style.top=t.y),t.zIndex)&&(this.modal.style.zIndex=t.zIndex)},o.prototype.subscribe=function(){return this.unsubscribe=n.M.subscribe(()=>{this.updateModalState()}),this.unsubscribe},o.prototype.init=function(){this.subscribe(),this.updateAsCurrent(),this.zIndexEvent(),this.closeEvent(),this.bgColorEvent(),this.modal.querySelector(this.BTN_CLICK.MINIMIZE).addEventListener("click",t=>this.minimizeEvent(t,this)),this.modal.querySelector(this.BTN_CLICK.MAXIMIZE).addEventListener("click",t=>this.maximizeEvent(t,this)),this.modal.querySelector(this.BTN_CLICK.DRAG).addEventListener("dblclick",t=>{"100%"===n.M.getState().modalMutateObserver[this.modalName].width?this.minimizeEvent(t,this):this.maximizeEvent(t,this)})};let a=r(791).MemoCreator,s=r(149).DragnDrop,u=40;function c(){this.memoCnt=0,this.size={width:"200px",height:"230px"},this.dragnDrop=null,this.resize=null,this.mv=null}c.prototype.createMemoHandler=function(t,e){t.preventDefault();var t=document.querySelector("#wall"),r=new a(e.memoCnt,this.size.width,this.size.height).init();r.container.setAttribute("data-name","memo_"+e.memoCnt),t.appendChild(r.container),r.body.querySelector("textarea").focus(),n.M.dispatch({type:"modalMutateObserver/update",name:"memo_"+e.memoCnt,x:r.container.style.left,y:r.container.style.top,width:this.size.width,height:this.size.height}),new o(r.container).init(),this.dragnDrop.init(r.header.querySelector('[data-click="drag"]')),this.resize.init(r.container),e.memoCnt++},c.prototype.init=function(){document.querySelector('[evnt="addMemo"]').addEventListener("click",t=>this.createMemoHandler(t,this)),this.dragnDrop=new s,this.dragnDrop.bodyEvnts(),this.resize=new i(this.size.width,this.size.height),this.resize.subscribe()},(new c).init()},791:(t,e,r)=>{function n(t,e,r){this.ELEMS={CONTAINER:"CONTAINER",HEADER:"HEADER",BODY:"BODY",CORNERS:"CORNERS",FOOTER:"FOOTER"},this.defSetting={width:e+"px",height:r+"px",top:60,left:0,randomPosRange:50},this.HEADER={TAG:"section",CLASS_NAME:["card-header","d-flex","justify-content-end"],INNER_HTML:`
            <div class="flex-grow-1" data-click="drag"> </div>
            <div class="d-flex align-items-center">
         
                <button type="button" title="Minimize" aria-label="Minimize"
                        data-click="minimize"
                        class="btn btn-sm btn-transparent d-none">
                        <i class="bi bi-front"></i>
                </button>
                <button type="button" title="Maximize" aria-label="Maximize"
                        data-click="maximize"
                        class="btn btn-sm btn-transparent">
                        <i class="bi bi-square"></i>
                </button>
                <button type="button" title="Close" aria-label="Close"  
                        data-click="close"
                        class="btn btn-sm btn-transparent">
                        <i class="bi bi-x-lg"></i>
                </button>
            </div>
        `},this.BODY={TAG:"section",CLASS_NAME:["card-body"],INNER_HTML:`
        <textarea class="w-100 h-100"></textarea>
        `},this.FOOTER={TAG:"section",CLASS_NAME:["card-footer"],INNER_HTML:`
            <div class="d-flex">
                <label for="bgColor_${t}" title="Background color" class="btn px-2 btn-transparent">
                    <i class="bi bi-palette"></i>
                    <input type="color" id="bgColor_${t}" data-click="bgColor" class="d-none" ></input>
                </label>
            </div>
        `},this.CORNERS={TAG:"div",CLASS_NAME:[],INNER_HTML:`
        <div class="corner-left" corner="left"></div>
        <div class="corner-top" corner="top"></div>
        <div class="corner-top-left" corner="top-left"></div>
        <div class="corner-top-right" corner="top-right"></div>
        <div class="corner-right" corner="right"></div>
        <div class="corner-bottom" corner="bottom"></div>
        <div class="corner-bottom-left" corner="bottom-left"></div>
        <div class="corner-bottom-right" corner="bottom-right"></div>
        `},this.CONTAINER={TAG:"div",CLASS_NAME:["card","position-absolute"],INNER_HTML:""}}function o(t){return Math.floor(Math.random()*t)}r.r(e),r.d(e,{MemoCreator:()=>n}),n.prototype.createElem=function(t){var e=document.createElement(this[t].TAG);return e.classList.add(...this[t].CLASS_NAME),e.innerHTML=this[t].INNER_HTML,e},n.prototype.init=function(){var t=this.createElem(this.ELEMS.CONTAINER),e=this.createElem(this.ELEMS.HEADER),r=this.createElem(this.ELEMS.BODY),n=this.createElem(this.ELEMS.FOOTER),i=this.createElem(this.ELEMS.CORNERS),t=(t.style.width=this.defSetting.width,t.style.height=this.defSetting.height,t.style.top=this.defSetting.top+o(this.defSetting.randomPosRange)+"px",t.style.left=this.defSetting.left+o(this.defSetting.randomPosRange)+"px",t.appendChild(e),t.appendChild(r),t.appendChild(n),t.appendChild(i),{container:t,header:e,body:r,footer:n,corners:i});return t}},149:(t,e,r)=>{r.r(e),r.d(e,{DragnDrop:()=>n});var a=r(904),s=r(485);function n(){this.body=document.querySelector("body")}n.prototype.init=function(t){return t.addEventListener("mousedown",this.mouseDownHandler),this},n.prototype.bodyEvnts=function(){return this.body.addEventListener("mouseup",this.dropHandler),this.body.addEventListener("mousemove",this.mouseMoveHandler),this},n.prototype.mouseDownHandler=function(t){t.preventDefault();var e={x:t.layerX,y:t.layerY},t=t.currentTarget.parentElement.parentElement.dataset.name;return s.M.dispatch({type:"focus",name:t}),s.M.dispatch({type:"modalDragObserver/start",name:t,mousePosition:e}),this},n.prototype.mouseMoveHandler=function(r){r.preventDefault(),r.stopPropagation();var n=s.M.getState().modalDragObserver;if(n.mouseOn){var i=n.mousePosition,o=r.pageY-i.y;let t=r.pageX-i.x,e=o<a.M?a.M:o;s.M.dispatch({type:"modalMutateObserver/position",name:n.name,x:t+"px",y:e+"px"})}},n.prototype.dropHandler=function(t){t.preventDefault(),t.stopPropagation();s.M.getState().modalDragObserver.mouseOn&&s.M.dispatch({type:"modalDragObserver/end"})}},485:(k,t,e)=>{function l(t){for(var e=arguments.length,r=Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map(function(t){return"'"+t+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function s(t){return t&&t[M]}function d(e){var t;return e&&((()=>{var t;if(e&&"object"==typeof e)return null===(t=Object.getPrototypeOf(e))||(t=Object.hasOwnProperty.call(t,"constructor")&&t.constructor)===Object||"function"==typeof t&&Function.toString.call(t)===ot})()||Array.isArray(e)||e[it]||null!=(t=e.constructor)&&t[it]||a(e)||u(e))}function h(r,n,e){void 0===e&&(e=!1),0===o(r)?(e?Object.keys:S)(r).forEach(function(t){e&&"symbol"==typeof t||n(t,r[t],r)}):r.forEach(function(t,e){return n(e,t,r)})}function o(t){var e=t[M];return e?3<e.i?e.i-4:e.i:Array.isArray(t)?1:a(t)?2:u(t)?3:0}function f(t,e){return 2===o(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function L(t,e){return 2===o(t)?t.get(e):t[e]}function D(t,e,r){var n=o(t);2===n?t.set(e,r):3===n?t.add(r):t[e]=r}function H(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function a(t){return tt&&t instanceof Map}function u(t){return et&&t instanceof Set}function c(t){return t.o||t.t}function p(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=at(t);delete e[M];for(var r=S(e),n=0;n<r.length;n++){var i=r[n],o=e[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function y(t,e){return void 0===e&&(e=!1),m(t)||s(t)||!d(t)||(1<o(t)&&(t.set=t.add=t.clear=t.delete=F),Object.freeze(t),e&&h(t,function(t,e){return y(e,!0)},!0)),t}function F(){l(2)}function m(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function g(t){var e=st[t];return e||l(18,t),e}function W(t,e){st[t]||(st[t]=e)}function q(t,e){e&&(g("Patches"),t.u=[],t.s=[],t.v=e)}function b(t){B(t),t.p.forEach(G),t.p=null}function B(t){t===E&&(E=t.l)}function K(t){return E={p:[],l:E,h:t,m:!0,_:0}}function G(t){t=t[M];0===t.i||1===t.i?t.j():t.g=!0}function Z(t,e){e._=e.p.length;var r=e.p[0],n=void 0!==t&&t!==r;return e.h.O||g("ES5").S(e,t,n),n?(r[M].P&&(b(e),l(4)),d(t)&&(t=v(e,t),e.l||O(e,t)),e.u&&g("Patches").M(r[M].t,t,e.u,e.s)):t=v(e,r,[]),b(e),e.u&&e.v(e.u,e.s),t!==nt?t:void 0}function v(r,n,i){var o,a,t,s;return m(n)?n:(o=n[M])?o.A!==r?n:o.P?(o.I||(o.I=!0,o.A._--,t=a=4===o.i||5===o.i?o.o=p(o.k):o.o,s=!1,3===o.i&&(t=new Set(a),a.clear(),s=!0),h(t,function(t,e){return U(r,o,a,t,e,i,s)}),O(r,a,!1),i&&r.u&&g("Patches").N(o,i,r.u,r.s)),o.o):(O(r,o.t,!0),o.t):(h(n,function(t,e){return U(r,o,n,t,e,i)},!0),n)}function U(t,e,r,n,i,o,a){if(s(i)){o=v(t,i,o&&e&&3!==e.i&&!f(e.R,n)?o.concat(n):void 0);if(D(r,n,o),!s(o))return;t.m=!1}else a&&r.add(i);!d(i)||m(i)||!t.h.D&&t._<1||(v(t,i),e&&e.A.l)||O(t,i)}function O(t,e,r){void 0===r&&(r=!1),!t.l&&t.h.D&&t.m&&y(e,r)}function X(t,e){var r=t[M];return(r?c(r):t)[e]}function Y(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}function w(t){t.P||(t.P=!0,t.l&&w(t.l))}function V(t){t.o||(t.o=p(t.t))}function $(t,e,r){var n,i,o=a(e)?g("MapSet").F(e,r):u(e)?g("MapSet").T(e,r):t.O?(t=e,n=r,o=Array.isArray(t),n={i:o?1:0,A:n?n.A:E,P:!1,I:!1,R:{},l:n,t:t,k:null,o:null,j:null,C:!1},t=n,i=P,o&&(t=[n],i=I),o=Proxy.revocable(t,i),t=o.revoke,i=o.proxy,n.k=i,n.j=t,i):g("ES5").J(e,r);return(r?r.A:E).p.push(o),o}function J(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return p(t)}function Q(){function u(r,t){var e=o[r];return e?e.enumerable=t:o[r]=e={configurable:!0,enumerable:t,get:function(){var t=this[M];return P.get(t,r)},set:function(t){var e=this[M];P.set(e,r,t)}},e}function n(t){for(var e=t.length-1;0<=e;e--){var r=t[e][M];if(!r.P)switch(r.i){case 5:l(r)&&w(r);break;case 4:i(r)&&w(r)}}}function i(t){for(var e=t.t,r=t.k,n=S(r),i=n.length-1;0<=i;i--){var o=n[i];if(o!==M){var a=e[o];if(void 0===a&&!f(e,o))return!0;var o=r[o],s=o&&o[M];if(s?s.t!==a:!H(o,a))return!0}}t=!!e[M];return n.length!==S(e).length+(t?0:1)}function l(t){var e=t.k;if(e.length!==t.t.length)return!0;t=Object.getOwnPropertyDescriptor(e,e.length-1);if(t&&!t.get)return!0;for(var r=0;r<e.length;r++)if(!e.hasOwnProperty(r))return!0;return!1}var o={};W("ES5",{J:function(t,e){var r=Array.isArray(t),n=((t,e)=>{if(t){for(var r=Array(e.length),n=0;n<e.length;n++)Object.defineProperty(r,""+n,u(n,!0));return r}var i=at(e);delete i[M];for(var o=S(i),a=0;a<o.length;a++){var s=o[a];i[s]=u(s,t||!!i[s].enumerable)}return Object.create(Object.getPrototypeOf(e),i)})(r,t),r={i:r?5:4,A:e?e.A:E,P:!1,I:!1,R:{},l:e,t:t,k:n,o:null,g:!1,C:!1};return Object.defineProperty(n,M,{value:r,writable:!0}),n},S:function(t,e,r){r?s(e)&&e[M].A===t&&n(t.p):(t.u&&function e(t){if(t&&"object"==typeof t){var r=t[M];if(r){var n=r.t,i=r.k,o=r.R,t=r.i;if(4===t)h(i,function(t){t!==M&&(void 0!==n[t]||f(n,t)?o[t]||e(i[t]):(o[t]=!0,w(r)))}),h(n,function(t){void 0!==i[t]||f(i,t)||(o[t]=!1,w(r))});else if(5===t){if(l(r)&&(w(r),o.length=!0),i.length<n.length)for(var a=i.length;a<n.length;a++)o[a]=!1;else for(var s=n.length;s<i.length;s++)o[s]=!0;for(var u=Math.min(i.length,n.length),c=0;c<u;c++)i.hasOwnProperty(c)||(o[c]=!0),void 0===o[c]&&e(i[c])}}}}(t.p[0]),n(t.p))},K:function(t){return(4===t.i?i:l)(t)}})}e.d(t,{f:()=>function(){return Gt+=1},M:()=>Kt});var E,t="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),tt="undefined"!=typeof Map,et="undefined"!=typeof Set,rt="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,nt=t?Symbol.for("immer-nothing"):((r={})["immer-nothing"]=!0,r),it=t?Symbol.for("immer-draftable"):"__$immer_draftable",M=t?Symbol.for("immer-state"):"__$immer_state",ot=""+Object.prototype.constructor,S="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,at=Object.getOwnPropertyDescriptors||function(e){var r={};return S(e).forEach(function(t){r[t]=Object.getOwnPropertyDescriptor(e,t)}),r},st={},P={get:function(t,e){var r,n;return e===M?t:f(r=c(t),e)?(n=r[e],!t.I&&d(n)&&n===X(t.t,e)?(V(t),t.o[e]=$(t.A.h,n,t)):n):(n=t,(t=Y(r,e))?"value"in t?t.value:null==(t=t.get)?void 0:t.call(n.k):void 0)},has:function(t,e){return e in c(t)},ownKeys:function(t){return Reflect.ownKeys(c(t))},set:function(t,e,r){var n=Y(c(t),e);if(null!=n&&n.set)n.set.call(t.k,r);else{if(!t.P){var n=X(c(t),e),i=null==n?void 0:n[M];if(i&&i.t===r)return t.o[e]=r,!(t.R[e]=!1);if(H(r,n)&&(void 0!==r||f(t.t,e)))return!0;V(t),w(t)}t.o[e]===r&&(void 0!==r||e in t.o)||Number.isNaN(r)&&Number.isNaN(t.o[e])||(t.o[e]=r,t.R[e]=!0)}return!0},deleteProperty:function(t,e){return void 0!==X(t.t,e)||e in t.t?(t.R[e]=!1,V(t),w(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=c(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:1!==t.i||"length"!==e,enumerable:n.enumerable,value:r[e]}},defineProperty:function(){l(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){l(12)}},I={};h(P,function(t,e){I[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),I.deleteProperty=function(t,e){return I.set.call(this,t,e,void 0)},I.set=function(t,e,r){return P.set.call(this,t[0],e,r,t[0])},(r=ut.prototype).createDraft=function(t){d(t)||l(8),s(t)&&(s(e=t)||l(22,e),t=function r(t){if(!d(t))return t;var n,i=t[M],e=o(t);if(i){if(!i.P&&(i.i<4||!g("ES5").K(i)))return i.t;i.I=!0,n=J(t,e),i.I=!1}else n=J(t,e);return h(n,function(t,e){i&&L(i.t,t)===e||D(n,t,r(e))}),3===e?new Set(n):n}(e));var e=K(this),t=$(this,t,void 0);return t[M].C=!0,B(e),t},r.finishDraft=function(t,e){t=(t&&t[M]).A;return q(t,e),Z(void 0,t)},r.setAutoFreeze=function(t){this.D=t},r.setUseProxies=function(t){t&&!rt&&l(20),this.O=t},r.applyPatches=function(t,e){for(var r=e.length-1;0<=r;r--){var n=e[r];if(0===n.path.length&&"replace"===n.op){t=n.value;break}}-1<r&&(e=e.slice(r+1));var i=g("Patches").$;return s(t)?i(t,e):this.produce(t,function(t){return i(t,e)})};var r,t=new ut;t.produce,t.produceWithPatches.bind(t),t.setAutoFreeze.bind(t),t.setUseProxies.bind(t),t.applyPatches.bind(t),t.createDraft.bind(t),t.finishDraft.bind(t);function ut(t){var c=this;this.O=rt,this.D=!0,this.produce=function(t,o,e){var a,s,r;if("function"==typeof t&&"function"!=typeof o)return a=o,o=t,s=c,function(t){var e=this;void 0===t&&(t=a);for(var r=arguments.length,n=Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return s.produce(t,function(t){return o.call.apply(o,[e,t].concat(n))})};if("function"!=typeof o&&l(6),void 0!==e&&"function"!=typeof e&&l(7),d(t)){var n=K(c),i=$(c,t,void 0),u=!0;try{r=o(i),u=!1}finally{(u?b:B)(n)}return"undefined"!=typeof Promise&&r instanceof Promise?r.then(function(t){return q(n,e),Z(t,n)},function(t){throw b(n),t}):(q(n,e),Z(r,n))}if(!t||"object"!=typeof t)return(r=void 0===(r=o(t))?t:r)===nt&&(r=void 0),c.D&&y(r,!0),e&&(i=[],u=[],g("Patches").M(t,r,i,u),e(i,u)),r;l(21,t)},this.produceWithPatches=function(i,t){var r,n;return"function"==typeof i?function(t){for(var e=arguments.length,r=Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return c.produceWithPatches(t,function(t){return i.apply(void 0,[t].concat(r))})}:(t=c.produce(i,t,function(t,e){r=t,n=e}),"undefined"!=typeof Promise&&t instanceof Promise?t.then(function(t){return[t,r,n]}):[t,r,n])},"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze)}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ct(t){t=((t,e)=>{if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);if("object"!=n(r=r.call(t,e||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string");return"symbol"==n(t)?t:t+""}function lt(e,t){var r,n=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)),n}function dt(n){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(i),!0).forEach(function(t){var e,r;e=n,r=i[t=t],(t=ct(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):lt(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))})}return n}function R(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}function ht(){return Math.random().toString(36).substring(7).split("").join(".")}var ft="function"==typeof Symbol&&Symbol.observable||"@@observable",z={INIT:"@@redux/INIT"+ht(),REPLACE:"@@redux/REPLACE"+ht(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ht()}};function pt(t){if("object"==typeof t&&null!==t){for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}}function yt(t,e,r){if("function"==typeof e&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(R(0));if("function"==typeof e&&void 0===r&&(r=e,e=void 0),void 0!==r){if("function"!=typeof r)throw new Error(R(1));return r(yt)(t,e)}if("function"!=typeof t)throw new Error(R(2));var n=t,i=e,o=[],a=o,s=!1;function u(){a===o&&(a=o.slice())}function c(){if(s)throw new Error(R(3));return i}function l(e){if("function"!=typeof e)throw new Error(R(4));if(s)throw new Error(R(5));var r=!0;return u(),a.push(e),function(){if(r){if(s)throw new Error(R(6));r=!1,u();var t=a.indexOf(e);a.splice(t,1),o=null}}}function d(t){if(!pt(t))throw new Error(R(7));if(void 0===t.type)throw new Error(R(8));if(s)throw new Error(R(9));try{s=!0,i=n(i,t)}finally{s=!1}for(var e=o=a,r=0;r<e.length;r++)(0,e[r])();return t}return d({type:z.INIT}),(r={dispatch:d,subscribe:l,getState:c,replaceReducer:function(t){if("function"!=typeof t)throw new Error(R(10));n=t,d({type:z.REPLACE})}})[ft]=function(){var r=l,t={subscribe:function(t){if("object"!=typeof t||null===t)throw new Error(R(11));function e(){t.next&&t.next(c())}return e(),{unsubscribe:r(e)}}};return t[ft]=function(){return this},t},r}function mt(t){for(var e=Object.keys(t),u={},r=0;r<e.length;r++){var n=e[r];"function"==typeof t[n]&&(u[n]=t[n])}var c,i,l=Object.keys(u);try{i=u,Object.keys(i).forEach(function(t){t=i[t];if(void 0===t(void 0,{type:z.INIT}))throw new Error(R(12));if(void 0===t(void 0,{type:z.PROBE_UNKNOWN_ACTION()}))throw new Error(R(13))})}catch(t){c=t}return function(t,e){if(void 0===t&&(t={}),c)throw c;for(var r=!1,n={},i=0;i<l.length;i++){var o=l[i],a=u[o],s=t[o],a=a(s,e);if(void 0===a)throw e&&e.type,new Error(R(14));n[o]=a,r=r||a!==s}return(r=r||l.length!==Object.keys(t).length)?n:t}}function x(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})}function gt(i){return function(t){var r=t.dispatch,n=t.getState;return function(e){return function(t){return"function"==typeof t?t(r,n,i):e(t)}}}}t=gt();t.withExtraArgument=gt;let bt=t;function vt(t,e){return Mt(t,St(e))}Ot=function(t,e){return(Ot=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}))(t,e)};var Ot,t=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Ot(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},wt=function(n,i){var o,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(r){return function(t){var e=[r,t];if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,a=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))u.label=e[1];else if(6===e[0]&&u.label<s[1])u.label=s[1],s=e;else{if(!(s&&u.label<s[2])){s[2]&&u.ops.pop(),u.trys.pop();continue}u.label=s[2],u.ops.push(e)}}e=i.call(n,u)}catch(t){e=[6,t],a=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},A=function(t,e){for(var r=0,n=e.length,i=t.length;r<n;r++,i++)t[i]=e[r];return t},Et=Object.defineProperty,Mt=Object.defineProperties,St=Object.getOwnPropertyDescriptors,Pt=Object.getOwnPropertySymbols,It=Object.prototype.hasOwnProperty,Rt=Object.prototype.propertyIsEnumerable,zt=function(t,e,r){return e in t?Et(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r},j=function(t,e){for(var r in e=e||{})It.call(e,r)&&zt(t,r,e[r]);if(Pt)for(var n=0,i=Pt(e);n<i.length;n++){r=i[n];Rt.call(e,r)&&zt(t,r,e[r])}return t},xt=function(t,a,s){return new Promise(function(e,r){var n=function(t){try{o(s.next(t))}catch(t){r(t)}},i=function(t){try{o(s.throw(t))}catch(t){r(t)}},o=function(t){return t.done?e(t.value):Promise.resolve(t.value).then(n,i)};o((s=s.apply(t,a)).next())})},At="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?x:x.apply(null,arguments)};function jt(t){if("object"!=typeof t||null===t)return!1;t=Object.getPrototypeOf(t);if(null===t)return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return t===e}function i(n,i){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(i){var r=i.apply(void 0,t);if(r)return j(j({type:n,payload:r.payload},"meta"in r&&{meta:r.meta}),"error"in r&&{error:r.error});throw new Error("prepareAction did not return an object")}return{type:n,payload:t[0]}}return t.toString=function(){return""+n},t.type=n,t.match=function(t){return t.type===n},t}C=Array,t(N,C),Object.defineProperty(N,Symbol.species,{get:function(){return N},enumerable:!1,configurable:!0}),N.prototype.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return C.prototype.concat.apply(this,t)},N.prototype.prepend=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new(1===t.length&&Array.isArray(t[0])?N.bind.apply(N,A([void 0],t[0].concat(this))):N.bind.apply(N,A([void 0],t.concat(this))))};var C,Ct=N;function N(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=C.apply(this,t)||this;return Object.setPrototypeOf(r,N.prototype),r}T=Array,t(_,T),Object.defineProperty(_,Symbol.species,{get:function(){return _},enumerable:!1,configurable:!0}),_.prototype.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return T.prototype.concat.apply(this,t)},_.prototype.prepend=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new(1===t.length&&Array.isArray(t[0])?_.bind.apply(_,A([void 0],t[0].concat(this))):_.bind.apply(_,A([void 0],t.concat(this))))};var T,Nt=_;function _(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=T.apply(this,t)||this;return Object.setPrototypeOf(r,_.prototype),r}function Tt(){return function(t){var e=void 0===(e=(t=void 0===(t=t)?{}:t).thunk)||e,t=(t.immutableCheck,t.serializableCheck,t.actionCreatorCheck,new Ct);return e&&("boolean"==typeof e?t.push(bt):t.push(bt.withExtraArgument(e.extraArgument))),t}}function _t(t){if("object"!=typeof t||null===t)return{message:String(t)};for(var e={},r=0,n=Dt;r<n.length;r++){var i=n[r];"string"==typeof t[i]&&(e[i]=t[i])}return e}var kt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Lt=function(t){for(var e="",r=t=void 0===t?21:t;r--;)e+=kt[64*Math.random()|0];return e},Dt=["name","message","stack","code"],Ht=function(t,e){this.payload=t,this.meta=e},Ft=function(t,e){this.payload=t,this.meta=e};Wt.withTypes=function(){return Wt};function Wt(t,p,y){var m=i(t+"/fulfilled",function(t,e,r,n){return{payload:t,meta:vt(j({},n||{}),{arg:r,requestId:e,requestStatus:"fulfilled"})}}),g=i(t+"/pending",function(t,e,r){return{payload:void 0,meta:vt(j({},r||{}),{arg:e,requestId:t,requestStatus:"pending"})}}),b=i(t+"/rejected",function(t,e,r,n,i){return{payload:n,error:(y&&y.serializeError||_t)(t||"Rejected"),meta:vt(j({},i||{}),{arg:r,requestId:e,rejectedWithValue:!!n,requestStatus:"rejected",aborted:"AbortError"===(null==t?void 0:t.name),condition:"ConditionError"===(null==t?void 0:t.name)})}}),e="undefined"!=typeof AbortController?AbortController:(r.prototype.abort=function(){},r);function r(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return Object.assign(function(f){return function(a,s,u){var c,l=null!=y&&y.idGenerator?y.idGenerator(f):Lt(),d=new e;function h(t){c=t,d.abort()}var t=function(){return xt(this,null,function(){var r,n,i,o;return wt(this,function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),n=null==(n=null==y?void 0:y.condition)?void 0:n.call(y,f,{getState:s,extra:u}),null===(e=n)||"object"!=typeof e||"function"!=typeof e.then?[3,2]:[4,n];case 1:n=t.sent(),t.label=2;case 2:if(!1===n||d.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return i=new Promise(function(t,e){return d.signal.addEventListener("abort",function(){return e({name:"AbortError",message:c||"Aborted"})})}),a(g(l,f,null==(o=null==y?void 0:y.getPendingMeta)?void 0:o.call(y,{requestId:l,arg:f},{getState:s,extra:u}))),[4,Promise.race([i,Promise.resolve(p(f,{dispatch:a,getState:s,extra:u,requestId:l,signal:d.signal,abort:h,rejectWithValue:function(t,e){return new Ht(t,e)},fulfillWithValue:function(t,e){return new Ft(t,e)}})).then(function(t){if(t instanceof Ht)throw t;return t instanceof Ft?m(t.payload,l,f,t.meta):m(t,l,f)})])];case 3:return r=t.sent(),[3,5];case 4:return o=t.sent(),r=o instanceof Ht?b(null,l,f,o.payload,o.meta):b(o,l,f),[3,5];case 5:return y&&!y.dispatchConditionRejection&&b.match(r)&&r.meta.condition||a(r),[2,r]}var e})})}();return Object.assign(t,{abort:h,requestId:l,arg:f,unwrap:function(){return t.then(qt)}})}},{pending:g,rejected:b,fulfilled:m,typePrefix:t})}function qt(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}Object.assign;t="listenerMiddleware";i(t+"/add"),i(t+"/removeAll"),i(t+"/remove");"function"==typeof queueMicrotask&&queueMicrotask.bind("undefined"!=typeof window?window:void 0!==e.g?e.g:globalThis);t=function(e){return function(t){setTimeout(t,e)}};"undefined"!=typeof window&&window.requestAnimationFrame||t(10);Q();var Bt=e(904);let Kt=(t=>{var e,r=Tt(),n=void 0===(n=(t=t||{}).reducer)?void 0:n,i=void 0===(i=t.middleware)?r():i,o=void 0===(o=t.devTools)||o,a=void 0===(a=t.preloadedState)?void 0:a,t=void 0===(t=t.enhancers)?void 0:t;if("function"==typeof n)e=n;else{if(!jt(n))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');e=mt(n)}return"function"==typeof(n=i)&&(n=n(r)),i=function(){for(var t=arguments.length,o=new Array(t),e=0;e<t;e++)o[e]=arguments[e];return function(i){return function(){var t=i.apply(void 0,arguments),e=function(){throw new Error(R(15))},r={getState:t.getState,dispatch:function(){return e.apply(void 0,arguments)}},n=o.map(function(t){return t(r)}),e=x.apply(void 0,n)(t.dispatch);return dt(dt({},t),{},{dispatch:e})}}}.apply(void 0,n),r=x,o&&(r=At(j({trace:!1},"object"==typeof o&&o))),n=new Nt(i),o=n,Array.isArray(t)?o=A([i],t):"function"==typeof t&&(o=t(n)),yt(e,a,r.apply(void 0,o))})({reducer:{modalMutateObserver:function(t={},e){switch(e.type){case"modalMutateObserver/update":return{...t,[e.name]:{name:e.name,x:e.x,y:e.y,width:e.width,height:e.height}};case"modalMutateObserver/active":return{...t,[e.name]:{...t[e.name],zIndex:e.zIndex}};case"modalMutateObserver/delete":var r={...t};return delete r[e.name],r;case"modalMutateObserver/maximize":return{...t,[e.name]:{...t[e.name],width:"100%",height:`calc(100% - ${Bt.M}px)`,x:"0px",y:Bt.M+"px"}};case"modalMutateObserver/position":return{...t,[e.name]:{...t[e.name],x:e.x,y:e.y}};case"modalMutateObserver/size":return{...t,[e.name]:{...t[e.name],width:e.width,height:e.height}};default:return{...t}}},modalDragObserver:function(t={mouseOn:!1,name:"",target:"",mousePosition:{x:0,y:0}},e){switch(e.type){case"modalDragObserver/start":return{...t,mouseOn:!0,name:e.name,mousePosition:{x:e.mousePosition.x,y:e.mousePosition.y}};case"modalDragObserver/end":return{...t,mouseOn:!1};default:return t}},focusedModalObserver:function(t={name:""},e){return"focus"!==e.type?t:{...t,name:e.name}},modalResizeObserver:function(t={isResized:!1,name:"",mousePosition:{},resizeTriggerProp:""},e){switch(e.type){case"modalResizeObserver/start":return{isResized:!0,name:e.name,mousePosition:e.mousePosition,resizeTriggerProp:e.resizeTriggerProp};case"modalResizeObserver/end":return{isResized:!1,name:"",mousePosition:{},resizeTriggerProp:""};default:return{...t}}}}}),Gt=0}},n={};function i(t){var e=n[t];return void 0!==e||(e=n[t]={exports:{}},r[t](e,e.exports,i)),e.exports}i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i(904);i(185)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianMvaW5kZXguYnVuZGxlLmpzIiwibWFwcGluZ3MiOiJvRUFHTyxTQUFTQSxFQUFPQyxFQUFRLFFBQVNDLEVBQVMsU0FDN0NDLEtBQUtDLGVBQWlCLENBQ2xCQyxLQUFPLE9BQ1BDLElBQU0sTUFDTkMsU0FBVyxXQUNYQyxVQUFZLFlBQ1pDLE1BQVEsUUFDUkMsT0FBUyxTQUNUQyxZQUFjLGNBQ2RDLGFBQWUsY0FDbkIsRUFFQVQsS0FBS1UsaUJBQW1CLENBQ3BCWixNQUFPYSxPQUFPYixFQUFNYyxNQUFNLE1BQU0sRUFBRSxFQUFFLEVBQ3BDYixPQUFRWSxPQUFPWixFQUFPYSxNQUFNLE1BQU0sRUFBRSxFQUFFLENBQzFDLEVBUUFaLEtBQUthLEtBQU9DLFNBQVNDLGNBQWMsTUFBTSxFQUV6Q2YsS0FBS2dCLE1BQVEsSUFDakIsQ0NyQk8sU0FBU0MsRUFBV0QsR0FFekJoQixLQUFLa0IsVUFBWSxDQUNmQyxTQUFVLHlCQUNWQyxTQUFVLDBCQUNWQyxTQUFVLDBCQUNWQyxNQUFPLHVCQUVQQyxLQUFNLHFCQUNSLEVBRUF2QixLQUFLZ0IsTUFBUUEsRUFDYmhCLEtBQUt3QixVQUFZUixFQUFNUyxRQUFRQyxLQUMvQjFCLEtBQUsyQixZQUFjLEtBQ25CM0IsS0FBSzRCLFdBQWEsQ0FDaEI5QixNQUFPLE1BQ1BDLE9BQVEsTUFDUjhCLEVBQUcsTUFDSEMsRUFBRyxLQUNMLENBRUYsQ0RXQWpDLEVBQU9rQyxVQUFVQyxLQUFPLFNBQVVoQixHQUk5QixJQUFJLElBQU1pQixLQUhWakMsS0FBS2dCLE1BQVFBLEVBR1NoQixLQUFLQyxlQUFlLENBQ2hDaUMsRUFBb0JsQyxLQUFLQyxlQUFlZ0MsR0FDeENFLEVBQWlCbkMsS0FBS2dCLE1BQU1vQiw2QkFBNkJGLEtBQXFCLEVBQ3pELEVBQXhCQyxFQUFlRSxRQUNkRixFQUFlRyxRQUFTQyxJQUNwQkEsRUFBUUMsaUJBQWlCLFlBQWFDLEdBQUt6QyxLQUFLMEMsd0JBQXdCRCxFQUFHekMsSUFBSSxDQUFDLENBQ3BGLENBQUMsQ0FFVCxDQUVBLE9BQU9BLElBQ1gsRUFHQUgsRUFBT2tDLFVBQVVXLHdCQUEwQixTQUFVRCxFQUFHRSxHQUNwREYsRUFBRUcsZUFBZSxFQUNqQixJQUFNQyxFQUFnQkosRUFBRUssY0FDbEJDLEVBQW9CRixFQUFjRyxjQUFjQSxjQUFjdkIsUUFBUUMsS0FDdEVRLEVBQW9CVyxFQUFjSSxhQUFhLFFBQVEsRUFFekRDLEVBQWdCLENBQ2hCckIsRUFBR1ksRUFBRVUsTUFDTHJCLEVBQUdXLEVBQUVXLEtBQ1QsRUFFQVQsRUFBTVUsZ0JBQWdCTixFQUFtQkcsRUFBZWhCLENBQWlCLENBRTdFLEVBRUFyQyxFQUFPa0MsVUFBVXNCLGdCQUFrQixTQUFTM0IsRUFBTXdCLEVBQWVoQixHQUk3RCxPQUhBb0IsRUFBQSxFQUFNQyxTQUFTLENBQUVDLEtBQU0sUUFBUzlCLEtBQUFBLENBQUssQ0FBQyxFQUN0QzRCLEVBQUEsRUFBTUMsU0FBUyxDQUFFQyxLQUFNLDRCQUE2QjlCLEtBQUFBLEVBQU13QixjQUFBQSxFQUFlaEIsa0JBQUFBLENBQWlCLENBQUMsRUFFcEZsQyxJQUNYLEVBS0FILEVBQU9rQyxVQUFVMEIsV0FBYSxXQUcxQixPQUQrQkgsRUFBQSxFQUFNSSxTQUFTLEVBRFhDLG1CQUd2QyxFQUdBOUQsRUFBT2tDLFVBQVU2QixpQkFBbUIsV0FDaEMsT0FBTzVELEtBQUs2RCxTQUFTLEVBQUU3RCxLQUFLeUQsV0FBVyxFQUFFL0IsS0FDN0MsRUFLQTdCLEVBQU9rQyxVQUFVK0IsZUFBaUIsV0FDOUIsT0FBTzlELEtBQUt5RCxXQUFXLEVBQUVNLFNBQzdCLEVBVUNsRSxFQUFPa0MsVUFBVWlDLGtCQUFvQixXQUNsQ2hFLEtBQUthLEtBQUsyQixpQkFBaUIsWUFBYUMsR0FBS3pDLEtBQUtpRSxjQUFjeEIsRUFBR3pDLElBQUksQ0FBQyxDQUM1RSxFQUtBSCxFQUFPa0MsVUFBVWtDLGNBQWdCLFNBQVV4QixHQUN2Q0EsRUFBRUcsZUFBZSxFQUNqQkgsRUFBRXlCLGdCQUFnQixFQUVmbEUsS0FBSzhELGVBQWUsR0FDbkI5RCxLQUFLbUUsWUFBWTFCLENBQUMsQ0FHMUIsRUFNQTVDLEVBQU9rQyxVQUFVcUMsOEJBQWdDLFNBQVNDLEdBR3ZELE9BRmFyRSxLQUFLc0Usa0JBQWtCLEVBQUV6QyxFQUFJN0IsS0FBS3VFLGNBQWMsRUFBRXpFLE1BQVN1RSxDQUczRSxFQU1BeEUsRUFBT2tDLFVBQVV5Qyw0QkFBOEIsU0FBU0gsR0FFcEQsT0FEWUEsRUFBaUJyRSxLQUFLc0Usa0JBQWtCLEVBQUV6QyxDQUUxRCxFQU9DaEMsRUFBT2tDLFVBQVUwQywrQkFBaUMsU0FBU0MsR0FJeEQsT0FIYzFFLEtBQUtzRSxrQkFBa0IsRUFBRXhDLEVBQUk5QixLQUFLdUUsY0FBYyxFQUFFeEUsT0FBVTJFLENBSTlFLEVBTUE3RSxFQUFPa0MsVUFBVTRDLDZCQUErQixTQUFTRCxHQUVyRCxPQURhQSxFQUFpQjFFLEtBQUtzRSxrQkFBa0IsRUFBRXhDLENBRTNELEVBUUFqQyxFQUFPa0MsVUFBVTZDLGlCQUFtQixTQUFTOUUsR0FHekMsT0FEZ0JFLEtBQUs2RSxvQkFBb0IvRSxDQUFLLEVBRW5DLEtBR0EsQ0FDUEEsTUFBQUEsRUFDQUMsT0FBUUMsS0FBS3VFLGNBQWMsRUFBRXhFLE1BQ2pDLENBR0osRUFPQUYsRUFBT2tDLFVBQVUrQyxrQkFBb0IsU0FBUy9FLEdBRzFDLE9BRmdCQyxLQUFLK0UscUJBQXFCaEYsQ0FBTSxFQUdyQyxLQUVBLENBQ1BELE1BQU9FLEtBQUt1RSxjQUFjLEVBQUV6RSxNQUM1QkMsT0FBQUEsQ0FDSixDQUdKLEVBTUFGLEVBQU9rQyxVQUFVOEMsb0JBQXNCLFNBQVMvRSxHQUU1QyxPQUFRQSxFQUFRRSxLQUFLVSxpQkFBaUJaLEtBQzFDLEVBTUFELEVBQU9rQyxVQUFVZ0QscUJBQXVCLFNBQVNoRixHQUM3QyxPQUFRQSxFQUFTQyxLQUFLVSxpQkFBaUJYLE1BQzNDLEVBT0NGLEVBQU9rQyxVQUFVb0MsWUFBYyxTQUFTMUIsR0FDckN1QyxJQUFJWCxFQUFpQjVCLEVBQUVVLE1BQ25CdUIsRUFBaUJqQyxFQUFFVyxNQUd2QixHQUFHc0IsRUFBQUEsRUFBaUJPLEdBQXBCLENBT0FELElBQUlFLEVBQWdCLEdBQ2hCQyxFQUFnQixHQUVoQnJGLEVBQVEsRUFDUkMsRUFBUSxFQUNScUYsRUFBTyxFQUNQQyxFQUFXLEVBRWYsT0FWd0JyRixLQUFLeUQsV0FBVyxFQUFFdkIsbUJBV3RDLEtBQUtsQyxLQUFLQyxlQUFlQyxLQUNyQkosRUFBUUUsS0FBS29FLDhCQUE4QkMsQ0FBYyxHQUN6RGUsRUFBT3BGLEtBQUs0RSxpQkFBaUI5RSxDQUFLLEtBRzlCRSxLQUFLYSxLQUFLeUUsTUFBTUMsT0FBUyxZQUN6QkYsRUFBVyxDQUNQeEQsRUFBR3dDLEVBQ0h2QyxFQUFHOUIsS0FBS3NFLGtCQUFrQixFQUFFeEMsQ0FDaEMsRUFFQTlCLEtBQUt3RixZQUFZSixFQUFNQyxFQUFVckYsSUFBSSxHQUd6QyxNQUNKLEtBQUtBLEtBQUtDLGVBQWVLLE1BRXJCUixFQUFRRSxLQUFLd0UsNEJBQTRCSCxDQUFjLEdBQ3ZEZSxFQUFPcEYsS0FBSzRFLGlCQUFpQjlFLENBQUssS0FHOUJFLEtBQUt5RixnQkFBZ0JMLENBQUksRUFDekJwRixLQUFLYSxLQUFLeUUsTUFBTUMsT0FBUyxhQUc3QixNQUNKLEtBQUt2RixLQUFLQyxlQUFlTSxPQUVyQlIsRUFBU0MsS0FBSzJFLDZCQUE2QkQsQ0FBYyxHQUN6RFUsRUFBT3BGLEtBQUs4RSxrQkFBa0IvRSxDQUFNLEtBR2hDQyxLQUFLYSxLQUFLeUUsTUFBTUMsT0FBUyxZQUN6QnZGLEtBQUt5RixnQkFBZ0JMLENBQUksR0FJN0IsTUFDSixLQUFLcEYsS0FBS0MsZUFBZUUsSUFHckJKLEVBQVNDLEtBQUt5RSwrQkFBK0JDLENBQWMsR0FDM0RVLEVBQU9wRixLQUFLOEUsa0JBQWtCL0UsQ0FBTSxLQUdoQ3NGLEVBQVcsQ0FDUHhELEVBQUc3QixLQUFLc0Usa0JBQWtCLEVBQUV6QyxFQUM1QkMsRUFBRzRDLENBQ1AsRUFFQTFFLEtBQUt3RixZQUFZSixFQUFNQyxFQUFVckYsSUFBSSxFQUNyQ0EsS0FBS2EsS0FBS3lFLE1BQU1DLE9BQVMsYUFHN0IsTUFDSixLQUFLdkYsS0FBS0MsZUFBZUksVUFjckIsR0FaQVAsRUFBUUUsS0FBS3dFLDRCQUE0QkgsQ0FBYyxFQUV2RHRFLEVBQVNDLEtBQUt5RSwrQkFBK0JDLENBQWMsRUFFM0RXLEVBQVcsQ0FDUHhELEVBQUc3QixLQUFLc0Usa0JBQWtCLEVBQUV6QyxFQUM1QkMsRUFBRzRDLENBQ1AsRUFFQVEsRUFBZ0JsRixLQUFLNkUsb0JBQW9CL0UsQ0FBSyxFQUM5Q3FGLEVBQWdCbkYsS0FBSytFLHFCQUFxQmhGLENBQU0sRUFFNUNtRixDQUFBQSxHQUFpQkMsQ0FBQUEsRUFBckIsQ0FNQSxHQUZBbkYsS0FBS2EsS0FBS3lFLE1BQU1DLE9BQVMsY0FFckJMLEdBQWlCLENBQUNDLEVBQ2xCckYsRUFBUUUsS0FBS1UsaUJBQWlCWixXQUUzQixHQUFJLENBQUNvRixHQUFpQkMsRUFBZSxDQUN4Q0MsRUFBTyxDQUNIdEYsTUFBQUEsRUFDQUMsT0FBUUMsS0FBS3VFLGNBQWMsRUFBRXhFLE1BQ2pDLEVBQ0FDLEtBQUt5RixnQkFBZ0JMLENBQUksRUFDekIsS0FDSixDQUVBQSxFQUFPLENBQ0h0RixNQUFBQSxFQUNBQyxPQUFBQSxDQUNKLEVBRUFDLEtBQUt3RixZQUFZSixFQUFNQyxDQUFRLENBckIvQixDQXVCQSxNQUNKLEtBQUtyRixLQUFLQyxlQUFlRyxTQUVyQk4sRUFBUUUsS0FBS29FLDhCQUE4QkMsQ0FBYyxFQUN6RHRFLEVBQVNDLEtBQUt5RSwrQkFBK0JDLENBQWMsRUFDM0RXLEVBQVcsQ0FDUHhELEVBQUd3QyxFQUNIdkMsRUFBRzRDLENBRVAsRUFFQVEsRUFBZ0JsRixLQUFLNkUsb0JBQW9CL0UsQ0FBSyxFQUM5Q3FGLEVBQWdCbkYsS0FBSytFLHFCQUFxQmhGLENBQU0sRUFDNUNtRixHQUFpQkMsSUFJckJuRixLQUFLYSxLQUFLeUUsTUFBTUMsT0FBUyxjQUVyQkwsR0FBaUIsQ0FBQ0MsR0FDbEJDLEVBQU8sQ0FDSHRGLE1BQU9FLEtBQUt1RSxjQUFjLEVBQUV6RSxNQUM1QkMsT0FBQUEsQ0FDSixFQUNBc0YsRUFBU3hELEVBQUk3QixLQUFLc0Usa0JBQWtCLEVBQUV6QyxHQUMvQixDQUFDcUQsR0FBaUJDLEdBQ3pCQyxFQUFPLENBQ0h0RixNQUFBQSxFQUNBQyxPQUFRQyxLQUFLdUUsY0FBYyxFQUFFeEUsTUFDakMsRUFDQXNGLEVBQVN2RCxFQUFJOUIsS0FBS3NFLGtCQUFrQixFQUFFeEMsR0FHdENzRCxFQUFPLENBQ0h0RixNQUFBQSxFQUNBQyxPQUFBQSxDQUNKLEVBRUpDLEtBQUt3RixZQUFZSixFQUFNQyxDQUFRLEdBRS9CLE1BQ0osS0FBS3JGLEtBQUtDLGVBQWVRLGFBRXJCWCxFQUFRRSxLQUFLd0UsNEJBQTRCSCxDQUFjLEVBQ3ZEdEUsRUFBU0MsS0FBSzJFLDZCQUE2QkQsQ0FBYyxFQUV6RFEsRUFBZ0JsRixLQUFLNkUsb0JBQW9CL0UsQ0FBSyxFQUM5Q3FGLEVBQWdCbkYsS0FBSytFLHFCQUFxQmhGLENBQU0sRUFFNUNtRixHQUFpQkMsSUFJckJuRixLQUFLYSxLQUFLeUUsTUFBTUMsT0FBUyxjQUV6QnZGLEtBQUs2RSxvQkFBb0IvRSxDQUFLLElBQU1BLEVBQVFFLEtBQUtVLGlCQUFpQlosT0FDbEVFLEtBQUsrRSxxQkFBcUJoRixDQUFNLElBQU1BLEVBQVNDLEtBQUtVLGlCQUFpQlgsUUFFckVxRixFQUFPLENBQ0h0RixNQUFBQSxFQUNBQyxPQUFBQSxDQUNKLEVBRUFDLEtBQUt5RixnQkFBZ0JMLENBQUksR0FFekIsTUFDSixLQUFLcEYsS0FBS0MsZUFBZU8sWUFFckJWLEVBQVFFLEtBQUtvRSw4QkFBOEJDLENBQWMsRUFDekR0RSxFQUFTQyxLQUFLMkUsNkJBQTZCRCxDQUFjLEVBRXpEVyxFQUFXLENBQ1B4RCxFQUFHd0MsRUFDSHZDLEVBQUc5QixLQUFLc0Usa0JBQWtCLEVBQUV4QyxDQUNoQyxFQUVBb0QsRUFBZ0JsRixLQUFLNkUsb0JBQW9CL0UsQ0FBSyxFQUM5Q3FGLEVBQWdCbkYsS0FBSytFLHFCQUFxQmhGLENBQU0sRUFDNUNtRixHQUFpQkMsSUFJckJuRixLQUFLYSxLQUFLeUUsTUFBTUMsT0FBUyxjQUVyQkwsR0FBaUIsQ0FBQ0MsR0FDbEJDLEVBQU8sQ0FDSHRGLE1BQU9FLEtBQUt1RSxjQUFjLEVBQUV6RSxNQUM1QkMsT0FBQUEsQ0FDSixFQUNBQyxLQUFLeUYsZ0JBQWdCTCxDQUFJLElBRWxCLENBQUNGLEdBQWlCQyxHQUN6QkMsRUFBTyxDQUNIdEYsTUFBQUEsRUFDQUMsT0FBUUMsS0FBS3VFLGNBQWMsRUFBRXhFLE1BQ2pDLEVBRUFzRixFQUFTdkQsRUFBSTlCLEtBQUtzRSxrQkFBa0IsRUFBRXhDLEdBRXRDc0QsRUFBTyxDQUNIdEYsTUFBQUEsRUFDQUMsT0FBQUEsQ0FDSixFQUVKQyxLQUFLd0YsWUFBWUosRUFBTUMsQ0FBUSxHQUt2QyxDQXpOQSxDQTBOSixFQU1BeEYsRUFBT2tDLFVBQVU4QixTQUFXLFdBR3hCLE9BRDBCUCxFQUFBLEVBQU1JLFNBQVMsRUFETmdDLG1CQUd2QyxFQUtBN0YsRUFBT2tDLFVBQVV3QyxjQUFnQixXQUM3QixJQUFNdkQsRUFBUWhCLEtBQUs0RCxpQkFBaUIsRUFDcEMsTUFBTyxDQUFFOUQsTUFBTzZGLFdBQVczRSxFQUFNbEIsTUFBTWMsTUFBTSxNQUFNLEVBQUUsRUFBRSxFQUFHYixPQUFRNEYsV0FBVzNFLEVBQU1qQixPQUFPYSxNQUFNLE1BQU0sRUFBRSxFQUFFLENBQUUsQ0FDaEgsRUFLQ2YsRUFBT2tDLFVBQVUwRCxnQkFBa0IsU0FBU0wsR0FDekM5QixFQUFBLEVBQU1DLFNBQVMsQ0FDWEMsS0FBTSwyQkFDTjlCLEtBQU0xQixLQUFLeUQsV0FBVyxFQUFFL0IsS0FDeEI1QixNQUFVc0YsRUFBS3RGLE1BQVIsS0FDUEMsT0FBV3FGLEVBQUtyRixPQUFSLElBQ1osQ0FBQyxDQUNMLEVBTUFGLEVBQU9rQyxVQUFVeUQsWUFBYyxTQUFTSixFQUFNQyxHQUUxQy9CLEVBQUEsRUFBTUMsU0FBUyxDQUNYQyxLQUFNLDZCQUNOOUIsS0FBTTFCLEtBQUt5RCxXQUFXLEVBQUUvQixLQUN4QkcsRUFBTXdELEVBQVN4RCxFQUFaLEtBQ0hDLEVBQU11RCxFQUFTdkQsRUFBWixLQUNIaEMsTUFBVXNGLEVBQUt0RixNQUFSLEtBQ1BDLE9BQVdxRixFQUFLckYsT0FBUixJQUNaLENBQUMsQ0FDTCxFQU1BRixFQUFPa0MsVUFBVXVDLGtCQUFvQixXQUNqQyxJQUFNdEQsRUFBUWhCLEtBQUs0RCxpQkFBaUIsRUFDcEMsTUFBTyxDQUFFL0IsRUFBRzhELFdBQVczRSxFQUFNYSxFQUFFakIsTUFBTSxNQUFNLEVBQUUsRUFBRSxFQUFHa0IsRUFBRzZELFdBQVczRSxFQUFNYyxFQUFFbEIsTUFBTSxNQUFNLEVBQUUsRUFBRSxDQUFFLENBQzlGLEVBTUFmLEVBQU9rQyxVQUFVNkQsd0JBQTBCLFdBQ3ZDNUYsS0FBS2EsS0FBSzJCLGlCQUFpQixVQUFXQyxHQUFLekMsS0FBSzZGLG9CQUFvQnBELENBQUMsQ0FBQyxDQUUxRSxFQU1BNUMsRUFBT2tDLFVBQVU4RCxvQkFBc0IsU0FBU3BELEdBQzVDQSxFQUFFRyxlQUFlLEVBQ2pCSCxFQUFFeUIsZ0JBQWdCLEVBR2xCbEUsS0FBS2EsS0FBS3lFLE1BQU1DLE9BQVMsVUFHekJ2RixLQUFLOEQsZUFBZSxHQUFLUixFQUFBLEVBQU1DLFNBQVMsQ0FBRUMsS0FBTSx5QkFBMEIsQ0FBQyxDQUUvRSxFQUdBM0QsRUFBT2tDLFVBQVUrRCxVQUFZLFdBSXpCLE9BSEE5RixLQUFLZ0Usa0JBQWtCLEVBQ3ZCaEUsS0FBSzRGLHdCQUF3QixFQUV0QjVGLElBQ1gsRUNyZkFpQixFQUFXYyxVQUFVZ0UsYUFBZSxXQUNsQyxJQUFNQyxFQUFhaEcsS0FBS2dCLE1BQU1ELGNBQWNmLEtBQUtrQixVQUFVQyxRQUFRLEVBQ25FLElBQU1ILEVBQVFoQixLQUFLZ0IsTUFDbkJnRixFQUFXeEQsaUJBQWlCLFNBQVVDLElBQ3BDQSxFQUFFRyxlQUFlLEVBRWpCNUIsRUFBTXNFLE1BQU1XLGdCQUFrQnhELEVBQUV5RCxPQUFPQyxLQUN6QyxDQUFDLENBQ0gsRUFJQWxGLEVBQVdjLFVBQVVxRSxjQUFnQixTQUFVM0QsRUFBR0UsR0FDaEQsSUFBTTBELEVBQVMxRCxFQUFNM0IsTUFBTUQsY0FBYzRCLEVBQU16QixVQUFVRyxRQUFRLEVBRzNEaUYsR0FGTjdELEVBQUVHLGVBQWUsRUFFSFUsRUFBQSxFQUFNSSxTQUFTLEdBQ3ZCNkMsRUFBWUQsRUFBTVosb0JBQW9CL0MsRUFBTW5CLFdBRWxEbUIsRUFBTWYsV0FBVzlCLE1BQVF5RyxFQUFVekcsTUFDbkM2QyxFQUFNZixXQUFXN0IsT0FBU3dHLEVBQVV4RyxPQUNwQzRDLEVBQU1mLFdBQVdDLEVBQUkwRSxFQUFVMUUsRUFDL0JjLEVBQU1mLFdBQVdFLEVBQUl5RSxFQUFVekUsRUFHVnVFLEVBQU9yRCxjQUNLakMsY0FBYzRCLEVBQU16QixVQUFVRSxRQUFRLEVBQzNEb0YsVUFBVUMsT0FBTyxRQUFRLEVBQ3JDSixFQUFPRyxVQUFVRSxJQUFJLFFBQVEsRUFFN0JwRCxFQUFBLEVBQU1DLFNBQVMsQ0FBRUMsS0FBTSwrQkFBZ0M5QixLQUFNaUIsRUFBTW5CLFNBQVUsQ0FBQyxDQUVoRixFQUVBUCxFQUFXYyxVQUFVNEUsY0FBZ0IsU0FBVWxFLEVBQUdFLEdBQzlDLElBQU1pRSxFQUFjakUsRUFBTTNCLE1BQU1ELGNBQWM0QixFQUFNekIsVUFBVUUsUUFBUSxFQUNwRXFCLEVBQUVHLGVBQWUsRUFHSWdFLEVBQVk1RCxjQUNMakMsY0FBYzRCLEVBQU16QixVQUFVRyxRQUFRLEVBQzNEbUYsVUFBVUMsT0FBTyxRQUFRLEVBQ2hDRyxFQUFZSixVQUFVRSxJQUFJLFFBQVEsRUFFbENwRCxFQUFBLEVBQU1DLFNBQVMsQ0FDYkMsS0FBTSw2QkFDTjlCLEtBQU1pQixFQUFNbkIsVUFDWkssRUFBR2MsRUFBTWYsV0FBV0MsRUFDcEJDLEVBQUdhLEVBQU1mLFdBQVdFLEVBQ3BCaEMsTUFBTzZDLEVBQU1mLFdBQVc5QixNQUN4QkMsT0FBUTRDLEVBQU1mLFdBQVc3QixNQUM3QixDQUFDLENBQ0wsRUFRQWtCLEVBQVdjLFVBQVU4RSxXQUFhLFdBQ2xCN0csS0FBS2dCLE1BQU1ELGNBQWNmLEtBQUtrQixVQUFVSSxLQUFLLEVBQ3JEa0IsaUJBQWlCLFFBQVNDLElBQzVCQSxFQUFFRyxlQUFlLEVBSWpCNUMsS0FBSzJCLFlBQVksRUFHakIyQixFQUFBLEVBQU1DLFNBQVMsQ0FBRUMsS0FBTSw2QkFBOEI5QixLQUFNMUIsS0FBS3dCLFNBQVUsQ0FBQyxFQUMzRThCLEVBQUEsRUFBTUMsU0FBUyxDQUFFQyxLQUFNLFFBQVM5QixLQUFNLEVBQUcsQ0FBQyxFQUcxQzFCLEtBQUtnQixNQUFNZ0MsY0FBYzhELFlBQVk5RyxLQUFLZ0IsS0FBSyxDQUdqRCxDQUFDLENBQ0wsRUFTQUMsRUFBV2MsVUFBVWdGLFlBQWMsV0FDL0IvRyxLQUFLZ0IsTUFBTXdCLGlCQUFpQixZQUFhQyxJQUNyQ0EsRUFBRXlCLGdCQUFnQixFQUNsQmxFLEtBQUtxRCxnQkFBZ0IsQ0FDekIsQ0FBQyxDQUNMLEVBUUFwQyxFQUFXYyxVQUFVc0IsZ0JBQWtCLFdBQ25DLElBQU0yRCxHQUFTLE9BQVUsRUFDekIxRCxFQUFBLEVBQU1DLFNBQVMsQ0FBRUMsS0FBTSw2QkFBOEI5QixLQUFNMUIsS0FBS3dCLFVBQVd3RixPQUFBQSxDQUFPLENBQUMsRUFDbkYxRCxFQUFBLEVBQU1DLFNBQVMsQ0FBRUMsS0FBTSxRQUFTOUIsS0FBTTFCLEtBQUt3QixTQUFVLENBQUMsQ0FDeEQsRUFjRlAsRUFBV2MsVUFBVWtGLGlCQUFtQixXQUN0QyxJQUFNWCxFQUFRaEQsRUFBQSxFQUFNSSxTQUFTLEVBRTFCMUQsS0FBS3dCLFlBQWM4RSxFQUFNWSxxQkFBcUJ4RixRQUkzQ3lGLEVBQU9iLEVBQU1aLG9CQUFvQjFGLEtBQUt3QixZQUVwQzFCLFFBQ05FLEtBQUtnQixNQUFNc0UsTUFBTXhGLE1BQVFxSCxFQUFLckgsT0FHN0JxSCxFQUFLcEgsU0FDTkMsS0FBS2dCLE1BQU1zRSxNQUFNdkYsT0FBU29ILEVBQUtwSCxRQUc5Qm9ILEVBQUt0RixJQUNON0IsS0FBS2dCLE1BQU1zRSxNQUFNOEIsS0FBT0QsRUFBS3RGLEdBRzVCc0YsRUFBS3JGLElBQ045QixLQUFLZ0IsTUFBTXNFLE1BQU0rQixJQUFNRixFQUFLckYsR0FHM0JxRixFQUFLSCxVQUNOaEgsS0FBS2dCLE1BQU1zRSxNQUFNMEIsT0FBU0csRUFBS0gsT0FHbkMsRUFRRS9GLEVBQVdjLFVBQVUrRCxVQUFZLFdBS2pDLE9BSkE5RixLQUFLMkIsWUFBYzJCLEVBQUEsRUFBTXdDLFVBQVcsS0FDbEM5RixLQUFLaUgsaUJBQWlCLENBQ3hCLENBQUMsRUFFTWpILEtBQUsyQixXQUNkLEVBVUFWLEVBQVdjLFVBQVVDLEtBQU8sV0FDMUJoQyxLQUFLOEYsVUFBVSxFQUNmOUYsS0FBS3FELGdCQUFnQixFQUNyQnJELEtBQUsrRyxZQUFZLEVBQ2pCL0csS0FBSzZHLFdBQVcsRUFFaEI3RyxLQUFLK0YsYUFBYSxFQUVsQi9GLEtBQUtnQixNQUFNRCxjQUFjZixLQUFLa0IsVUFBVUUsUUFBUSxFQUMzQ29CLGlCQUFpQixRQUFTQyxHQUFLekMsS0FBSzJHLGNBQWNsRSxFQUFHekMsSUFBSSxDQUFDLEVBQy9EQSxLQUFLZ0IsTUFBTUQsY0FBY2YsS0FBS2tCLFVBQVVHLFFBQVEsRUFDM0NtQixpQkFBaUIsUUFBU0MsR0FBS3pDLEtBQUtvRyxjQUFjM0QsRUFBR3pDLElBQUksQ0FBQyxFQUMvREEsS0FBS2dCLE1BQU1ELGNBQWNmLEtBQUtrQixVQUFVSyxJQUFJLEVBQ3ZDaUIsaUJBQWlCLFdBQVlDLElBRUwsU0FETGEsRUFBQSxFQUFNSSxTQUFTLEVBQUVnQyxvQkFBb0IxRixLQUFLd0IsV0FDL0MxQixNQUNYRSxLQUFLMkcsY0FBY2xFLEVBQUd6QyxJQUFJLEVBRzFCQSxLQUFLb0csY0FBYzNELEVBQUd6QyxJQUFJLENBRTlCLENBQUMsQ0FFUCxFQ3RPQSxJQUFRc0gsRUFBZ0IsRUFBUSxHQUF1QixFQUFuQyxZQUNaQyxFQUFjLEVBQVEsR0FBbUIsRUFBL0IsVUFJTHRDLEVBQWEsR0FHMUIsU0FBU3VDLElBQ0x4SCxLQUFLeUgsUUFBVSxFQUNmekgsS0FBS29GLEtBQU8sQ0FDUnRGLE1BQU8sUUFDUEMsT0FBUSxPQUNaLEVBQ0FDLEtBQUswSCxVQUFZLEtBQ2pCMUgsS0FBSzJILE9BQVMsS0FDZDNILEtBQUs0SCxHQUFLLElBQ2QsQ0FHQUosRUFBS3pGLFVBQVU4RixrQkFBb0IsU0FBU3BGLEVBQUdFLEdBQzNDRixFQUFFRyxlQUFlLEVBRWpCLElBQU1rRixFQUFNaEgsU0FBU0MsY0FBYyxPQUFPLEVBRXBDZ0gsRUFEVSxJQUFJVCxFQUFZM0UsRUFBTThFLFFBQVN6SCxLQUFLb0YsS0FBS3RGLE1BQU9FLEtBQUtvRixLQUFLckYsTUFBTSxFQUMxRGlDLEtBQUssRUFDM0IrRixFQUFNQyxVQUFVQyxhQUFhLFlBQWEsUUFBUXRGLEVBQU04RSxPQUFTLEVBRWpFSyxFQUFJSSxZQUFZSCxFQUFNQyxTQUFTLEVBQ1ZELEVBQU1sSCxLQUFLRSxjQUFjLFVBQVUsRUFDM0NvSCxNQUFNLEVBRW5CN0UsRUFBQSxFQUFNQyxTQUFTLENBQ1hDLEtBQU0sNkJBQ045QixLQUFNLFFBQVFpQixFQUFNOEUsUUFDcEI1RixFQUFHa0csRUFBTUMsVUFBVTFDLE1BQU04QixLQUN6QnRGLEVBQUdpRyxFQUFNQyxVQUFVMUMsTUFBTStCLElBQ3pCdkgsTUFBT0UsS0FBS29GLEtBQUt0RixNQUNqQkMsT0FBUUMsS0FBS29GLEtBQUtyRixNQUN0QixDQUFDLEVBTVUsSUFBSWtCLEVBQVc4RyxFQUFNQyxTQUFTLEVBQ3RDaEcsS0FBSyxFQUNSaEMsS0FBSzBILFVBQVUxRixLQUFLK0YsRUFBTUssT0FBT3JILGNBQWMscUJBQXFCLENBQUMsRUFDckVmLEtBQUsySCxPQUFPM0YsS0FBSytGLEVBQU1DLFNBQVMsRUFHaENyRixFQUFNOEUsT0FBTyxFQUVqQixFQUVBRCxFQUFLekYsVUFBVUMsS0FBTyxXQUVIbEIsU0FBU0MsY0FBYyxrQkFBMEIsRUFDekR5QixpQkFBaUIsUUFBUyxHQUFPeEMsS0FBSzZILGtCQUFrQnBGLEVBQUd6QyxJQUFJLENBQUMsRUFFdkVBLEtBQUswSCxVQUFZLElBQUlILEVBQ3JCdkgsS0FBSzBILFVBQVVXLFVBQVUsRUFFekJySSxLQUFLMkgsT0FBUyxJQUFJOUgsRUFBT0csS0FBS29GLEtBQUt0RixNQUFPRSxLQUFLb0YsS0FBS3JGLE1BQU0sRUFDMURDLEtBQUsySCxPQUFPN0IsVUFBVSxDQUUxQixHQUVhLElBQUkwQixHQUNaeEYsS0FBSyxDLGdCQ25FSCxTQUFTc0YsRUFBYUcsRUFBUzNILEVBQU9DLEdBQ3pDQyxLQUFLc0ksTUFBUSxDQUNUQyxVQUFXLFlBQ1hDLE9BQVEsU0FDUkMsS0FBTSxPQUNOQyxRQUFTLFVBQ1RDLE9BQVEsUUFDWixFQUVBM0ksS0FBSzRJLFdBQWEsQ0FDZDlJLE1BQU9BLEVBQVEsS0FDZkMsT0FBUUEsRUFBUyxLQUNqQnNILElBQUssR0FDTEQsS0FBTSxFQUNOeUIsZUFBZ0IsRUFDcEIsRUFFQTdJLEtBQUt3SSxPQUFTLENBQ1ZNLElBQUssVUFDTEMsV0FBWSxDQUFDLGNBQWUsU0FBVSx1QkFNdENDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztTQXFCSixFQUVBaEosS0FBS3lJLEtBQU8sQ0FDUkssSUFBSyxVQUNMQyxXQUFZLENBQUMsYUFDYkM7O1NBR0osRUFFQWhKLEtBQUsySSxPQUFTLENBQ1ZHLElBQUssVUFDTEMsV0FBWSxDQUFDLGVBQ2JDOztzQ0FFOEJ2Qjs7c0RBRWdCQTs7O1NBSWxELEVBRUF6SCxLQUFLMEksUUFBVSxDQUNYSSxJQUFLLE1BQ0xDLFdBQVksR0FDWkM7Ozs7Ozs7OztTQVVKLEVBRUFoSixLQUFLdUksVUFBWSxDQUNiTyxJQUFLLE1BQ0xDLFdBQVksQ0FBQyxPQUFRLHFCQUNyQkMsV0FBWSxFQUNoQixDQUVKLENBdURBLFNBQVNDLEVBQWFDLEdBRWxCLE9BQU9DLEtBQUtDLE1BQU1ELEtBQUtFLE9BQU8sRUFBSUgsQ0FBRyxDQUN2QyxDLGtDQWpERjVCLEVBQVl2RixVQUFVdUgsV0FBYSxTQUFVcEQsR0FDekMsSUFBTXFELEVBQU96SSxTQUFTMEksY0FBY3hKLEtBQUtrRyxHQUFRNEMsR0FBRyxFQUlwRCxPQUhBUyxFQUFLL0MsVUFBVUUsSUFBSSxHQUFHMUcsS0FBS2tHLEdBQVE2QyxVQUFVLEVBQzdDUSxFQUFLRSxVQUFZekosS0FBS2tHLEdBQVE4QyxXQUV2Qk8sQ0FDWCxFQVVBakMsRUFBWXZGLFVBQVVDLEtBQU8sV0FDekIsSUFBTWdHLEVBQVloSSxLQUFLc0osV0FBV3RKLEtBQUtzSSxNQUFNQyxTQUFTLEVBQ2hESCxFQUFTcEksS0FBS3NKLFdBQVd0SixLQUFLc0ksTUFBTUUsTUFBTSxFQUMxQzNILEVBQU9iLEtBQUtzSixXQUFXdEosS0FBS3NJLE1BQU1HLElBQUksRUFDdENpQixFQUFTMUosS0FBS3NKLFdBQVd0SixLQUFLc0ksTUFBTUssTUFBTSxFQUMxQ2dCLEVBQVUzSixLQUFLc0osV0FBV3RKLEtBQUtzSSxNQUFNSSxPQUFPLEVBWTVDWCxHQVZOQyxFQUFVMUMsTUFBTXhGLE1BQVFFLEtBQUs0SSxXQUFXOUksTUFDeENrSSxFQUFVMUMsTUFBTXZGLE9BQVNDLEtBQUs0SSxXQUFXN0ksT0FDekNpSSxFQUFVMUMsTUFBTStCLElBQVNySCxLQUFLNEksV0FBV3ZCLElBQU00QixFQUFhakosS0FBSzRJLFdBQVdDLGNBQWMsRUFBcEUsS0FDdEJiLEVBQVUxQyxNQUFNOEIsS0FBVXBILEtBQUs0SSxXQUFXeEIsS0FBTzZCLEVBQWFqSixLQUFLNEksV0FBV0MsY0FBYyxFQUFyRSxLQUV2QmIsRUFBVUUsWUFBWUUsQ0FBTSxFQUM1QkosRUFBVUUsWUFBWXJILENBQUksRUFDMUJtSCxFQUFVRSxZQUFZd0IsQ0FBTSxFQUM1QjFCLEVBQVVFLFlBQVl5QixDQUFPLEVBRWYsQ0FDVjNCLFVBQUFBLEVBQ0FJLE9BQUFBLEVBQ0F2SCxLQUFBQSxFQUNBNkksT0FBQUEsRUFDQUMsUUFBQUEsQ0FDSixHQUdBLE9BQU81QixDQUNYLEMsc0VDM0lPLFNBQVNSLElBUWR2SCxLQUFLYSxLQUFPQyxTQUFTQyxjQUFjLE1BQU0sQ0FFM0MsQ0FXQXdHLEVBQVV4RixVQUFVQyxLQUFPLFNBQVVvRyxHQUVuQyxPQURBQSxFQUFPNUYsaUJBQWlCLFlBQWF4QyxLQUFLNEosZ0JBQWdCLEVBQ25ENUosSUFDVCxFQUVBdUgsRUFBVXhGLFVBQVVzRyxVQUFZLFdBSTlCLE9BSEFySSxLQUFLYSxLQUFLMkIsaUJBQWlCLFVBQVd4QyxLQUFLNkosV0FBVyxFQUV0RDdKLEtBQUthLEtBQUsyQixpQkFBaUIsWUFBYXhDLEtBQUs4SixnQkFBZ0IsRUFDdEQ5SixJQUNULEVBVUF1SCxFQUFVeEYsVUFBVTZILGlCQUFtQixTQUFVbkgsR0FDL0NBLEVBQUVHLGVBQWUsRUFFakIsSUFBTW1ILEVBQXVCLENBQ3pCbEksRUFBR1ksRUFBRXVILE9BQ0xsSSxFQUFHVyxFQUFFd0gsTUFDVCxFQUVNdkksRUFBT2UsRUFBRUssY0FBY0UsY0FBY0EsY0FBY3ZCLFFBQVFDLEtBU2pFLE9BUEEsSUFBTTZCLFNBQVMsQ0FBRUMsS0FBTSxRQUFTOUIsS0FBQUEsQ0FBSyxDQUFDLEVBQ3RDLElBQU02QixTQUFTLENBQ2JDLEtBQU0sMEJBQ045QixLQUFBQSxFQUNBd0IsY0FBZTZHLENBQ2pCLENBQUMsRUFFTS9KLElBQ1QsRUFVQXVILEVBQVV4RixVQUFVK0gsaUJBQW1CLFNBQVVySCxHQUMvQ0EsRUFBRUcsZUFBZSxFQUNqQkgsRUFBRXlCLGdCQUFnQixFQUNsQixJQUNNZ0csRUFBK0IsSUFBTXhHLFNBQVMsRUFEZHlHLGtCQUd0QyxHQUFLRCxFQUFnQkUsUUFBckIsQ0FJQSxJQUFNbEgsRUFBZ0JnSCxFQUFnQmhILGNBR2hDbUgsRUFBWTVILEVBQUVXLE1BQVFGLEVBQWNwQixFQUUxQ2tELElBQUlzRixFQUNDN0gsRUFBRVUsTUFBUUQsRUFBY3JCLEVBRHpCeUksRUFFQ0QsRUFBWSxJQUFhLElBQWFBLEVBSTNDLElBQU05RyxTQUFTLENBQ2JDLEtBQU0sK0JBQ045QixLQVpXd0ksRUFBZ0J4SSxLQWEzQkcsRUFBTXlJLEVBQUgsS0FDSHhJLEVBQU13SSxFQUFILElBRUwsQ0FBQyxDQW5CRCxDQXFCRixFQVNBL0MsRUFBVXhGLFVBQVU4SCxZQUFjLFNBQVVwSCxHQUMxQ0EsRUFBRUcsZUFBZSxFQUNqQkgsRUFBRXlCLGdCQUFnQixFQUVtQixJQUFNUixTQUFTLEVBRGR5RyxrQkFHakJDLFNBSXJCLElBQU03RyxTQUFTLENBQUVDLEtBQU0sdUJBQXdCLENBQUMsQ0FDbEQsQyxnQkMvSEEsU0FBUytHLEVBQUVBLEdBQUcsSUFBSSxJQUFJQyxFQUFFQyxVQUFVcEksT0FBT3FJLEVBQUVDLE1BQVEsRUFBRkgsRUFBSUEsRUFBRSxFQUFFLENBQUMsRUFBRS9ILEVBQUUsRUFBRUEsRUFBRStILEVBQUUvSCxDQUFDLEdBQUdpSSxFQUFFakksRUFBRSxHQUFHZ0ksVUFBVWhJLEdBQWtKLE1BQU1tSSxNQUFNLDhCQUE4QkwsR0FBR0csRUFBRXJJLE9BQU8sSUFBSXFJLEVBQUVHLElBQUksU0FBVU4sR0FBRyxNQUFNLElBQUlBLEVBQUUsR0FBSSxDQUFDLEVBQUVPLEtBQUssR0FBRyxFQUFFLElBQUksa0RBQWtELENBQUMsQ0FBQyxTQUFTTixFQUFFRCxHQUFHLE9BQVFBLEdBQUtBLEVBQUVRLEVBQUUsQ0FBQyxTQUFTTCxFQUFFSCxHQUFHLElBQUlDLEVBQUUsT0FBUUQsS0FBSSxLQUFZLElBQTJGRyxFQUEzRixHQUFnT0gsR0FBek4sVUFBVSxPQUErTUEsRUFBOUosT0FBRyxRQUE5QkMsRUFBRVEsT0FBT0MsZUFBZ0xWLENBQWhLLEtBQTJCRyxFQUFFTSxPQUFPRSxlQUFlQyxLQUFLWCxFQUFFLGFBQWEsR0FBR0EsRUFBRVksZUFBdUJKLFFBQVEsWUFBWSxPQUFPTixHQUFHVyxTQUFTQyxTQUFTSCxLQUFLVCxDQUFDLElBQUlhLEVBQUMsR0FBRyxHQUFHWixNQUFNYSxRQUFRakIsQ0FBQyxHQUFLQSxFQUFFa0IsS0FBTyxPQUFRakIsRUFBRUQsRUFBRWEsY0FBZ0NaLEVBQUVpQixLQUFLQyxFQUFFbkIsQ0FBQyxHQUFHb0IsRUFBRXBCLENBQUMsRUFBRSxDQUEyQyxTQUFTcUIsRUFBRXJCLEVBQUVDLEVBQUVFLEdBQUcsU0FBU0EsSUFBSUEsRUFBRSxJQUFJLElBQUltQixFQUFFdEIsQ0FBQyxHQUFHRyxFQUFFTSxPQUFPYyxLQUFLQyxHQUFJeEIsQ0FBQyxFQUFFakksUUFBUSxTQUFVRyxHQUFHaUksR0FBRyxVQUFVLE9BQU9qSSxHQUFHK0gsRUFBRS9ILEVBQUU4SCxFQUFFOUgsR0FBRzhILENBQUMsQ0FBRSxDQUFDLEVBQUVBLEVBQUVqSSxRQUFRLFNBQVVvSSxFQUFFakksR0FBRyxPQUFPK0gsRUFBRS9ILEVBQUVpSSxFQUFFSCxDQUFDLENBQUUsQ0FBQyxDQUFDLENBQUMsU0FBU3NCLEVBQUV0QixHQUFHLElBQUlDLEVBQUVELEVBQUVRLEdBQUcsT0FBT1AsRUFBTSxFQUFKQSxFQUFFb0IsRUFBSXBCLEVBQUVvQixFQUFFLEVBQUVwQixFQUFFb0IsRUFBRWpCLE1BQU1hLFFBQVFqQixDQUFDLEVBQUUsRUFBRW1CLEVBQUVuQixDQUFDLEVBQUUsRUFBRW9CLEVBQUVwQixDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsU0FBU3lCLEVBQUV6QixFQUFFQyxHQUFHLE9BQU8sSUFBSXFCLEVBQUV0QixDQUFDLEVBQUVBLEVBQUUwQixJQUFJekIsQ0FBQyxFQUFFUSxPQUFPakosVUFBVW1KLGVBQWVDLEtBQUtaLEVBQUVDLENBQUMsQ0FBQyxDQUFDLFNBQVMwQixFQUFFM0IsRUFBRUMsR0FBRyxPQUFPLElBQUlxQixFQUFFdEIsQ0FBQyxFQUFFQSxFQUFFNEIsSUFBSTNCLENBQUMsRUFBRUQsRUFBRUMsRUFBRSxDQUFDLFNBQVM0QixFQUFFN0IsRUFBRUMsRUFBRUUsR0FBRyxJQUFJakksRUFBRW9KLEVBQUV0QixDQUFDLEVBQUUsSUFBSTlILEVBQUU4SCxFQUFFOEIsSUFBSTdCLEVBQUVFLENBQUMsRUFBRSxJQUFJakksRUFBRThILEVBQUU3RCxJQUFJZ0UsQ0FBQyxFQUFFSCxFQUFFQyxHQUFHRSxDQUFDLENBQUMsU0FBUzRCLEVBQUUvQixFQUFFQyxHQUFHLE9BQU9ELElBQUlDLEVBQUUsSUFBSUQsR0FBRyxFQUFFQSxHQUFHLEVBQUVDLEVBQUVELEdBQUdBLEdBQUdDLEdBQUdBLENBQUMsQ0FBQyxTQUFTa0IsRUFBRW5CLEdBQUcsT0FBT2dDLElBQUdoQyxhQUFhaUMsR0FBRyxDQUFDLFNBQVNiLEVBQUVwQixHQUFHLE9BQU9rQyxJQUFHbEMsYUFBYW1DLEdBQUcsQ0FBQyxTQUFTQyxFQUFFcEMsR0FBRyxPQUFPQSxFQUFFc0IsR0FBR3RCLEVBQUVHLENBQUMsQ0FBQyxTQUFTa0MsRUFBRXJDLEdBQUcsR0FBR0ksTUFBTWEsUUFBUWpCLENBQUMsRUFBRSxPQUFPSSxNQUFNNUksVUFBVThLLE1BQU0xQixLQUFLWixDQUFDLEVBQUUsSUFBSUMsRUFBRXNDLEdBQUd2QyxDQUFDLEVBQUUsT0FBT0MsRUFBRU8sR0FBRyxJQUFJLElBQUlMLEVBQUVxQixFQUFHdkIsQ0FBQyxFQUFFL0gsRUFBRSxFQUFFQSxFQUFFaUksRUFBRXJJLE9BQU9JLENBQUMsR0FBRyxDQUFDLElBQUltSixFQUFFbEIsRUFBRWpJLEdBQUdvSixFQUFFckIsRUFBRW9CLEdBQUcsS0FBS0MsRUFBRWtCLFdBQVdsQixFQUFFa0IsU0FBUyxHQUFHbEIsRUFBRW1CLGFBQWEsS0FBS25CLEVBQUVNLEtBQUtOLEVBQUVRLE9BQU83QixFQUFFb0IsR0FBRyxDQUFDb0IsYUFBYSxHQUFHRCxTQUFTLEdBQUdFLFdBQVdwQixFQUFFb0IsV0FBVzlHLE1BQU1vRSxFQUFFcUIsRUFBRSxFQUFFLENBQUMsT0FBT1osT0FBT2tDLE9BQU9sQyxPQUFPQyxlQUFlVixDQUFDLEVBQUVDLENBQUMsQ0FBQyxDQUFDLFNBQVMyQyxFQUFFNUMsRUFBRTlILEdBQUcsT0FBTyxTQUFTQSxJQUFJQSxFQUFFLElBQUlYLEVBQUV5SSxDQUFDLEdBQUdDLEVBQUVELENBQUMsR0FBRyxDQUFDRyxFQUFFSCxDQUFDLElBQVMsRUFBTHNCLEVBQUV0QixDQUFDLElBQU1BLEVBQUU4QixJQUFJOUIsRUFBRTdELElBQUk2RCxFQUFFNkMsTUFBTTdDLEVBQUU4QyxPQUFPQyxHQUFHdEMsT0FBT3VDLE9BQU9oRCxDQUFDLEVBQUU5SCxHQUFHbUosRUFBRXJCLEVBQUUsU0FBVUEsRUFBRUMsR0FBRyxPQUFPMkMsRUFBRTNDLEVBQUUsRUFBRSxDQUFFLEVBQUUsRUFBRSxHQUFHRCxDQUFDLENBQUMsU0FBUytDLElBQUkvQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFNBQVN6SSxFQUFFeUksR0FBRyxPQUFPLE1BQU1BLEdBQUcsVUFBVSxPQUFPQSxHQUFHUyxPQUFPd0MsU0FBU2pELENBQUMsQ0FBQyxDQUFDLFNBQVNrRCxFQUFFakQsR0FBRyxJQUFJRSxFQUFFZ0QsR0FBR2xELEdBQUcsT0FBT0UsR0FBR0gsRUFBRSxHQUFHQyxDQUFDLEVBQUVFLENBQUMsQ0FBQyxTQUFTaUQsRUFBRXBELEVBQUVDLEdBQUdrRCxHQUFHbkQsS0FBS21ELEdBQUduRCxHQUFHQyxFQUFFLENBQW1FLFNBQVNvRCxFQUFFckQsRUFBRUMsR0FBR0EsSUFBSWlELEVBQUUsU0FBUyxFQUFFbEQsRUFBRXlCLEVBQUUsR0FBR3pCLEVBQUVtQixFQUFFLEdBQUduQixFQUFFb0IsRUFBRW5CLEVBQUUsQ0FBQyxTQUFTcUQsRUFBRXRELEdBQUd1RCxFQUFFdkQsQ0FBQyxFQUFFQSxFQUFFb0MsRUFBRXJLLFFBQVF5TCxDQUFDLEVBQUV4RCxFQUFFb0MsRUFBRSxJQUFJLENBQUMsU0FBU21CLEVBQUV2RCxHQUFHQSxJQUFJeUQsSUFBSUEsRUFBRXpELEVBQUVxQyxFQUFFLENBQUMsU0FBU3FCLEVBQUUxRCxHQUFHLE9BQU95RCxFQUFFLENBQUNyQixFQUFFLEdBQUdDLEVBQUVvQixFQUFFVixFQUFFL0MsRUFBRW9ELEVBQUUsR0FBR08sRUFBRSxDQUFDLENBQUMsQ0FBQyxTQUFTSCxFQUFFeEQsR0FBT0MsRUFBRUQsRUFBRVEsR0FBRyxJQUFJUCxFQUFFb0IsR0FBRyxJQUFJcEIsRUFBRW9CLEVBQUVwQixFQUFFb0QsRUFBRSxFQUFFcEQsRUFBRXFELEVBQUUsRUFBRSxDQUFDLFNBQVNNLEVBQUUzRCxFQUFFL0gsR0FBR0EsRUFBRXlMLEVBQUV6TCxFQUFFa0ssRUFBRXRLLE9BQU8sSUFBSXVKLEVBQUVuSixFQUFFa0ssRUFBRSxHQUFHZCxFQUFFLFNBQVNyQixHQUFHQSxJQUFJb0IsRUFBRSxPQUFPbkosRUFBRTZLLEVBQUVRLEdBQUdMLEVBQUUsS0FBSyxFQUFFTSxFQUFFdEwsRUFBRStILEVBQUVxQixDQUFDLEVBQUVBLEdBQUdELEVBQUViLEdBQUdvRCxJQUFJTixFQUFFcEwsQ0FBQyxFQUFFOEgsRUFBRSxDQUFDLEdBQUdHLEVBQUVGLENBQUMsSUFBSUEsRUFBRTRELEVBQUUzTCxFQUFFK0gsQ0FBQyxFQUFFL0gsRUFBRW1LLEdBQUcvSyxFQUFFWSxFQUFFK0gsQ0FBQyxHQUFHL0gsRUFBRXVKLEdBQUd5QixFQUFFLFNBQVMsRUFBRVcsRUFBRXhDLEVBQUViLEdBQUdMLEVBQUVGLEVBQUUvSCxFQUFFdUosRUFBRXZKLEVBQUVpSixDQUFDLEdBQUdsQixFQUFFNEQsRUFBRTNMLEVBQUVtSixFQUFFLEVBQUUsRUFBRWlDLEVBQUVwTCxDQUFDLEVBQUVBLEVBQUV1SixHQUFHdkosRUFBRWtKLEVBQUVsSixFQUFFdUosRUFBRXZKLEVBQUVpSixDQUFDLEVBQUVsQixJQUFJNkQsR0FBRTdELEVBQUUsTUFBTSxDQUFDLFNBQVM0RCxFQUFFN0QsRUFBRUMsRUFBRUUsR0FBRyxJQUFxQmpJLEVBQW9Kb0osRUFBa0NHLEVBQUlFLEVBQS9NLE9BQUdwSyxFQUFFMEksQ0FBQyxFQUFTQSxHQUFNL0gsRUFBRStILEVBQUVPLElBQW9FdEksRUFBRTZMLElBQUkvRCxFQUFTQyxFQUFNL0gsRUFBRTBMLEdBQTZCMUwsRUFBRThMLElBQUc5TCxFQUFFOEwsRUFBRSxHQUFHOUwsRUFBRTZMLEVBQUVKLENBQUMsR0FBeUNsQyxFQUFsQ0gsRUFBRSxJQUFJcEosRUFBRW1KLEdBQUcsSUFBSW5KLEVBQUVtSixFQUFFbkosRUFBRW9KLEVBQUVlLEVBQUVuSyxFQUFFK0wsQ0FBQyxFQUFFL0wsRUFBRW9KLEVBQU1LLEVBQUUsR0FBRyxJQUFJekosRUFBRW1KLElBQUlJLEVBQUUsSUFBSVUsSUFBSWIsQ0FBQyxFQUFFQSxFQUFFdUIsTUFBTSxFQUFFbEIsRUFBRSxJQUFJTixFQUFFSSxFQUFFLFNBQVV4QixFQUFFb0IsR0FBRyxPQUFPMEMsRUFBRS9ELEVBQUU5SCxFQUFFb0osRUFBRXJCLEVBQUVvQixFQUFFbEIsRUFBRXdCLENBQUMsQ0FBRSxDQUFDLEVBQUVySyxFQUFFMEksRUFBRXNCLEVBQUUsRUFBRSxFQUFFbkIsR0FBR0gsRUFBRXlCLEdBQUd5QixFQUFFLFNBQVMsRUFBRWdCLEVBQUVoTSxFQUFFaUksRUFBRUgsRUFBRXlCLEVBQUV6QixFQUFFbUIsQ0FBQyxHQUFTakosRUFBRW9KLElBQW5PaEssRUFBRTBJLEVBQUU5SCxFQUFFaUksRUFBRSxFQUFFLEVBQUVqSSxFQUFFaUksSUFBbEdrQixFQUFFcEIsRUFBRSxTQUFVb0IsRUFBRUMsR0FBRyxPQUFPeUMsRUFBRS9ELEVBQUU5SCxFQUFFK0gsRUFBRW9CLEVBQUVDLEVBQUVuQixDQUFDLENBQUUsRUFBRSxFQUFFLEVBQUVGLEVBQXlRLENBQUMsU0FBUzhELEVBQUU3TCxFQUFFbUosRUFBRUMsRUFBRUssRUFBRUksRUFBRVosRUFBRUMsR0FBRyxHQUFvRG5CLEVBQUU4QixDQUFDLEVBQUUsQ0FBS0ssRUFBRXlCLEVBQUUzTCxFQUFFNkosRUFBRVosR0FBR0UsR0FBRyxJQUFJQSxFQUFFQSxHQUFHLENBQUNJLEVBQUVKLEVBQUU4QyxFQUFFeEMsQ0FBQyxFQUFFUixFQUFFaUQsT0FBT3pDLENBQUMsRUFBRSxNQUFNLEVBQUUsR0FBR0UsRUFBRVAsRUFBRUssRUFBRVMsQ0FBQyxFQUFFLENBQUNuQyxFQUFFbUMsQ0FBQyxFQUFFLE9BQU9sSyxFQUFFa0wsRUFBRSxFQUFFLE1BQU1oQyxHQUFHRSxFQUFFbkYsSUFBSTRGLENBQUMsRUFBSzVCLENBQUFBLEVBQUU0QixDQUFDLEdBQUl4SyxFQUFFd0ssQ0FBQyxHQUFNLENBQUM3SixFQUFFNkssRUFBRXNCLEdBQUduTSxFQUFFeUwsRUFBRSxJQUFTRSxFQUFFM0wsRUFBRTZKLENBQUMsRUFBRVYsR0FBR0EsRUFBRTBDLEVBQUUxQixJQUFHL0ssRUFBRVksRUFBRTZKLENBQUMsQ0FBRSxDQUFDLFNBQVN6SyxFQUFFMEksRUFBRUMsRUFBRUUsR0FBRyxTQUFTQSxJQUFJQSxFQUFFLElBQUksQ0FBQ0gsRUFBRXFDLEdBQUdyQyxFQUFFK0MsRUFBRXNCLEdBQUdyRSxFQUFFb0QsR0FBR1IsRUFBRTNDLEVBQUVFLENBQUMsQ0FBQyxDQUFDLFNBQVNtRSxFQUFFdEUsRUFBRUMsR0FBRyxJQUFJRSxFQUFFSCxFQUFFUSxHQUFHLE9BQU9MLEVBQUVpQyxFQUFFakMsQ0FBQyxFQUFFSCxHQUFHQyxFQUFFLENBQUMsU0FBUytELEVBQUVoRSxFQUFFQyxHQUFHLEdBQUdBLEtBQUtELEVBQUUsSUFBSSxJQUFJRyxFQUFFTSxPQUFPQyxlQUFlVixDQUFDLEVBQUVHLEdBQUcsQ0FBQyxJQUFJakksRUFBRXVJLE9BQU84RCx5QkFBeUJwRSxFQUFFRixDQUFDLEVBQUUsR0FBRy9ILEVBQUUsT0FBT0EsRUFBRWlJLEVBQUVNLE9BQU9DLGVBQWVQLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUzhELEVBQUVqRSxHQUFHQSxFQUFFNEQsSUFBSTVELEVBQUU0RCxFQUFFLEdBQUc1RCxFQUFFcUMsR0FBRzRCLEVBQUVqRSxFQUFFcUMsQ0FBQyxFQUFFLENBQUMsU0FBU21DLEVBQUV4RSxHQUFHQSxFQUFFc0IsSUFBSXRCLEVBQUVzQixFQUFFZSxFQUFFckMsRUFBRUcsQ0FBQyxFQUFFLENBQUMsU0FBUytELEVBQUVsRSxFQUFFQyxFQUFFRSxHQUFHLElBQXFFRixFQUF1R3FCLEVBQXhLcEosRUFBRWlKLEVBQUVsQixDQUFDLEVBQUVpRCxFQUFFLFFBQVEsRUFBRXVCLEVBQUV4RSxFQUFFRSxDQUFDLEVBQUVpQixFQUFFbkIsQ0FBQyxFQUFFaUQsRUFBRSxRQUFRLEVBQUV3QixFQUFFekUsRUFBRUUsQ0FBQyxFQUFFSCxFQUFFdUQsR0FBV3ZELEVBQW9NQyxFQUFsTUEsRUFBb01FLEVBQTdMQSxFQUFFQyxNQUFNYSxRQUFRakIsQ0FBQyxFQUFFOUgsRUFBRSxDQUFDbUosRUFBRWxCLEVBQUUsRUFBRSxFQUFFNEQsRUFBRTlELEVBQUVBLEVBQUU4RCxFQUFuaEROLEVBQXloREcsRUFBRSxHQUFHSSxFQUFFLEdBQUdHLEVBQUUsR0FBRzlCLEVBQUVwQyxFQUFFRSxFQUFFSCxFQUFFaUUsRUFBRSxLQUFLM0MsRUFBRSxLQUFLK0IsRUFBRSxLQUFLc0IsRUFBRSxFQUFFLEVBQUV0RCxFQUFFbkosRUFBRW9KLEVBQUVzRCxFQUFHekUsSUFBSWtCLEVBQUUsQ0FBQ25KLEdBQUdvSixFQUFFdUQsR0FBUXBELEVBQUVxRCxNQUFNQyxVQUFVMUQsRUFBRUMsQ0FBQyxFQUFFSyxFQUFFRixFQUFFdUQsT0FBT25ELEVBQUVKLEVBQUV3RCxNQUFhL00sRUFBRStMLEVBQUVwQyxFQUFFM0osRUFBRW1MLEVBQUUxQixFQUFFRSxHQUFRcUIsRUFBRSxLQUFLLEVBQUVnQyxFQUFFakYsRUFBRUUsQ0FBQyxFQUFFLE9BQU9BLEVBQUVBLEVBQUU0RCxFQUExc0ROLEdBQWl0RHJCLEVBQUUrQyxLQUFLak4sQ0FBQyxFQUFFQSxDQUFDLENBQWdRLFNBQVNtTSxFQUFFckUsRUFBRUMsR0FBRyxPQUFPQSxHQUFHLEtBQUssRUFBRSxPQUFPLElBQUlnQyxJQUFJakMsQ0FBQyxFQUFFLEtBQUssRUFBRSxPQUFPSSxNQUFNZ0YsS0FBS3BGLENBQUMsQ0FBQyxDQUFDLE9BQU9xQyxFQUFFckMsQ0FBQyxDQUFDLENBQUMsU0FBU3lFLElBQUksU0FBU3RFLEVBQUVILEVBQUVDLEdBQUcsSUFBSUUsRUFBRWdCLEVBQUVuQixHQUFHLE9BQU9HLEVBQUVBLEVBQUV1QyxXQUFXekMsRUFBRWtCLEVBQUVuQixHQUFHRyxFQUFFLENBQUNzQyxhQUFhLEdBQUdDLFdBQVd6QyxFQUFFMkIsSUFBSSxXQUFXLElBQUkzQixFQUFFeEssS0FBSytLLEdBQUcsT0FBZ0RvRSxFQUFHaEQsSUFBSTNCLEVBQUVELENBQUMsQ0FBQyxFQUFFOEIsSUFBSSxTQUFTN0IsR0FBRyxJQUFJRSxFQUFFMUssS0FBSytLLEdBQTZDb0UsRUFBRzlDLElBQUkzQixFQUFFSCxFQUFFQyxDQUFDLENBQUMsQ0FBQyxFQUFFRSxDQUFDLENBQUMsU0FBU2pJLEVBQUU4SCxHQUFHLElBQUksSUFBSUMsRUFBRUQsRUFBRWxJLE9BQU8sRUFBSyxHQUFIbUksRUFBS0EsQ0FBQyxHQUFHLENBQUMsSUFBSUUsRUFBRUgsRUFBRUMsR0FBR08sR0FBRyxHQUFHLENBQUNMLEVBQUV5RCxFQUFFLE9BQU96RCxFQUFFa0IsR0FBRyxLQUFLLEVBQUVNLEVBQUV4QixDQUFDLEdBQUc4RCxFQUFFOUQsQ0FBQyxFQUFFLE1BQU0sS0FBSyxFQUFFbUIsRUFBRW5CLENBQUMsR0FBRzhELEVBQUU5RCxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBU21CLEVBQUV0QixHQUFHLElBQUksSUFBSUMsRUFBRUQsRUFBRUcsRUFBRUEsRUFBRUgsRUFBRWlFLEVBQUUvTCxFQUFFc0osRUFBR3JCLENBQUMsRUFBRWtCLEVBQUVuSixFQUFFSixPQUFPLEVBQUssR0FBSHVKLEVBQUtBLENBQUMsR0FBRyxDQUFDLElBQUlDLEVBQUVwSixFQUFFbUosR0FBRyxHQUFHQyxJQUFJZCxFQUFFLENBQUMsSUFBSW1CLEVBQUUxQixFQUFFcUIsR0FBRyxHQUFHLFNBQVNLLEdBQUcsQ0FBQ0YsRUFBRXhCLEVBQUVxQixDQUFDLEVBQUUsTUFBTSxHQUFHLElBQUlPLEVBQUUxQixFQUFFbUIsR0FBR0gsRUFBRVUsR0FBR0EsRUFBRXJCLEdBQUcsR0FBR1csRUFBRUEsRUFBRWhCLElBQUl3QixFQUFFLENBQUNJLEVBQUVGLEVBQUVGLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFLUCxFQUFFLENBQUMsQ0FBQ25CLEVBQUVPLEdBQUcsT0FBT3RJLEVBQUVKLFNBQVMwSixFQUFHdkIsQ0FBQyxFQUFFbkksUUFBUXNKLEVBQUUsRUFBRSxFQUFFLENBQUMsU0FBU08sRUFBRTNCLEdBQUcsSUFBSUMsRUFBRUQsRUFBRWlFLEVBQUUsR0FBR2hFLEVBQUVuSSxTQUFTa0ksRUFBRUcsRUFBRXJJLE9BQU8sTUFBTSxHQUFPcUksRUFBRU0sT0FBTzhELHlCQUF5QnRFLEVBQUVBLEVBQUVuSSxPQUFPLENBQUMsRUFBRSxHQUFHcUksR0FBRyxDQUFDQSxFQUFFeUIsSUFBSSxNQUFNLEdBQUcsSUFBSSxJQUFJMUosRUFBRSxFQUFFQSxFQUFFK0gsRUFBRW5JLE9BQU9JLENBQUMsR0FBRyxHQUFHLENBQUMrSCxFQUFFVSxlQUFlekksQ0FBQyxFQUFFLE1BQU0sR0FBRyxNQUFNLEVBQUUsQ0FBOEMsSUFBSWlKLEVBQUUsR0FBR2lDLEVBQUUsTUFBTSxDQUFDOEIsRUFBRSxTQUFTbEYsRUFBRUMsR0FBRyxJQUFJL0gsRUFBRWtJLE1BQU1hLFFBQVFqQixDQUFDLEVBQUVxQixHQUFFLENBQVNyQixFQUFFQyxLQUFHLEdBQUdELEVBQUUsQ0FBQyxJQUFJLElBQUk5SCxFQUFFa0ksTUFBTUgsRUFBRW5JLE1BQU0sRUFBRXVKLEVBQUUsRUFBRUEsRUFBRXBCLEVBQUVuSSxPQUFPdUosQ0FBQyxHQUFHWixPQUFPNEUsZUFBZW5OLEVBQUUsR0FBR21KLEVBQUVsQixFQUFFa0IsRUFBRSxFQUFFLENBQUMsRUFBRSxPQUFPbkosQ0FBQyxDQUFDLElBQUlvSixFQUFFaUIsR0FBR3RDLENBQUMsRUFBRSxPQUFPcUIsRUFBRWQsR0FBRyxJQUFJLElBQUlpQixFQUFFRCxFQUFHRixDQUFDLEVBQUVLLEVBQUUsRUFBRUEsRUFBRUYsRUFBRTNKLE9BQU82SixDQUFDLEdBQUcsQ0FBQyxJQUFJRSxFQUFFSixFQUFFRSxHQUFHTCxFQUFFTyxHQUFHMUIsRUFBRTBCLEVBQUU3QixHQUFHLENBQUMsQ0FBQ3NCLEVBQUVPLEdBQUdhLFVBQVUsQ0FBQyxDQUFDLE9BQU9qQyxPQUFPa0MsT0FBT2xDLE9BQU9DLGVBQWVULENBQUMsRUFBRXFCLENBQUMsQ0FBQyxHQUFFcEosRUFBRThILENBQUMsRUFBRXNCLEVBQUUsQ0FBQ0QsRUFBRW5KLEVBQUUsRUFBRSxFQUFFNkwsRUFBRTlELEVBQUVBLEVBQUU4RCxFQUFud0dOLEVBQXl3R0csRUFBRSxHQUFHSSxFQUFFLEdBQUdHLEVBQUUsR0FBRzlCLEVBQUVwQyxFQUFFRSxFQUFFSCxFQUFFaUUsRUFBRTVDLEVBQUVDLEVBQUUsS0FBS2dDLEVBQUUsR0FBR3FCLEVBQUUsRUFBRSxFQUFFLE9BQU9sRSxPQUFPNEUsZUFBZWhFLEVBQUViLEVBQUUsQ0FBQzVFLE1BQU0wRixFQUFFa0IsU0FBUyxFQUFFLENBQUMsRUFBRW5CLENBQUMsRUFBRW1DLEVBQUUsU0FBU3hELEVBQUVHLEVBQUVtQixHQUFHQSxFQUFFckIsRUFBRUUsQ0FBQyxHQUFHQSxFQUFFSyxHQUFHdUQsSUFBSS9ELEdBQUc5SCxFQUFFOEgsRUFBRW9DLENBQUMsR0FBR3BDLEVBQUV5QixHQUFHLFNBQVN6QixFQUFFQyxHQUFHLEdBQUdBLEdBQUcsVUFBVSxPQUFPQSxFQUFFLENBQUMsSUFBSUUsRUFBRUYsRUFBRU8sR0FBRyxHQUFHTCxFQUFFLENBQUMsSUFBSWpJLEVBQUVpSSxFQUFFQSxFQUFFbUIsRUFBRW5CLEVBQUU4RCxFQUFFcEMsRUFBRTFCLEVBQUVnRSxFQUFFcEMsRUFBRTVCLEVBQUVrQixFQUFFLEdBQUcsSUFBSVUsRUFBRVYsRUFBRUMsRUFBRSxTQUFVckIsR0FBR0EsSUFBSU8sSUFBSSxTQUFTdEksRUFBRStILElBQUl3QixFQUFFdkosRUFBRStILENBQUMsRUFBRTRCLEVBQUU1QixJQUFJRCxFQUFFc0IsRUFBRXJCLEVBQUUsR0FBRzRCLEVBQUU1QixHQUFHLEdBQUdnRSxFQUFFOUQsQ0FBQyxHQUFJLENBQUMsRUFBRWtCLEVBQUVuSixFQUFFLFNBQVU4SCxHQUFHLFNBQVNzQixFQUFFdEIsSUFBSXlCLEVBQUVILEVBQUV0QixDQUFDLElBQUk2QixFQUFFN0IsR0FBRyxHQUFHaUUsRUFBRTlELENBQUMsRUFBRyxDQUFDLE9BQU8sR0FBRyxJQUFJNEIsRUFBRSxDQUFDLEdBQUdKLEVBQUV4QixDQUFDLElBQUk4RCxFQUFFOUQsQ0FBQyxFQUFFMEIsRUFBRS9KLE9BQU8sSUFBSXdKLEVBQUV4SixPQUFPSSxFQUFFSixPQUFPLElBQUksSUFBSXFKLEVBQUVHLEVBQUV4SixPQUFPcUosRUFBRWpKLEVBQUVKLE9BQU9xSixDQUFDLEdBQUdVLEVBQUVWLEdBQUcsUUFBUSxJQUFJLElBQUlDLEVBQUVsSixFQUFFSixPQUFPc0osRUFBRUUsRUFBRXhKLE9BQU9zSixDQUFDLEdBQUdTLEVBQUVULEdBQUcsR0FBRyxJQUFJLElBQUlnQixFQUFFeEQsS0FBSzBHLElBQUloRSxFQUFFeEosT0FBT0ksRUFBRUosTUFBTSxFQUFFdUssRUFBRSxFQUFFQSxFQUFFRCxFQUFFQyxDQUFDLEdBQUdmLEVBQUVYLGVBQWUwQixDQUFDLElBQUlSLEVBQUVRLEdBQUcsSUFBSSxTQUFTUixFQUFFUSxJQUFJckMsRUFBRXNCLEVBQUVlLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFckMsRUFBRW9DLEVBQUUsRUFBRSxFQUFFbEssRUFBRThILEVBQUVvQyxDQUFDLEVBQUUsRUFBRW1ELEVBQUUsU0FBU3ZGLEdBQUcsT0FBTyxJQUFJQSxFQUFFcUIsRUFBRUMsRUFBS0ssR0FBSDNCLENBQUMsQ0FBTSxDQUFDLENBQUMsQ0FBQyxDLGFDZ0I5a00sV0FFSCxPQURBLElBQU0sQ0FFVixFLFdEbkIrNVcsSUFBTXlELEVBQUUrQixFQUFFLGFBQWEsT0FBT0MsUUFBUSxVQUFVLE9BQU9BLE9BQU8sR0FBRyxFQUFFekQsR0FBRSxhQUFhLE9BQU9DLElBQUlDLEdBQUUsYUFBYSxPQUFPQyxJQUFJdUQsR0FBRSxhQUFhLE9BQU9aLE9BQU8sU0FBU0EsTUFBTUMsV0FBVyxhQUFhLE9BQU9ZLFFBQVE3QixHQUFFMEIsRUFBRUMsT0FBT0csSUFBSSxlQUFlLElBQUlDLEVBQUUsSUFBSSxpQkFBaUIsR0FBR0EsR0FBRzNFLEdBQUVzRSxFQUFFQyxPQUFPRyxJQUFJLGlCQUFpQixFQUFFLHFCQUFxQnBGLEVBQUVnRixFQUFFQyxPQUFPRyxJQUFJLGFBQWEsRUFBRSxpQkFBeTJENUUsR0FBRSxHQUFHUCxPQUFPakosVUFBVXFKLFlBQVlXLEVBQUcsYUFBYSxPQUFPbUUsU0FBU0EsUUFBUUcsUUFBUUgsUUFBUUcsUUFBUSxTQUFTckYsT0FBT3NGLHNCQUFzQixTQUFTL0YsR0FBRyxPQUFPUyxPQUFPdUYsb0JBQW9CaEcsQ0FBQyxFQUFFb0UsT0FBTzNELE9BQU9zRixzQkFBc0IvRixDQUFDLENBQUMsQ0FBQyxFQUFFUyxPQUFPdUYsb0JBQW9CekQsR0FBRzlCLE9BQU93RiwyQkFBMkIsU0FBU2pHLEdBQUcsSUFBSUMsRUFBRSxHQUFHLE9BQU91QixFQUFHeEIsQ0FBQyxFQUFFakksUUFBUSxTQUFVb0ksR0FBR0YsRUFBRUUsR0FBR00sT0FBTzhELHlCQUF5QnZFLEVBQUVHLENBQUMsQ0FBRSxDQUFDLEVBQUVGLENBQUMsRUFBRWtELEdBQUcsR0FBR3lCLEVBQUcsQ0FBQ2hELElBQUksU0FBUzVCLEVBQUVDLEdBQUcsSUFBc0IvSCxFQUF3Sm1KLEVBQTlLLE9BQUdwQixJQUFJTyxFQUFTUixFQUFpQnlCLEVBQVh2SixFQUFFa0ssRUFBRXBDLENBQUMsRUFBVUMsQ0FBQyxHQUF3SW9CLEVBQUVuSixFQUFFK0gsR0FBVUQsQ0FBQUEsRUFBRWdFLEdBQUk3RCxFQUFFa0IsQ0FBQyxHQUFJQSxJQUFJaUQsRUFBRXRFLEVBQUVHLEVBQUVGLENBQUMsR0FBR3VFLEVBQUV4RSxDQUFDLEVBQUVBLEVBQUVzQixFQUFFckIsR0FBR2lFLEVBQUVsRSxFQUFFK0QsRUFBRWhCLEVBQUUxQixFQUFFckIsQ0FBQyxHQUFHcUIsSUFBekxyQixFQUEyR0EsR0FBOUZxQixFQUFFMkMsRUFBOEY5TCxFQUFFK0gsQ0FBM0YsR0FBVyxVQUFVb0IsRUFBRUEsRUFBRXpGLE1BQU0sT0FBUTFELEVBQUVtSixFQUFFTyxLQUFpQixPQUFPMUosRUFBRTBJLEtBQUtaLEVBQUVpRSxDQUFDLEVBQUUsT0FBdUYsRUFBRXZDLElBQUksU0FBUzFCLEVBQUVDLEdBQUcsT0FBT0EsS0FBS21DLEVBQUVwQyxDQUFDLENBQUMsRUFBRThGLFFBQVEsU0FBUzlGLEdBQUcsT0FBTzJGLFFBQVFHLFFBQVExRCxFQUFFcEMsQ0FBQyxDQUFDLENBQUMsRUFBRThCLElBQUksU0FBUzlCLEVBQUVDLEVBQUVFLEdBQUcsSUFBSWpJLEVBQUU4TCxFQUFFNUIsRUFBRXBDLENBQUMsRUFBRUMsQ0FBQyxFQUFFLEdBQUcsTUFBTS9ILEdBQVNBLEVBQUU0SixJQUFXNUosRUFBRTRKLElBQUlsQixLQUFLWixFQUFFaUUsRUFBRTlELENBQUMsTUFBL0MsQ0FBb0QsR0FBRyxDQUFDSCxFQUFFNEQsRUFBRSxDQUFDLElBQUl2QyxFQUFFaUQsRUFBRWxDLEVBQUVwQyxDQUFDLEVBQUVDLENBQUMsRUFBRXFCLEVBQUUsTUFBTUQsRUFBRSxPQUFPQSxFQUFFYixHQUFHLEdBQUdjLEdBQUdBLEVBQUVuQixJQUFJQSxFQUFFLE9BQU9ILEVBQUVzQixFQUFFckIsR0FBR0UsRUFBWSxFQUFWSCxFQUFFbUUsRUFBRWxFLEdBQUcsSUFBTSxHQUFHOEIsRUFBRTVCLEVBQUVrQixDQUFDLElBQUksU0FBU2xCLEdBQUdzQixFQUFFekIsRUFBRUcsRUFBRUYsQ0FBQyxHQUFHLE1BQU0sR0FBR3VFLEVBQUV4RSxDQUFDLEVBQUVpRSxFQUFFakUsQ0FBQyxDQUFDLENBQVFBLEVBQUVzQixFQUFFckIsS0FBS0UsSUFBSSxTQUFTQSxHQUFHRixLQUFLRCxFQUFFc0IsSUFBSWxMLE9BQU84UCxNQUFNL0YsQ0FBQyxHQUFHL0osT0FBTzhQLE1BQU1sRyxFQUFFc0IsRUFBRXJCLEVBQUUsSUFBSUQsRUFBRXNCLEVBQUVyQixHQUFHRSxFQUFFSCxFQUFFbUUsRUFBRWxFLEdBQUcsR0FBblAsQ0FBZ0osTUFBdUcsRUFBRSxFQUFFa0csZUFBZSxTQUFTbkcsRUFBRUMsR0FBRyxPQUFPLFNBQVNxRSxFQUFFdEUsRUFBRUcsRUFBRUYsQ0FBQyxHQUFHQSxLQUFLRCxFQUFFRyxHQUFHSCxFQUFFbUUsRUFBRWxFLEdBQUcsR0FBR3VFLEVBQUV4RSxDQUFDLEVBQUVpRSxFQUFFakUsQ0FBQyxHQUFHLE9BQU9BLEVBQUVtRSxFQUFFbEUsR0FBR0QsRUFBRXNCLEdBQUcsT0FBT3RCLEVBQUVzQixFQUFFckIsR0FBRyxFQUFFLEVBQUVzRSx5QkFBeUIsU0FBU3ZFLEVBQUVDLEdBQUcsSUFBSUUsRUFBRWlDLEVBQUVwQyxDQUFDLEVBQUU5SCxFQUFFeU4sUUFBUXBCLHlCQUF5QnBFLEVBQUVGLENBQUMsRUFBRSxPQUFPL0gsR0FBRSxDQUFDc0ssU0FBUyxHQUFHQyxhQUFhLElBQUl6QyxFQUFFcUIsR0FBRyxXQUFXcEIsRUFBRXlDLFdBQVd4SyxFQUFFd0ssV0FBVzlHLE1BQU11RSxFQUFFRixFQUFFLENBQUcsRUFBRW9GLGVBQWUsV0FBV3JGLEVBQUUsRUFBRSxDQUFDLEVBQUVVLGVBQWUsU0FBU1YsR0FBRyxPQUFPUyxPQUFPQyxlQUFlVixFQUFFRyxDQUFDLENBQUMsRUFBRWlHLGVBQWUsV0FBV3BHLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRTZFLEVBQUcsR0FBR3hELEVBQUV1RCxFQUFHLFNBQVU1RSxFQUFFQyxHQUFHNEUsRUFBRzdFLEdBQUcsV0FBVyxPQUFPRSxVQUFVLEdBQUdBLFVBQVUsR0FBRyxHQUFHRCxFQUFFb0csTUFBTTVRLEtBQUt5SyxTQUFTLENBQUMsQ0FBRSxDQUFDLEVBQUUyRSxFQUFHc0IsZUFBZSxTQUFTbEcsRUFBRUUsR0FBRyxPQUFxRTBFLEVBQUcvQyxJQUFJbEIsS0FBS25MLEtBQUt3SyxFQUFFRSxFQUFFLE1BQU0sQ0FBQyxFQUFFMEUsRUFBRy9DLElBQUksU0FBUzdCLEVBQUVFLEVBQUVqSSxHQUFHLE9BQW1GME0sRUFBRzlDLElBQUlsQixLQUFLbkwsS0FBS3dLLEVBQUUsR0FBR0UsRUFBRWpJLEVBQUUrSCxFQUFFLEVBQUUsQ0FBQyxHQUFnMkNvQixFQUFFbkosR0FBRVYsV0FBbUI4TyxZQUFZLFNBQVNwTyxHQUFHaUksRUFBRWpJLENBQUMsR0FBRzhILEVBQUUsQ0FBQyxFQUFFQyxFQUFFL0gsQ0FBQyxJQUFsL1orSCxFQUFWL0gsRUFBb2dhQSxDQUF2L1osR0FBRzhILEVBQUUsR0FBRzlILENBQUMsRUFBMCtaQSxFQUF4K1osU0FBUzhILEVBQUVDLEdBQUcsR0FBRyxDQUFDRSxFQUFFRixDQUFDLEVBQUUsT0FBT0EsRUFBRSxJQUFJL0gsRUFBRXVKLEVBQUV4QixFQUFFTyxHQUFHdUIsRUFBRVQsRUFBRXJCLENBQUMsRUFBRSxHQUFHd0IsRUFBRSxDQUFDLEdBQUcsQ0FBQ0EsRUFBRW1DLElBQUluQyxFQUFFSixFQUFFLEdBQUcsQ0FBQzZCLEVBQUUsS0FBSyxFQUFFcUMsRUFBRTlELENBQUMsR0FBRyxPQUFPQSxFQUFFdEIsRUFBRXNCLEVBQUV1QyxFQUFFLEdBQUc5TCxFQUFFbU0sRUFBRXBFLEVBQUU4QixDQUFDLEVBQUVOLEVBQUV1QyxFQUFFLEVBQUUsTUFBTTlMLEVBQUVtTSxFQUFFcEUsRUFBRThCLENBQUMsRUFBRSxPQUFPVixFQUFFbkosRUFBRSxTQUFVK0gsRUFBRUUsR0FBR3NCLEdBQUdFLEVBQUVGLEVBQUV0QixFQUFFRixDQUFDLElBQUlFLEdBQUcwQixFQUFFM0osRUFBRStILEVBQUVELEVBQUVHLENBQUMsQ0FBQyxDQUFFLENBQUMsRUFBRSxJQUFJNEIsRUFBRSxJQUFJSSxJQUFJakssQ0FBQyxFQUFFQSxDQUFDLEVBQUVBLENBQUMsR0FBN1AsSUFBdWhhbUosRUFBRXFDLEVBQUVqTyxJQUFJLEVBQUU2TCxFQUFFNEMsRUFBRXpPLEtBQUt5QyxFQUFFLE1BQU0sRUFBRSxPQUFPb0osRUFBRWQsR0FBR21FLEVBQUUsR0FBR3BCLEVBQUVsQyxDQUFDLEVBQUVDLENBQUMsRUFBRUQsRUFBRWtGLFlBQVksU0FBU3RHLEVBQUVFLEdBQW9Ga0IsR0FBM0VwQixHQUFHQSxFQUFFTyxJQUEwRXVELEVBQUUsT0FBT1YsRUFBRWhDLEVBQUVsQixDQUFDLEVBQUV5RCxFQUFFLE9BQU92QyxDQUFDLENBQUMsRUFBRUEsRUFBRW1GLGNBQWMsU0FBU3hHLEdBQUd2SyxLQUFLNE8sRUFBRXJFLENBQUMsRUFBRXFCLEVBQUVvRixjQUFjLFNBQVN4RyxHQUFHQSxHQUFHLENBQUN5RixJQUFHMUYsRUFBRSxFQUFFLEVBQUV2SyxLQUFLOE4sRUFBRXRELENBQUMsRUFBRW9CLEVBQUVxRixhQUFhLFNBQVMxRyxFQUFFRyxHQUFTLElBQU4sSUFBVWpJLEVBQUVpSSxFQUFFckksT0FBTyxFQUFLLEdBQUhJLEVBQUtBLENBQUMsR0FBRyxDQUFDLElBQUltSixFQUFFbEIsRUFBRWpJLEdBQUcsR0FBRyxJQUFJbUosRUFBRXNGLEtBQUs3TyxRQUFRLFlBQVl1SixFQUFFdUYsR0FBRyxDQUFDNUcsRUFBRXFCLEVBQUV6RixNQUFNLEtBQUssQ0FBQyxDQUFHLENBQUMsRUFBSDFELElBQU9pSSxFQUFFQSxFQUFFbUMsTUFBTXBLLEVBQUUsQ0FBQyxHQUFHLElBQUlvSixFQUFFNEIsRUFBRSxTQUFTLEVBQUUyRCxFQUFFLE9BQU81RyxFQUFFRCxDQUFDLEVBQUVzQixFQUFFdEIsRUFBRUcsQ0FBQyxFQUFFMUssS0FBS3FSLFFBQVE5RyxFQUFFLFNBQVVBLEdBQUcsT0FBT3NCLEVBQUV0QixFQUFFRyxDQUFDLENBQUUsQ0FBQyxDQUFDLEVBQTUrTCxJQUFxNUtrQixFQUE4bEIwRixFQUFHLElBQVI3TyxHQUFrQjZPLEVBQUdELFFBQVdDLEVBQUdDLG1CQUFtQkMsS0FBS0YsQ0FBRSxFQUFLQSxFQUFHUCxjQUFjUyxLQUFLRixDQUFFLEVBQUtBLEVBQUdOLGNBQWNRLEtBQUtGLENBQUUsRUFBS0EsRUFBR0wsYUFBYU8sS0FBS0YsQ0FBRSxFQUFLQSxFQUFHVCxZQUFZVyxLQUFLRixDQUFFLEVBQUtBLEVBQUdSLFlBQVlVLEtBQUtGLENBQUUsRUFBOW1FLFNBQVM3TyxHQUFFK0gsR0FBRyxJQUFJL0gsRUFBRXpDLEtBQUtBLEtBQUs4TixFQUFFbUMsR0FBRWpRLEtBQUs0TyxFQUFFLEdBQUc1TyxLQUFLcVIsUUFBUSxTQUFTN0csRUFBRW9CLEVBQUVDLEdBQUcsSUFBbURHLEVBQVlFLEVBQTBORSxFQUF6UixHQUFHLFlBQVksT0FBTzVCLEdBQUcsWUFBWSxPQUFPb0IsRUFBdUIsT0FBaEJJLEVBQUVKLEVBQUVBLEVBQUVwQixFQUFNMEIsRUFBRXpKLEVBQVMsU0FBUzhILEdBQUcsSUFBSUMsRUFBRXhLLEtBQUssU0FBU3VLLElBQUlBLEVBQUV5QixHQUFHLElBQUksSUFBSXRCLEVBQUVELFVBQVVwSSxPQUFPSSxFQUFFa0ksTUFBUSxFQUFGRCxFQUFJQSxFQUFFLEVBQUUsQ0FBQyxFQUFFbUIsRUFBRSxFQUFFQSxFQUFFbkIsRUFBRW1CLENBQUMsR0FBR3BKLEVBQUVvSixFQUFFLEdBQUdwQixVQUFVb0IsR0FBRyxPQUFPSyxFQUFFbUYsUUFBUTlHLEVBQUUsU0FBVUEsR0FBUyxPQUFTcUIsRUFBR1QsS0FBS3lGLE1BQVJoRixFQUFnQixDQUFDcEIsRUFBRUQsR0FBR29FLE9BQU9sTSxDQUFDLENBQUMsQ0FBRSxDQUFDLENBQUMsRUFBUSxHQUFHLFlBQVksT0FBT21KLEdBQUdyQixFQUFFLENBQUMsRUFBRSxTQUFTc0IsR0FBRyxZQUFZLE9BQU9BLEdBQUd0QixFQUFFLENBQUMsRUFBRUcsRUFBRUYsQ0FBQyxFQUFFLENBQUMsSUFBSThCLEVBQUUyQixFQUFFeEwsQ0FBQyxFQUFFaUosRUFBRStDLEVBQUVoTSxFQUFFK0gsRUFBRSxNQUFNLEVBQUVtQixFQUFFLEdBQUcsSUFBSVMsRUFBRVIsRUFBRUYsQ0FBQyxFQUFFQyxFQUFFLEVBQXNCLENBQW5CLFNBQVFBLEVBQUVrQyxFQUFLQyxHQUFIeEIsQ0FBQyxDQUFNLENBQUMsTUFBTSxhQUFhLE9BQU9tRixTQUFTckYsYUFBYXFGLFFBQVFyRixFQUFFc0YsS0FBSyxTQUFVbkgsR0FBRyxPQUFPcUQsRUFBRXRCLEVBQUVULENBQUMsRUFBRXNDLEVBQUU1RCxFQUFFK0IsQ0FBQyxDQUFFLEVBQUUsU0FBVS9CLEdBQUcsTUFBTXNELEVBQUV2QixDQUFDLEVBQUUvQixDQUFFLENBQUMsR0FBR3FELEVBQUV0QixFQUFFVCxDQUFDLEVBQUVzQyxFQUFFL0IsRUFBRUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDOUIsR0FBRyxVQUFVLE9BQU9BLEVBQThHLE9BQXBGNEIsRUFBcEIsVUFBVUEsRUFBRVIsRUFBRXBCLENBQUMsR0FBT0EsRUFBRzRCLEtBQUlpQyxLQUFJakMsRUFBRSxRQUFRM0osRUFBRW1NLEdBQUd6QixFQUFFZixFQUFFLEVBQUUsRUFBRVAsSUFBT2MsRUFBRSxHQUFHQyxFQUFFLEdBQUdhLEVBQUUsU0FBUyxFQUFFVyxFQUFFNUQsRUFBRTRCLEVBQUVPLEVBQUVDLENBQUMsRUFBRWYsRUFBRWMsRUFBRUMsQ0FBQyxHQUFTUixFQUFFN0IsRUFBRSxHQUFHQyxDQUFDLENBQUMsRUFBRXhLLEtBQUt1UixtQkFBbUIsU0FBU2hILEVBQUVDLEdBQUcsSUFBaU5FLEVBQUVrQixFQUFuTixNQUFHLFlBQVksT0FBT3JCLEVBQVMsU0FBU0MsR0FBRyxJQUFJLElBQUlFLEVBQUVELFVBQVVwSSxPQUFPdUosRUFBRWpCLE1BQVEsRUFBRkQsRUFBSUEsRUFBRSxFQUFFLENBQUMsRUFBRW1CLEVBQUUsRUFBRUEsRUFBRW5CLEVBQUVtQixDQUFDLEdBQUdELEVBQUVDLEVBQUUsR0FBR3BCLFVBQVVvQixHQUFHLE9BQU9wSixFQUFFOE8sbUJBQW1CL0csRUFBRSxTQUFVQSxHQUFHLE9BQU9ELEVBQUVxRyxNQUFNLE9BQU8sQ0FBQ3BHLEdBQUdtRSxPQUFPL0MsQ0FBQyxDQUFDLENBQUUsQ0FBQyxDQUFDLEdBQVVDLEVBQUVwSixFQUFFNE8sUUFBUTlHLEVBQUVDLEVBQUUsU0FBVUQsRUFBRUMsR0FBR0UsRUFBRUgsRUFBRXFCLEVBQUVwQixDQUFFLENBQUMsRUFBUSxhQUFhLE9BQU9pSCxTQUFTNUYsYUFBYTRGLFFBQVE1RixFQUFFNkYsS0FBSyxTQUFVbkgsR0FBRyxNQUFNLENBQUNBLEVBQUVHLEVBQUVrQixFQUFHLENBQUMsRUFBRSxDQUFDQyxFQUFFbkIsRUFBRWtCLEdBQUUsRUFBRSxXQUFXLE9BQU8sTUFBTXBCLEVBQUUsT0FBT0EsRUFBRW1ILGFBQWEzUixLQUFLZ1IsY0FBY3hHLEVBQUVtSCxVQUFVLEVBQUUsV0FBVyxPQUFPLE1BQU1uSCxFQUFFLE9BQU9BLEVBQUVvSCxhQUFhNVIsS0FBSytRLGNBQWN2RyxFQUFFb0gsVUFBVSxDQUFDLENFQS95aEIsU0FBU0MsRUFBUWhHLEdBR2YsT0FBT2dHLEVBQVUsWUFBYyxPQUFPN0IsUUFBVSxVQUFZLE9BQU9BLE9BQU84QixTQUFXLFNBQVVqRyxHQUM3RixPQUFPLE9BQU9BLENBQ2hCLEVBQUksU0FBVUEsR0FDWixPQUFPQSxHQUFLLFlBQWMsT0FBT21FLFFBQVVuRSxFQUFFVCxjQUFnQjRFLFFBQVVuRSxJQUFNbUUsT0FBT2pPLFVBQVksU0FBVyxPQUFPOEosQ0FDcEgsR0FBV0EsQ0FBQyxDQUNkLENDTkEsU0FBU2tHLEdBQWNySCxHQUNqQmtCLEdDRk4sQ0FBcUJsQixFQUFHRixLQUN0QixHQUFJLFVBQVlxSCxFQUFRbkgsQ0FBQyxHQUFLLENBQUNBLEVBQUcsT0FBT0EsRUFDekMsSUFBSWpJLEVBQUlpSSxFQUFFc0YsT0FBT2dDLGFBQ2pCLEdBQUksU0FBV3ZQLEVBS2YsT0FBUSxXQUFhK0gsRUFBSXlILE9BQVN0UixRQUFRK0osQ0FBQyxFQUh6QyxHQUFJLFVBQVltSCxFQURaakcsRUFBSW5KLEVBQUUwSSxLQUFLVCxFQUFHRixHQUFLLFNBQVMsQ0FDUCxFQUFHLE9BQU9vQixFQUNuQyxNQUFNLElBQUlzRyxVQUFVLDhDQUE4QyxDQUd0RSxHRFBzQnhILEVBQUcsUUFBUSxFQUMvQixNQUFPLFVBQVltSCxFQUFRakcsQ0FBQyxFQUFJQSxFQUFJQSxFQUFJLEVBQzFDLENFSkEsU0FBU3lFLEdBQVE1TixFQUFHK0gsR0FDbEIsSUFFTXFCLEVBRkZuQixFQUFJTSxPQUFPYyxLQUFLckosQ0FBQyxFQU9yQixPQU5JdUksT0FBT3NGLHdCQUNMekUsRUFBSWIsT0FBT3NGLHNCQUFzQjdOLENBQUMsRUFDdEMrSCxJQUFNcUIsRUFBSUEsRUFBRXNHLE9BQU8sU0FBVTNILEdBQzNCLE9BQU9RLE9BQU84RCx5QkFBeUJyTSxFQUFHK0gsQ0FBQyxFQUFFeUMsVUFDL0MsQ0FBQyxHQUFJdkMsRUFBRWdGLEtBQUtrQixNQUFNbEcsRUFBR21CLENBQUMsR0FFakJuQixDQUNULENBQ0EsU0FBUzBILEdBQWUzUCxHQUN0QixJQUFLLElBQUkrSCxFQUFJLEVBQUdBLEVBQUlDLFVBQVVwSSxPQUFRbUksQ0FBQyxHQUFJLENBQ3pDLElBQUlFLEVBQUksTUFBUUQsVUFBVUQsR0FBS0MsVUFBVUQsR0FBSyxHQUM5Q0EsRUFBSSxFQUFJNkYsR0FBUXJGLE9BQU9OLENBQUMsRUFBRyxFQUFFLEVBQUVwSSxRQUFRLFNBQVVrSSxHQ2JyRCxJQUF5Qi9ILEVBQU1pSSxFQUFOakksRURjSkEsRUNkVWlJLEVEY0pBLEVDZENGLEVEY0pBLElDYmRBLEVBQUl1SCxHQUFjdkgsQ0FBQyxLQUFNL0gsRUFBSXVJLE9BQU80RSxlQUFlbk4sRUFBRytILEVBQUcsQ0FDL0RyRSxNQUFPdUUsRUFDUHVDLFdBQVksR0FDWkQsYUFBYyxHQUNkRCxTQUFVLEVBQ1osQ0FBQyxFQUFJdEssRUFBRStILEdBQUtFLENEU1YsQ0FBQyxFQUFJTSxPQUFPd0YsMEJBQTRCeEYsT0FBT3FILGlCQUFpQjVQLEVBQUd1SSxPQUFPd0YsMEJBQTBCOUYsQ0FBQyxDQUFDLEVBQUkyRixHQUFRckYsT0FBT04sQ0FBQyxDQUFDLEVBQUVwSSxRQUFRLFNBQVVrSSxHQUM3SVEsT0FBTzRFLGVBQWVuTixFQUFHK0gsRUFBR1EsT0FBTzhELHlCQUF5QnBFLEVBQUdGLENBQUMsQ0FBQyxDQUNuRSxDQUFDLENBQ0gsQ0FDQSxPQUFPL0gsQ0FDVCxDRVpBLFNBQVM2UCxFQUF1QkMsR0FDOUIsTUFBTyx5QkFBMkJBLEVBQU8sNENBQThDQSxFQUFxQyxpRkFDOUgsQ0FhbUIsU0FBZkMsS0FDRixPQUFPckosS0FBS0UsT0FBTyxFQUFFaUMsU0FBUyxFQUFFLEVBQUVtSCxVQUFVLENBQUMsRUFBRUMsTUFBTSxFQUFFLEVBQUU1SCxLQUFLLEdBQUcsQ0FDbkUsQ0FaQSxJQUFJNkgsR0FDdUIsWUFBbEIsT0FBTzNDLFFBQXlCQSxPQUFPNEMsWUFBYyxlQWExREMsRUFBYyxDQUNoQkMsS0FBTSxlQUFpQk4sR0FBYSxFQUNwQ08sUUFBUyxrQkFBb0JQLEdBQWEsRUFDMUNRLHFCQUFzQixXQUNwQixNQUFPLCtCQUFpQ1IsR0FBYSxDQUN2RCxDQUNGLEVBTUEsU0FBU1MsR0FBY0MsR0FDckIsR0FBbUIsVUFBZixPQUFPQSxHQUE0QixPQUFSQSxFQUEvQixDQUdBLElBRkEsSUFBSUMsRUFBUUQsRUFFNEIsT0FBakNsSSxPQUFPQyxlQUFla0ksQ0FBSyxHQUNoQ0EsRUFBUW5JLE9BQU9DLGVBQWVrSSxDQUFLLEVBR3JDLE9BQU9uSSxPQUFPQyxlQUFlaUksQ0FBRyxJQUFNQyxDQVBtQixDQVEzRCxDQXVGQSxTQUFTQyxHQUFZQyxFQUFTQyxFQUFnQkMsR0FHNUMsR0FBOEIsWUFBMUIsT0FBT0QsR0FBcUQsWUFBcEIsT0FBT0MsR0FBK0MsWUFBcEIsT0FBT0EsR0FBbUQsWUFBeEIsT0FBTzlJLFVBQVUsR0FDL0gsTUFBTSxJQUFJRyxNQUE4QzBILEVBQXVCLENBQUMsQ0FBZ1IsRUFRbFcsR0FMOEIsWUFBMUIsT0FBT2dCLEdBQXFELFNBQWJDLElBQ2pEQSxFQUFXRCxFQUNYQSxFQUFpQkUsS0FBQUEsR0FHSyxTQUFiRCxFQUEwQixDQUNuQyxHQUF3QixZQUFwQixPQUFPQSxFQUNULE1BQU0sSUFBSTNJLE1BQThDMEgsRUFBdUIsQ0FBQyxDQUEyRixFQUc3SyxPQUFPaUIsRUFBU0gsRUFBVyxFQUFFQyxFQUFTQyxDQUFjLENBQ3RELENBRUEsR0FBdUIsWUFBbkIsT0FBT0QsRUFDVCxNQUFNLElBQUl6SSxNQUE4QzBILEVBQXVCLENBQUMsQ0FBOEYsRUFHaEwsSUFBSW1CLEVBQWlCSixFQUNqQkssRUFBZUosRUFDZkssRUFBbUIsR0FDbkJDLEVBQWdCRCxFQUNoQkUsRUFBZ0IsR0FTcEIsU0FBU0MsSUFDSEYsSUFBa0JELElBQ3BCQyxFQUFnQkQsRUFBaUI5RyxNQUFNLEVBRTNDLENBUUEsU0FBU25KLElBQ1AsR0FBSW1RLEVBQ0YsTUFBTSxJQUFJakosTUFBOEMwSCxFQUF1QixDQUFDLENBQW9OLEVBR3RTLE9BQU9vQixDQUNULENBMEJBLFNBQVM1TixFQUFVaU8sR0FDakIsR0FBd0IsWUFBcEIsT0FBT0EsRUFDVCxNQUFNLElBQUluSixNQUE4QzBILEVBQXVCLENBQUMsQ0FBMkYsRUFHN0ssR0FBSXVCLEVBQ0YsTUFBTSxJQUFJakosTUFBOEMwSCxFQUF1QixDQUFDLENBQW9VLEVBR3RaLElBQUkwQixFQUFlLEdBR25CLE9BRkFGLEVBQTZCLEVBQzdCRixFQUFjbEUsS0FBS3FFLENBQVEsRUFDcEIsV0FDTCxHQUFLQyxFQUFMLENBSUEsR0FBSUgsRUFDRixNQUFNLElBQUlqSixNQUE4QzBILEVBQXVCLENBQUMsQ0FBK0osRUFHalAwQixFQUFlLEdBQ2ZGLEVBQTZCLEVBQzdCLElBQUlHLEVBQVFMLEVBQWNNLFFBQVFILENBQVEsRUFDMUNILEVBQWNPLE9BQU9GLEVBQU8sQ0FBQyxFQUM3Qk4sRUFBbUIsSUFWbkIsQ0FXRixDQUNGLENBNEJBLFNBQVNwUSxFQUFTNlEsR0FDaEIsR0FBSSxDQUFDbkIsR0FBY21CLENBQU0sRUFDdkIsTUFBTSxJQUFJeEosTUFBOEMwSCxFQUF1QixDQUFDLENBQW9hLEVBR3RmLEdBQTJCLFNBQWhCOEIsRUFBTzVRLEtBQ2hCLE1BQU0sSUFBSW9ILE1BQThDMEgsRUFBdUIsQ0FBQyxDQUFnSCxFQUdsTSxHQUFJdUIsRUFDRixNQUFNLElBQUlqSixNQUE4QzBILEVBQXVCLENBQUMsQ0FBd0MsRUFHMUgsSUFDRXVCLEVBQWdCLEdBQ2hCSCxFQUFlRCxFQUFlQyxFQUFjVSxDQUFNLENBR3BELENBRkUsUUFDQVAsRUFBZ0IsRUFDbEIsQ0FJQSxJQUZBLElBQUlRLEVBQVlWLEVBQW1CQyxFQUUxQmhJLEVBQUksRUFBR0EsRUFBSXlJLEVBQVVoUyxPQUFRdUosQ0FBQyxJQUVyQ21JLEVBRGVNLEVBQVV6SSxJQUNoQixFQUdYLE9BQU93SSxDQUNULENBNEVBLE9BSEE3USxFQUFTLENBQ1BDLEtBQU1xUCxFQUFZQyxJQUNwQixDQUFDLEdBQ013QixFQUFRLENBQ2IvUSxTQUFVQSxFQUNWdUMsVUFBV0EsRUFDWHBDLFNBQVVBLEVBQ1Y2USxlQW5FRixTQUF3QkMsR0FDdEIsR0FBMkIsWUFBdkIsT0FBT0EsRUFDVCxNQUFNLElBQUk1SixNQUE4QzBILEVBQXVCLEVBQUUsQ0FBMkYsRUFHOUttQixFQUFpQmUsRUFLakJqUixFQUFTLENBQ1BDLEtBQU1xUCxFQUFZRSxPQUNwQixDQUFDLENBQ0gsQ0F1REEsR0FBU0osSUE5Q1QsV0FDRSxJQUVJOEIsRUFBaUIzTyxFQUNkNE8sRUFBTyxDQVNaNU8sVUFBVyxTQUFtQjZPLEdBQzVCLEdBQXdCLFVBQXBCLE9BQU9BLEdBQXNDLE9BQWJBLEVBQ2xDLE1BQU0sSUFBSS9KLE1BQThDMEgsRUFBdUIsRUFBRSxDQUEwRixFQUc3SyxTQUFTc0MsSUFDSEQsRUFBU0UsTUFDWEYsRUFBU0UsS0FBS25SLEVBQVMsQ0FBQyxDQUU1QixDQUlBLE9BRkFrUixFQUFhLEVBRU4sQ0FDTGpULFlBRmdCOFMsRUFBZUcsQ0FBWSxDQUc3QyxDQUNGLENBQ0YsRUExQkEsT0EwQkdGLEVBQUsvQixJQUFnQixXQUN0QixPQUFPM1MsSUFDVCxFQUFHMFUsQ0FDTCxFQWFxQ0osQ0FDdkMsQ0FzSEEsU0FBU1EsR0FBZ0JDLEdBSXZCLElBSEEsSUFBSUMsRUFBY2hLLE9BQU9jLEtBQUtpSixDQUFRLEVBQ2xDRSxFQUFnQixHQUVYckosRUFBSSxFQUFHQSxFQUFJb0osRUFBWTNTLE9BQVF1SixDQUFDLEdBQUksQ0FDM0MsSUFBSXNKLEVBQU1GLEVBQVlwSixHQVFPLFlBQXpCLE9BQU9tSixFQUFTRyxLQUNsQkQsRUFBY0MsR0FBT0gsRUFBU0csR0FFbEMsQ0FFQSxJQVNJQyxFQS9Ec0JKLEVBc0R0QkssRUFBbUJwSyxPQUFPYyxLQUFLbUosQ0FBYSxFQVdoRCxJQWpFMEJGLEVBa0VMRSxFQWpFckJqSyxPQUFPYyxLQUFLaUosQ0FBUSxFQUFFelMsUUFBUSxTQUFVNFMsR0FDbEM3QixFQUFVMEIsRUFBU0csR0FLdkIsR0FBNEIsU0FKVDdCLEVBQVFHLEtBQUFBLEVBQVcsQ0FDcENoUSxLQUFNcVAsRUFBWUMsSUFDcEIsQ0FBQyxFQUdDLE1BQU0sSUFBSWxJLE1BQThDMEgsRUFBdUIsRUFBRSxDQUE4VSxFQUdqYSxHQUVPLFNBRkllLEVBQVFHLEtBQUFBLEVBQVcsQ0FDNUJoUSxLQUFNcVAsRUFBWUcscUJBQXFCLENBQ3pDLENBQUMsRUFDQyxNQUFNLElBQUlwSSxNQUE4QzBILEVBQXVCLEVBQUUsQ0FBeWQsQ0FFOWlCLENBQUMsQ0FxREQsQ0FGRSxNQUFPN1AsR0FDUDBTLEVBQXNCMVMsQ0FDeEIsQ0FFQSxPQUFPLFNBQXFCNkQsRUFBTzhOLEdBS2pDLEdBSmMsU0FBVjlOLElBQ0ZBLEVBQVEsSUFHTjZPLEVBQ0YsTUFBTUEsRUFjUixJQVgyQyxJQVF2Q0UsRUFBYSxHQUNiQyxFQUFZLEdBRVBDLEVBQUssRUFBR0EsRUFBS0gsRUFBaUIvUyxPQUFRa1QsQ0FBRSxHQUFJLENBQ25ELElBQUlDLEVBQU9KLEVBQWlCRyxHQUN4QmxDLEVBQVU0QixFQUFjTyxHQUN4QkMsRUFBc0JuUCxFQUFNa1AsR0FDNUJFLEVBQWtCckMsRUFBUW9DLEVBQXFCckIsQ0FBTSxFQUV6RCxHQUErQixTQUFwQnNCLEVBRVQsTUFEaUJ0QixHQUFVQSxFQUFPNVEsS0FDNUIsSUFBSW9ILE1BQThDMEgsRUFBdUIsRUFBRSxDQUFzVixFQUd6YWdELEVBQVVFLEdBQVFFLEVBQ2xCTCxFQUFhQSxHQUFjSyxJQUFvQkQsQ0FDakQsQ0FHQSxPQURBSixFQUFhQSxHQUFjRCxFQUFpQi9TLFNBQVcySSxPQUFPYyxLQUFLeEYsQ0FBSyxFQUFFakUsUUFDdERpVCxFQUFZaFAsQ0FDbEMsQ0FDRixDQThEQSxTQUFTcVAsSUFDUCxJQUFLLElBQUlDLEVBQU9uTCxVQUFVcEksT0FBUXdULEVBQVEsSUFBSWxMLE1BQU1pTCxDQUFJLEVBQUdKLEVBQU8sRUFBR0EsRUFBT0ksRUFBTUosQ0FBSSxHQUNwRkssRUFBTUwsR0FBUS9LLFVBQVUrSyxHQUcxQixPQUFxQixJQUFqQkssRUFBTXhULE9BQ0QsU0FBVXlULEdBQ2YsT0FBT0EsQ0FDVCxFQUdtQixJQUFqQkQsRUFBTXhULE9BQ0R3VCxFQUFNLEdBR1JBLEVBQU1FLE9BQU8sU0FBVTdKLEVBQUd1QixHQUMvQixPQUFPLFdBQ0wsT0FBT3ZCLEVBQUV1QixFQUFFbUQsTUFBTSxPQUFRbkcsU0FBUyxDQUFDLENBQ3JDLENBQ0YsQ0FBQyxDQUNILENDNW9CQSxTQUFTdUwsR0FBc0JDLEdBcUI3QixPQWxCaUIsU0FBb0J2QixHQUNuQyxJQUFJblIsRUFBV21SLEVBQUtuUixTQUNoQkcsRUFBV2dSLEVBQUtoUixTQUNwQixPQUFPLFNBQVVtUixHQUNmLE9BQU8sU0FBVVQsR0FHZixNQUFzQixZQUFsQixPQUFPQSxFQUVGQSxFQUFPN1EsRUFBVUcsRUFBVXVTLENBQWEsRUFJMUNwQixFQUFLVCxDQUFNLENBQ3BCLENBQ0YsQ0FDRixDQUdGLENBRUk4QixFQUFRRixHQUFzQixFQUdsQ0UsRUFBTUMsa0JBQW9CSCxHQUMxQixTQ21Db0IsU0FBaEJJLEdBQTBCbEssRUFBR3VCLEdBQUssT0FBTzRJLEdBQVduSyxFQUFHb0ssR0FBa0I3SSxDQUFDLENBQUMsQ0FBRyxDQWpFMUU4SSxHQUFnQixTQUFVcEosRUFBR00sR0FJN0IsT0FIQThJLEdBQWdCdkwsT0FBTzJGLGlCQUNsQixDQUFFNkYsVUFBVyxFQUFHLFlBQWE3TCxNQUFTLFNBQVV3QyxFQUFHTSxHQUFLTixFQUFFcUosVUFBWS9JLENBQUcsRUFDMUUsU0FBVU4sRUFBR00sR0FBSyxJQUFLLElBQUlkLEtBQUtjLEVBQU96QyxPQUFPakosVUFBVW1KLGVBQWVDLEtBQUtzQyxFQUFHZCxDQUFDLElBQUdRLEVBQUVSLEdBQUtjLEVBQUVkLEdBQUksSUFDL0VRLEVBQUdNLENBQUMsQ0FDN0IsRUFOSixJQUNROEksR0FESkUsRUFPTyxTQUFVdEosRUFBR00sR0FDaEIsR0FBaUIsWUFBYixPQUFPQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUl5RSxVQUFVLHVCQUF5QkQsT0FBT3hFLENBQUMsRUFBSSwrQkFBK0IsRUFFNUYsU0FBU2lKLElBQU8xVyxLQUFLb0wsWUFBYytCLENBQUcsQ0FEdENvSixHQUFjcEosRUFBR00sQ0FBQyxFQUVsQk4sRUFBRXBMLFVBQWtCLE9BQU4wTCxFQUFhekMsT0FBT2tDLE9BQU9PLENBQUMsR0FBS2lKLEVBQUczVSxVQUFZMEwsRUFBRTFMLFVBQVcsSUFBSTJVLEVBQ25GLEVBRUFDLEdBQTRDLFNBQVVDLEVBQVMvVixHQUMvRCxJQUFzR3VMLEVBQUd0SyxFQUFHNEksRUFBeEd3RCxFQUFJLENBQUUySSxNQUFPLEVBQUdDLEtBQU0sV0FBYSxHQUFXLEVBQVBwTSxFQUFFLEdBQVEsTUFBTUEsRUFBRSxHQUFJLE9BQU9BLEVBQUUsRUFBSSxFQUFHcU0sS0FBTSxHQUFJQyxJQUFLLEVBQUcsRUFDNUZuSixFQUFJLENBQUVnSCxLQUFNb0MsRUFBSyxDQUFDLEVBQUcsTUFBU0EsRUFBSyxDQUFDLEVBQUcsT0FBVUEsRUFBSyxDQUFDLENBQUUsRUFBaEUsTUFBcUYsWUFBbEIsT0FBT2pILFNBQTBCbkMsRUFBRW1DLE9BQU84QixVQUFZLFdBQWEsT0FBTzlSLElBQU0sR0FBSTZOLEVBQ3ZKLFNBQVNvSixFQUFLMU0sR0FBSyxPQUFPLFNBQVVvQixHQUFZdUwsSUFDbEMvRixFQUR1QyxDQUFDNUcsRUFBR29CLEdBRXJELEdBQUlTLEVBQUcsTUFBTSxJQUFJOEYsVUFBVSxpQ0FBaUMsRUFDNUQsS0FBT2hFLEdBQUcsSUFDTixHQUFJOUIsRUFBSSxFQUFHdEssSUFBTTRJLEVBQVksRUFBUnlHLEVBQUcsR0FBU3JQLEVBQVUsT0FBSXFQLEVBQUcsR0FBS3JQLEVBQVMsU0FBTzRJLEVBQUk1SSxFQUFVLFNBQU00SSxFQUFFUyxLQUFLckosQ0FBQyxFQUFHLEdBQUtBLEVBQUUrUyxPQUFTLEVBQUVuSyxFQUFJQSxFQUFFUyxLQUFLckosRUFBR3FQLEVBQUcsRUFBRSxHQUFHZ0csS0FBTSxPQUFPek0sRUFFM0osT0FESTVJLEVBQUksR0FBTXFQLEVBQUh6RyxFQUFRLENBQVMsRUFBUnlHLEVBQUcsR0FBUXpHLEVBQUV2RSxPQUN6QmdMLEdBQUcsSUFDUCxLQUFLLEVBQUcsS0FBSyxFQUFHekcsRUFBSXlHLEVBQUksTUFDeEIsS0FBSyxFQUFjLE9BQVhqRCxFQUFFMkksS0FBSyxHQUFXLENBQUUxUSxNQUFPZ0wsRUFBRyxHQUFJZ0csS0FBTSxFQUFNLEVBQ3RELEtBQUssRUFBR2pKLEVBQUUySSxLQUFLLEdBQUkvVSxFQUFJcVAsRUFBRyxHQUFJQSxFQUFLLENBQUMsR0FBSSxTQUN4QyxLQUFLLEVBQUdBLEVBQUtqRCxFQUFFOEksSUFBSUksSUFBSSxFQUFHbEosRUFBRTZJLEtBQUtLLElBQUksRUFBRyxTQUN4QyxRQUNJLEdBQUksRUFBYzFNLEVBQWUsR0FBM0JBLEVBQUl3RCxFQUFFNkksTUFBWTFVLFFBQWNxSSxFQUFFQSxFQUFFckksT0FBUyxNQUFrQixJQUFWOE8sRUFBRyxJQUFzQixJQUFWQSxFQUFHLElBQVcsQ0FBRWpELEVBQUksRUFBRyxRQUFVLENBQzNHLEdBQWMsSUFBVmlELEVBQUcsS0FBYSxDQUFDekcsR0FBTXlHLEVBQUcsR0FBS3pHLEVBQUUsSUFBTXlHLEVBQUcsR0FBS3pHLEVBQUUsSUFBUXdELEVBQUUySSxNQUFRMUYsRUFBRyxRQUMxRSxHQUFjLElBQVZBLEVBQUcsSUFBWWpELEVBQUUySSxNQUFRbk0sRUFBRSxHQUFNd0QsRUFBRTJJLE1BQVFuTSxFQUFFLEdBQUlBLEVBQUl5RyxNQUF6RCxDQUNBLEdBQUl6RyxFQUFBQSxHQUFLd0QsRUFBRTJJLE1BQVFuTSxFQUFFLElBQXJCLENBQ0lBLEVBQUUsSUFBSXdELEVBQUU4SSxJQUFJSSxJQUFJLEVBQ3BCbEosRUFBRTZJLEtBQUtLLElBQUksRUFBRyxRQUZvRCxDQUF2Q2xKLEVBQUUySSxNQUFRbk0sRUFBRSxHQUFJd0QsRUFBRThJLElBQUl0SCxLQUFLeUIsQ0FBRSxDQURZLENBSTVFLENBQ0FBLEVBQUt0USxFQUFLc0ssS0FBS3lMLEVBQVMxSSxDQUFDLENBQzRCLENBQXZELE1BQU96TCxHQUFLME8sRUFBSyxDQUFDLEVBQUcxTyxHQUFJWCxFQUFJLENBQUcsQ0FBRSxRQUFVc0ssRUFBSTFCLEVBQUksQ0FBRyxDQUN6RCxHQUFZLEVBQVJ5RyxFQUFHLEdBQVEsTUFBTUEsRUFBRyxHQUFJLE1BQU8sQ0FBRWhMLE1BQU9nTCxFQUFHLEdBQUtBLEVBQUcsR0FBSyxPQUFRZ0csS0FBTSxFQUFLLENBckJyQixDQUFHLENBdUJyRSxFQUNJRSxFQUFnRCxTQUFVQyxFQUFJM0gsR0FDOUQsSUFBSyxJQUFJL0QsRUFBSSxFQUFHMkwsRUFBSzVILEVBQUt0TixPQUFRdUwsRUFBSTBKLEVBQUdqVixPQUFRdUosRUFBSTJMLEVBQUkzTCxDQUFDLEdBQUlnQyxDQUFDLEdBQzNEMEosRUFBRzFKLEdBQUsrQixFQUFLL0QsR0FDakIsT0FBTzBMLENBQ1gsRUFDSUUsR0FBWXhNLE9BQU80RSxlQUNuQnlHLEdBQWFyTCxPQUFPcUgsaUJBQ3BCaUUsR0FBb0J0TCxPQUFPd0YsMEJBQzNCaUgsR0FBc0J6TSxPQUFPc0Ysc0JBQzdCb0gsR0FBZTFNLE9BQU9qSixVQUFVbUosZUFDaEN5TSxHQUFlM00sT0FBT2pKLFVBQVU2VixxQkFDaENDLEdBQWtCLFNBQVUzRSxFQUFLZ0MsRUFBSy9PLEdBQVMsT0FBTytPLEtBQU9oQyxFQUFNc0UsR0FBVXRFLEVBQUtnQyxFQUFLLENBQUVqSSxXQUFZLEdBQU1ELGFBQWMsR0FBTUQsU0FBVSxHQUFNNUcsTUFBT0EsQ0FBTSxDQUFDLEVBQUkrTSxFQUFJZ0MsR0FBTy9PLENBQU8sRUFDbkwyUixFQUFpQixTQUFVNUwsRUFBR3VCLEdBQzlCLElBQUssSUFBSXNLLEtBQVF0SyxFQUFBQSxHQUFVLEdBQ25CaUssR0FBYXZNLEtBQUtzQyxFQUFHc0ssQ0FBSSxHQUN6QkYsR0FBZ0IzTCxFQUFHNkwsRUFBTXRLLEVBQUVzSyxFQUFLLEVBQ3hDLEdBQUlOLEdBQ0EsSUFBSyxJQUFJbEMsRUFBSyxFQUFHeUMsRUFBS1AsR0FBb0JoSyxDQUFDLEVBQUc4SCxFQUFLeUMsRUFBRzNWLE9BQVFrVCxDQUFFLEdBQUksQ0FDNUR3QyxFQUFPQyxFQUFHekMsR0FDVm9DLEdBQWF4TSxLQUFLc0MsRUFBR3NLLENBQUksR0FDekJGLEdBQWdCM0wsRUFBRzZMLEVBQU10SyxFQUFFc0ssRUFBSyxDQUN4QyxDQUNKLE9BQU83TCxDQUNYLEVBRUkrTCxHQUFVLFNBQVVDLEVBQVFDLEVBQWFDLEdBQ3pDLE9BQU8sSUFBSTNHLFFBQVEsU0FBVTRHLEVBQVNDLEdBQ2xDLElBQUlDLEVBQVksU0FBVXBTLEdBQ3RCLElBQ0krUSxFQUFLa0IsRUFBVXZELEtBQUsxTyxDQUFLLENBQUMsQ0FJOUIsQ0FGQSxNQUFPMUQsR0FDSDZWLEVBQU83VixDQUFDLENBQ1osQ0FDSixFQUNJK1YsRUFBVyxTQUFVclMsR0FDckIsSUFDSStRLEVBQUtrQixFQUFVSyxNQUFNdFMsQ0FBSyxDQUFDLENBSS9CLENBRkEsTUFBTzFELEdBQ0g2VixFQUFPN1YsQ0FBQyxDQUNaLENBQ0osRUFDSXlVLEVBQU8sU0FBVXJWLEdBQUssT0FBT0EsRUFBRXNWLEtBQU9rQixFQUFReFcsRUFBRXNFLEtBQUssRUFBSXNMLFFBQVE0RyxRQUFReFcsRUFBRXNFLEtBQUssRUFBRXVMLEtBQUs2RyxFQUFXQyxDQUFRLENBQUcsRUFDakh0QixHQUFNa0IsRUFBWUEsRUFBVXhILE1BQU1zSCxFQUFRQyxDQUFXLEdBQUd0RCxLQUFLLENBQUMsQ0FDbEUsQ0FBQyxDQUNMLEVBNEJJNkQsR0FBd0MsYUFBbEIsT0FBT0MsUUFBMEJBLE9BQU9DLHFDQUF1Q0QsT0FBT0MscUNBQXVDLFdBQ25KLEdBQXlCLElBQXJCbk8sVUFBVXBJLE9BRWQsTUFBNEIsVUFBeEIsT0FBT29JLFVBQVUsR0FDVmtMLEVBQ0pBLEVBQVEvRSxNQUFNLEtBQU1uRyxTQUFTLENBQ3hDLEVBT0EsU0FBUyxHQUFjdEUsR0FDbkIsR0FBcUIsVUFBakIsT0FBT0EsR0FBZ0MsT0FBVkEsRUFDN0IsTUFBTyxHQUNQZ04sRUFBUW5JLE9BQU9DLGVBQWU5RSxDQUFLLEVBQ3ZDLEdBQWMsT0FBVmdOLEVBQ0EsTUFBTyxHQUVYLElBREEsSUFBSTBGLEVBQVkxRixFQUM0QixPQUFyQ25JLE9BQU9DLGVBQWU0TixDQUFTLEdBQ2xDQSxFQUFZN04sT0FBT0MsZUFBZTROLENBQVMsRUFFL0MsT0FBTzFGLElBQVUwRixDQUNyQixDQVFBLFNBQVNDLEVBQWF0VixFQUFNdVYsR0FDeEIsU0FBU0MsSUFFTCxJQURBLElBQUlDLEVBQU8sR0FDRjFELEVBQUssRUFBR0EsRUFBSzlLLFVBQVVwSSxPQUFRa1QsQ0FBRSxHQUN0QzBELEVBQUsxRCxHQUFNOUssVUFBVThLLEdBRXpCLEdBQUl3RCxFQUFlLENBQ2YsSUFBSUcsRUFBV0gsRUFBY25JLE1BQU0sT0FBUXFJLENBQUksRUFDL0MsR0FBS0MsRUFHTCxPQUFPcEIsRUFBZUEsRUFBZSxDQUNqQ3RVLEtBQU1BLEVBQ04yVixRQUFTRCxFQUFTQyxPQUN0QixFQUFHLFNBQVVELEdBQVksQ0FBRUUsS0FBTUYsRUFBU0UsSUFBSyxDQUFDLEVBQUcsVUFBV0YsR0FBWSxDQUFFRyxNQUFPSCxFQUFTRyxLQUFNLENBQUMsRUFML0YsTUFBTSxJQUFJek8sTUFBTSx3Q0FBd0MsQ0FNaEUsQ0FDQSxNQUFPLENBQUVwSCxLQUFNQSxFQUFNMlYsUUFBU0YsRUFBSyxFQUFHLENBQzFDLENBSUEsT0FIQUQsRUFBYzFOLFNBQVcsV0FBYyxNQUFPLEdBQUs5SCxDQUFNLEVBQ3pEd1YsRUFBY3hWLEtBQU9BLEVBQ3JCd1YsRUFBY3BZLE1BQVEsU0FBVXdULEdBQVUsT0FBT0EsRUFBTzVRLE9BQVNBLENBQU0sRUFDaEV3VixDQUNYLENBeUQrQ00sRUFvQzdDM08sTUFuQ0U4TCxFQUFVOEMsRUFBaUJELENBQU0sRUFVakN0TyxPQUFPNEUsZUFBZTJKLEVBQWlCdkosT0FBT3dKLFFBQVMsQ0FDbkRyTixJQUFLLFdBQ0QsT0FBT29OLENBQ1gsRUFDQXRNLFdBQVksR0FDWkQsYUFBYyxFQUNsQixDQUFDLEVBQ0R1TSxFQUFnQnhYLFVBQVU0TSxPQUFTLFdBRS9CLElBREEsSUFBSThLLEVBQU0sR0FDRGxFLEVBQUssRUFBR0EsRUFBSzlLLFVBQVVwSSxPQUFRa1QsQ0FBRSxHQUN0Q2tFLEVBQUlsRSxHQUFNOUssVUFBVThLLEdBRXhCLE9BQU8rRCxFQUFPdlgsVUFBVTRNLE9BQU9pQyxNQUFNNVEsS0FBTXlaLENBQUcsQ0FDbEQsRUFDQUYsRUFBZ0J4WCxVQUFVMlgsUUFBVSxXQUVoQyxJQURBLElBQUlELEVBQU0sR0FDRGxFLEVBQUssRUFBR0EsRUFBSzlLLFVBQVVwSSxPQUFRa1QsQ0FBRSxHQUN0Q2tFLEVBQUlsRSxHQUFNOUssVUFBVThLLEdBRXhCLE9BQ1csSUFEUSxJQUFma0UsRUFBSXBYLFFBQWdCc0ksTUFBTWEsUUFBUWlPLEVBQUksRUFBRSxFQUM1QkYsRUFBZ0IvSCxLQUFLWixNQUFNMkksRUFBaUJsQyxFQUFjLENBQUMsUUFBU29DLEVBQUksR0FBRzlLLE9BQU8zTyxJQUFJLENBQUMsQ0FBRSxFQUU3RnVaLEVBQWdCL0gsS0FBS1osTUFBTTJJLEVBQWlCbEMsRUFBYyxDQUFDLFFBQVNvQyxFQUFJOUssT0FBTzNPLElBQUksQ0FBQyxDQUFFLEVBQ3RHLEVBbENKLElBQStDc1osRUFBM0NDLEdBbUNPQSxFQWpDUCxTQUFTQSxJQUVMLElBREEsSUFBSU4sRUFBTyxHQUNGMUQsRUFBSyxFQUFHQSxFQUFLOUssVUFBVXBJLE9BQVFrVCxDQUFFLEdBQ3RDMEQsRUFBSzFELEdBQU05SyxVQUFVOEssR0FFekIsSUFBSTVTLEVBQVEyVyxFQUFPMUksTUFBTTVRLEtBQU1pWixDQUFJLEdBQUtqWixLQUV4QyxPQURBZ0wsT0FBTzJGLGVBQWVoTyxFQUFPNFcsRUFBZ0J4WCxTQUFTLEVBQy9DWSxDQUNYLENBMkJ5QzJXLEVBb0MzQzNPLE1BbkNFOEwsRUFBVWtELEVBQWVMLENBQU0sRUFVL0J0TyxPQUFPNEUsZUFBZStKLEVBQWUzSixPQUFPd0osUUFBUyxDQUNqRHJOLElBQUssV0FDRCxPQUFPd04sQ0FDWCxFQUNBMU0sV0FBWSxHQUNaRCxhQUFjLEVBQ2xCLENBQUMsRUFDRDJNLEVBQWM1WCxVQUFVNE0sT0FBUyxXQUU3QixJQURBLElBQUk4SyxFQUFNLEdBQ0RsRSxFQUFLLEVBQUdBLEVBQUs5SyxVQUFVcEksT0FBUWtULENBQUUsR0FDdENrRSxFQUFJbEUsR0FBTTlLLFVBQVU4SyxHQUV4QixPQUFPK0QsRUFBT3ZYLFVBQVU0TSxPQUFPaUMsTUFBTTVRLEtBQU15WixDQUFHLENBQ2xELEVBQ0FFLEVBQWM1WCxVQUFVMlgsUUFBVSxXQUU5QixJQURBLElBQUlELEVBQU0sR0FDRGxFLEVBQUssRUFBR0EsRUFBSzlLLFVBQVVwSSxPQUFRa1QsQ0FBRSxHQUN0Q2tFLEVBQUlsRSxHQUFNOUssVUFBVThLLEdBRXhCLE9BQ1csSUFEUSxJQUFma0UsRUFBSXBYLFFBQWdCc0ksTUFBTWEsUUFBUWlPLEVBQUksRUFBRSxFQUM1QkUsRUFBY25JLEtBQUtaLE1BQU0rSSxFQUFldEMsRUFBYyxDQUFDLFFBQVNvQyxFQUFJLEdBQUc5SyxPQUFPM08sSUFBSSxDQUFDLENBQUUsRUFFekYyWixFQUFjbkksS0FBS1osTUFBTStJLEVBQWV0QyxFQUFjLENBQUMsUUFBU29DLEVBQUk5SyxPQUFPM08sSUFBSSxDQUFDLENBQUUsRUFDbEcsRUFsQ0osSUFBNkNzWixFQUF6Q0ssR0FtQ09BLEVBakNQLFNBQVNBLElBRUwsSUFEQSxJQUFJVixFQUFPLEdBQ0YxRCxFQUFLLEVBQUdBLEVBQUs5SyxVQUFVcEksT0FBUWtULENBQUUsR0FDdEMwRCxFQUFLMUQsR0FBTTlLLFVBQVU4SyxHQUV6QixJQUFJNVMsRUFBUTJXLEVBQU8xSSxNQUFNNVEsS0FBTWlaLENBQUksR0FBS2paLEtBRXhDLE9BREFnTCxPQUFPMkYsZUFBZWhPLEVBQU9nWCxFQUFjNVgsU0FBUyxFQUM3Q1ksQ0FDWCxDQTBSSixTQUFTaVgsS0FDTCxPQUFPLFNBQXFDQyxHQUNqQ0MsSUFLYTVELEVBQWUsVUFBUDhCLEdBRE42QixFQUFWLFVBQVpBLEVBSjRCQSxHQUlJLEdBQzNCQSxHQUFRM0QsUUFBc0M4QixFQUNuRCtCLEdBRDRERixFQUFRRyxlQUFpRUgsRUFBUUksa0JBQXVFSixFQUFRSyxtQkFDMU0sSUFBSVgsSUFnQzFCLE9BL0JJckQsSUFYZ0IsV0FBYixPQVlXQSxFQUNWNkQsRUFBZ0JySyxLQUFLLEVBQWUsRUFHcENxSyxFQUFnQnJLLEtBQUssR0FBZ0J5RyxrQkFBa0JELEVBQU1ELGFBQWEsQ0FBQyxHQTBCNUU4RCxDQXJDUCxDQUNKLENBcW9CeUIsU0FBckJJLEdBQStCaFUsR0FDL0IsR0FBcUIsVUFBakIsT0FBT0EsR0FBZ0MsT0FBVkEsRUFVakMsTUFBTyxDQUFFaVUsUUFBU25JLE9BQU85TCxDQUFLLENBQUUsRUFSNUIsSUFEQSxJQUFJa1UsRUFBYyxHQUNUOUUsRUFBSyxFQUFHK0UsRUFBcUJDLEdBQWtCaEYsRUFBSytFLEVBQW1CalksT0FBUWtULENBQUUsR0FBSSxDQUMxRixJQUFJdFQsRUFBV3FZLEVBQW1CL0UsR0FDSCxVQUEzQixPQUFPcFAsRUFBTWxFLEtBQ2JvWSxFQUFZcFksR0FBWWtFLEVBQU1sRSxHQUV0QyxDQUNBLE9BQU9vWSxDQUdmLENBM0NBLElBQUlHLEdBQWMsbUVBQ2RDLEdBQVMsU0FBVXJWLEdBSW5CLElBRkEsSUFBSXNWLEVBQUssR0FDTDlPLEVBRm1CeEcsRUFBVixTQUFUQSxFQUEwQixHQUV0QkEsRUFDRHdHLENBQUMsSUFDSjhPLEdBQU1GLEdBQTRCLEdBQWhCclIsS0FBS0UsT0FBTyxFQUFTLEdBRTNDLE9BQU9xUixDQUNYLEVBRUlILEdBQW1CLENBQ25CLE9BQ0EsVUFDQSxRQUNBLFFBRUFJLEdBQ0EsU0FBeUJ4QixFQUFTQyxHQUM5QnBaLEtBQUttWixRQUFVQSxFQUNmblosS0FBS29aLEtBQU9BLENBQ2hCLEVBR0F3QixHQUNBLFNBQXlCekIsRUFBU0MsR0FDOUJwWixLQUFLbVosUUFBVUEsRUFDZm5aLEtBQUtvWixLQUFPQSxDQUNoQixFQTBLQXlCLEdBQWtCQyxVQUFZLFdBQWMsT0FBT0QsRUFBbUIsRUF6SnRFLFNBQVNBLEdBQWtCRSxFQUFZQyxFQUFnQm5CLEdBQ25ELElBQUl0QixFQUFZTyxFQUFhaUMsRUFBYSxhQUFjLFNBQVU1QixFQUFTOEIsRUFBV25GLEVBQUtzRCxHQUFRLE1BQU8sQ0FDdEdELFFBQVNBLEVBQ1RDLEtBQU1oRCxHQUFjMEIsRUFBZSxHQUFJc0IsR0FBUSxFQUFFLEVBQUcsQ0FDaER0RCxJQUFLQSxFQUNMbUYsVUFBV0EsRUFDWEMsY0FBZSxXQUNuQixDQUFDLENBQ0osQ0FBRyxDQUFDLEVBQ0RDLEVBQVVyQyxFQUFhaUMsRUFBYSxXQUFZLFNBQVVFLEVBQVduRixFQUFLc0QsR0FBUSxNQUFPLENBQ3pGRCxRQUFTLE9BQ1RDLEtBQU1oRCxHQUFjMEIsRUFBZSxHQUFJc0IsR0FBUSxFQUFFLEVBQUcsQ0FDaER0RCxJQUFLQSxFQUNMbUYsVUFBV0EsRUFDWEMsY0FBZSxTQUNuQixDQUFDLENBQ0osQ0FBRyxDQUFDLEVBQ0QxQyxFQUFXTSxFQUFhaUMsRUFBYSxZQUFhLFNBQVUxQixFQUFPNEIsRUFBV25GLEVBQUtxRCxFQUFTQyxHQUFRLE1BQU8sQ0FDM0dELFFBQVNBLEVBQ1RFLE9BQVFRLEdBQVdBLEVBQVF1QixnQkFBa0JqQixJQUFvQmQsR0FBUyxVQUFVLEVBQ3BGRCxLQUFNaEQsR0FBYzBCLEVBQWUsR0FBSXNCLEdBQVEsRUFBRSxFQUFHLENBQ2hEdEQsSUFBS0EsRUFDTG1GLFVBQVdBLEVBQ1hJLGtCQUFtQixDQUFDLENBQUNsQyxFQUNyQitCLGNBQWUsV0FDZkksUUFBbUQsZ0JBQWhDLE1BQVRqQyxFQUFnQixPQUFTQSxFQUFNM1gsTUFDekM2WixVQUFxRCxvQkFBaEMsTUFBVGxDLEVBQWdCLE9BQVNBLEVBQU0zWCxLQUMvQyxDQUFDLENBQ0osQ0FBRyxDQUFDLEVBRUQ4WixFQUFnQyxhQUEzQixPQUFPQyxnQkFBa0NBLGlCQWtCOUNDLEVBQVEzWixVQUFVNFosTUFBUSxhQVFuQkQsR0F6QlAsU0FBU0EsSUFDTDFiLEtBQUs0YixPQUFTLENBQ1ZOLFFBQVMsR0FDVDlZLGlCQUFrQixhQUVsQnFaLGNBQWUsV0FDWCxNQUFPLEVBQ1gsRUFDQUMsUUFBUyxhQUVUQyxvQkFBcUIsYUFFckJDLE9BQVEsT0FDUkMsZUFBZ0IsWUFFcEIsQ0FDSixDQW1HSixPQUFPalIsT0FBT2tSLE9BeEZkLFNBQXVCcEcsR0FDbkIsT0FBTyxTQUFVdlMsRUFBVUcsRUFBVXlZLEdBQ2pDLElBRUlDLEVBRkFuQixFQUF3QixNQUFYcEIsR0FBMkJBLEVBQVF3QyxZQUFleEMsRUFBUXdDLFlBQVl2RyxDQUFHLEVBQUkyRSxHQUFPLEVBQ2pHNkIsRUFBa0IsSUFBSWQsRUFHMUIsU0FBU0csRUFBTUssR0FDWEksRUFBY0osRUFDZE0sRUFBZ0JYLE1BQU0sQ0FDMUIsQ0FDQSxJQUFJWSxFQUFXLFdBQ1gsT0FBT3RFLEdBQVFqWSxLQUFNLEtBQU0sV0FDdkIsSUFBWXdjLEVBQWFDLEVBQWlCQyxFQUFnQkMsRUFDMUQsT0FBT2hHLEdBQVkzVyxLQUFNLFNBQVVnWSxHQUMvQixPQUFRQSxFQUFHbkIsT0FDUCxLQUFLLEVBR0QsT0FGQW1CLEVBQUdqQixLQUFLckgsS0FBSyxDQUFDLEVBQUcsRUFBRyxDQUFFLEVBQUUsRUFDeEIrTSxFQUF5RSxPQUF0REcsRUFBZ0IsTUFBWC9DLEVBQWtCLE9BQVNBLEVBQVEwQixXQUFxQixPQUFTcUIsRUFBR3pSLEtBQUswTyxFQUFTL0QsRUFBSyxDQUFFcFMsU0FBVUEsRUFBVXlZLE1BQU9BLENBQU0sQ0FBQyxFQTJGbEssUUFERGhXLEVBekZnQ3NXLElBMEZOLFVBQWpCLE9BQU90VyxHQUE0QyxZQUF0QixPQUFPQSxFQUFNdUwsS0ExRk0sQ0FBQyxFQUFhLEdBQ2hELENBQUMsRUFBYStLLEdBQ3pCLEtBQUssRUFDREEsRUFBa0J6RSxFQUFHbEIsS0FBSyxFQUMxQmtCLEVBQUduQixNQUFRLEVBQ2YsS0FBSyxFQUNELEdBQXdCLEtBQXBCNEYsR0FBNkJILEVBQWdCVixPQUFPTixRQUNwRCxLQUFNLENBQ0Y1WixLQUFNLGlCQUNOMFksUUFBUyxvREFDYixFQVFKLE9BTEFzQyxFQUFpQixJQUFJakwsUUFBUSxTQUFVdkQsRUFBR29LLEdBQVUsT0FBT2dFLEVBQWdCVixPQUFPcFosaUJBQWlCLFFBQVMsV0FBYyxPQUFPOFYsRUFBTyxDQUNwSTVXLEtBQU0sYUFDTjBZLFFBQVNnQyxHQUFlLFNBQzVCLENBQUMsQ0FBRyxDQUFDLENBQUcsQ0FBQyxFQUNUN1ksRUFBUzRYLEVBQVFGLEVBQVduRixFQUFpRSxPQUEzRCtHLEVBQWdCLE1BQVhoRCxFQUFrQixPQUFTQSxFQUFRaUQsZ0JBQTBCLE9BQVNELEVBQUcxUixLQUFLME8sRUFBUyxDQUFFb0IsVUFBV0EsRUFBV25GLElBQUtBLENBQUksRUFBRyxDQUFFcFMsU0FBVUEsRUFBVXlZLE1BQU9BLENBQU0sQ0FBQyxDQUFDLENBQUMsRUFDak0sQ0FBQyxFQUFhMUssUUFBUXNMLEtBQUssQ0FDMUJMLEVBQ0FqTCxRQUFRNEcsUUFBUTJDLEVBQWVsRixFQUFLLENBQ2hDdlMsU0FBVUEsRUFDVkcsU0FBVUEsRUFDVnlZLE1BQU9BLEVBQ1BsQixVQUFXQSxFQUNYVyxPQUFRVSxFQUFnQlYsT0FDeEJELE1BQU9BLEVBQ1BxQixnQkFBaUIsU0FBVTdXLEVBQU9pVCxHQUM5QixPQUFPLElBQUl1QixHQUFnQnhVLEVBQU9pVCxDQUFJLENBQzFDLEVBQ0E2RCxpQkFBa0IsU0FBVTlXLEVBQU9pVCxHQUMvQixPQUFPLElBQUl3QixHQUFnQnpVLEVBQU9pVCxDQUFJLENBQzFDLENBQ0osQ0FBQyxDQUFDLEVBQUUxSCxLQUFLLFNBQVV3TCxHQUNmLEdBQUlBLGFBQWtCdkMsR0FDbEIsTUFBTXVDLEVBRVYsT0FBSUEsYUFBa0J0QyxHQUNYckMsRUFBVTJFLEVBQU8vRCxRQUFTOEIsRUFBV25GLEVBQUtvSCxFQUFPOUQsSUFBSSxFQUV6RGIsRUFBVTJFLEVBQVFqQyxFQUFXbkYsQ0FBRyxDQUMzQyxDQUFDLEVBQ0osR0FDVCxLQUFLLEVBRUQsT0FEQTBHLEVBQWN4RSxFQUFHbEIsS0FBSyxFQUNmLENBQUMsRUFBYSxHQUN6QixLQUFLLEVBR0QsT0FGQTZGLEVBQVEzRSxFQUFHbEIsS0FBSyxFQUNoQjBGLEVBQWNHLGFBQWlCaEMsR0FBa0JuQyxFQUFTLEtBQU15QyxFQUFXbkYsRUFBSzZHLEVBQU14RCxRQUFTd0QsRUFBTXZELElBQUksRUFBSVosRUFBU21FLEVBQU8xQixFQUFXbkYsQ0FBRyxFQUNwSSxDQUFDLEVBQWEsR0FDekIsS0FBSyxFQUtELE9BSmUrRCxHQUFXLENBQUNBLEVBQVFzRCw0QkFBOEIzRSxFQUFTNVgsTUFBTTRiLENBQVcsR0FBS0EsRUFBWXBELEtBQUttQyxXQUU3R2hZLEVBQVNpWixDQUFXLEVBRWpCLENBQUMsRUFBY0EsRUFDOUIsQ0FpQzVCLElBQW9CclcsQ0FoQ0ksQ0FBQyxDQUNMLENBQUMsQ0FDTCxFQUFFLEVBQ0YsT0FBTzZFLE9BQU9rUixPQUFPSyxFQUFVLENBQzNCWixNQUFPQSxFQUNQVixVQUFXQSxFQUNYbkYsSUFBS0EsRUFDTHNILE9BQVEsV0FDSixPQUFPYixFQUFTN0ssS0FBSzJMLEVBQVksQ0FDckMsQ0FDSixDQUFDLENBQ0wsQ0FDSixFQUNvQyxDQUNoQ2xDLFFBQVNBLEVBQ1QzQyxTQUFVQSxFQUNWRCxVQUFXQSxFQUNYd0MsV0FBWUEsQ0FDaEIsQ0FBQyxDQUNMLENBSUosU0FBU3NDLEdBQWFqSixHQUNsQixHQUFJQSxFQUFPZ0YsTUFBUWhGLEVBQU9nRixLQUFLaUMsa0JBQzNCLE1BQU1qSCxFQUFPK0UsUUFFakIsR0FBSS9FLEVBQU9pRixNQUNQLE1BQU1qRixFQUFPaUYsTUFFakIsT0FBT2pGLEVBQU8rRSxPQUNsQixDQXlQYW5PLE9BQU9rUixPQUVoQm9CLEVBQU0scUJBOElReEUsRUFBYXdFLEVBQU0sTUFBTSxFQUNuQnhFLEVBQWF3RSxFQUFNLFlBQVksRUFDbEN4RSxFQUFhd0UsRUFBTSxTQUFTLEVBa0xFLFlBQTFCLE9BQU9DLGdCQUFnQ0EsZUFBZS9MLEtBQXVCLGFBQWxCLE9BQU9tSCxPQUF5QkEsT0FBMkIsU0FBWCxFQUFBOUssRUFBeUIsRUFBQUEsRUFBUzJQLFVBQVUsRUFHNUtDLEVBQXVCLFNBQVVDLEdBQ2pDLE9BQU8sU0FBVUMsR0FDYkMsV0FBV0QsRUFBUUQsQ0FBTyxDQUM5QixDQUNKLEVBQzRCLGFBQWxCLE9BQU8vRSxRQUEwQkEsT0FBT2tGLHVCQUF1REosRUFBcUIsRUFBRSxFQW9EaEksRUFBVSxFLGNSMTlESHpZLElBQUkxQixJUWtsQmF1VyxJQUNwQixJQUVJaUUsRUFGQUMsRUFBOEJuRSxHQUEwQixFQUNuQnZHLEVBQWlCLFVBQVAySyxHQUF0QmhHLEVBQXBCNkIsR0FBVyxJQUFZeEcsU0FBbUMsT0FBUzJLLEVBQXdCQyxFQUFvQixVQUFQQyxFQUE1QmxHLEVBQUdpRyxZQUF5Q0YsRUFBNEIsRUFBSUcsRUFBc0JDLEVBQWtCLFVBQVBDLEVBQXhCcEcsRUFBR21HLFdBQTRDQyxFQUE0QjlLLEVBQXdCLFVBQVArSyxFQUFwQ3JHLEVBQUcxRSxnQkFBaUQsT0FBUytLLEVBQXVCQyxFQUFtQixVQUFQQyxFQUExQnZHLEVBQUdzRyxXQUF1QyxPQUFTQyxFQUUzVixHQUF1QixZQUFuQixPQUFPbEwsRUFDUHlLLEVBQWN6SyxNQUViLElBQUksSUFBY0EsQ0FBTyxFQUkxQixNQUFNLElBQUl6SSxNQUFNLDBIQUEwSCxFQUgxSWtULEVBQWNoSixHQUFnQnpCLENBQU8sQ0FJekMsQ0EyQkEsTUF6QitCLFlBQTNCLE9BREFtTCxFQUFrQlAsS0FFbEJPLEVBQWtCQSxFQUFnQlQsQ0FBMkIsR0FRN0RVLEVGbURSLFdBQ0UsSUFBSyxJQUFJN0ksRUFBT25MLFVBQVVwSSxPQUFRcWMsRUFBYyxJQUFJL1QsTUFBTWlMLENBQUksRUFBR0osRUFBTyxFQUFHQSxFQUFPSSxFQUFNSixDQUFJLEdBQzFGa0osRUFBWWxKLEdBQVEvSyxVQUFVK0ssR0FHaEMsT0FBTyxTQUFVcEMsR0FDZixPQUFPLFdBQ0wsSUFBSTlQLEVBQVE4UCxFQUFZeEMsTUFBTSxPQUFRbkcsU0FBUyxFQUUzQ2tVLEVBQVksV0FDZCxNQUFNLElBQUkvVCxNQUE4QzBILEVBQXVCLEVBQUUsQ0FBaUksQ0FDcE4sRUFFSXNNLEVBQWdCLENBQ2xCbGIsU0FBVUosRUFBTUksU0FDaEJILFNBQVUsV0FDUixPQUFPb2IsRUFBVS9OLE1BQU0sT0FBUW5HLFNBQVMsQ0FDMUMsQ0FDRixFQUNJb1UsRUFBUUgsRUFBWTdULElBQUksU0FBVW9ULEdBQ3BDLE9BQU9BLEVBQVdXLENBQWEsQ0FDakMsQ0FBQyxFQUNERCxFQUFZaEosRUFBUS9FLE1BQU0sT0FBUWlPLENBQUssRUFBRXZiLEVBQU1DLFFBQVEsRUFDdkQsT0FBTyxHQUFjLEdBQWMsR0FBSUQsQ0FBSyxFQUFHLEdBQUksQ0FDakRDLFNBQVVvYixDQUNaLENBQUMsQ0FDSCxDQUNGLENBQ0YsRUUvRTZDL04sTUFBTSxPQUFRNE4sQ0FBZSxFQUNsRU0sRUFBZW5KLEVBQ2Z3SSxJQUNBVyxFQUFlcEcsR0FBb0JaLEVBQWUsQ0FDOUNpSCxNQUFPLEVBQ1gsRUFBdUIsVUFBcEIsT0FBT1osR0FBeUJBLENBQVEsQ0FBQyxHQUU1Q2EsRUFBbUIsSUFBSXJGLEdBQWM4RSxDQUFrQixFQUN2RFEsRUFBaUJELEVBQ2pCclUsTUFBTWEsUUFBUThTLENBQVMsRUFDdkJXLEVBQWlCNUgsRUFBYyxDQUFDb0gsR0FBcUJILENBQVMsRUFFcEMsWUFBckIsT0FBT0EsSUFDWlcsRUFBaUJYLEVBQVVVLENBQWdCLEdBR3hDNUwsR0FBWTBLLEVBQWF4SyxFQURUd0wsRUFBYWxPLE1BQU0sT0FBUXFPLENBQWMsQ0FDQSxDQUNwRSxHUjFuQmtDLENBQzlCNUwsUUFBUyxDQUNMM04sb0JTTk8sU0FBNkJZLEVBQVEsR0FBSThOLEdBRXBELE9BQVFBLEVBQU81USxNQUNYLElBQUssNkJBQ0QsTUFBTyxDQUNILEdBQUc4QyxHQUNGOE4sRUFBTzFTLE1BQU8sQ0FDWEEsS0FBTTBTLEVBQU8xUyxLQUNiRyxFQUFHdVMsRUFBT3ZTLEVBQ1ZDLEVBQUdzUyxFQUFPdFMsRUFDVmhDLE1BQU9zVSxFQUFPdFUsTUFDZEMsT0FBUXFVLEVBQU9yVSxNQUNuQixDQUNKLEVBRUosSUFBSyw2QkFDRCxNQUFPLENBQUUsR0FBR3VHLEdBQ1A4TixFQUFPMVMsTUFBTyxDQUNYLEdBQUc0RSxFQUFNOE4sRUFBTzFTLE1BQ2hCc0YsT0FBUW9OLEVBQU9wTixNQUNuQixDQUFFLEVBRVYsSUFBSyw2QkFDRCxJQUFNa1ksRUFBYyxDQUFDLEdBQUc1WSxDQUFLLEVBRTdCLE9BREEsT0FBTzRZLEVBQVk5SyxFQUFPMVMsTUFDbkJ3ZCxFQUVYLElBQUssK0JBQ0QsTUFBTyxDQUFFLEdBQUc1WSxHQUNQOE4sRUFBTzFTLE1BQU8sQ0FDWCxHQUFHNEUsRUFBTThOLEVBQU8xUyxNQUNoQjVCLE1BQU8sT0FDUEMsc0JBQXVCLFVBQ3ZCOEIsRUFBRyxNQUNIQyxFQUFNLEtBQUgsSUFDUCxDQUFFLEVBRVYsSUFBSywrQkFDRCxNQUFPLENBQUUsR0FBR3dFLEdBQ1A4TixFQUFPMVMsTUFBTyxDQUNYLEdBQUc0RSxFQUFNOE4sRUFBTzFTLE1BQ2hCRyxFQUFHdVMsRUFBT3ZTLEVBQ1ZDLEVBQUdzUyxFQUFPdFMsQ0FDZCxDQUFFLEVBRVYsSUFBSywyQkFDRCxNQUFPLENBQUUsR0FBR3dFLEdBQ1A4TixFQUFPMVMsTUFBTyxDQUNYLEdBQUc0RSxFQUFNOE4sRUFBTzFTLE1BQ2hCNUIsTUFBT3NVLEVBQU90VSxNQUNkQyxPQUFRcVUsRUFBT3JVLE1BQ25CLENBQUUsRUFFVixRQUNJLE1BQU8sQ0FBRSxHQUFHdUcsQ0FBTSxDQUMxQixDQUNKLEVUakRRNkQsa0JVRE8sU0FBMkI3RCxFQUFRLENBQzlDOEQsUUFBUyxHQUNUMUksS0FBTSxHQUNOd0UsT0FBUSxHQUNSaEQsY0FBZSxDQUFFckIsRUFBRyxFQUFHQyxFQUFHLENBQUUsQ0FDaEMsRUFBR3NTLEdBQ0MsT0FBT0EsRUFBTzVRLE1BQ1YsSUFBSywwQkFDRCxNQUFPLENBQ0gsR0FBRzhDLEVBQ0g4RCxRQUFTLEdBQ1QxSSxLQUFNMFMsRUFBTzFTLEtBQ2J3QixjQUFlLENBQ1hyQixFQUFHdVMsRUFBT2xSLGNBQWNyQixFQUN4QkMsRUFBR3NTLEVBQU9sUixjQUFjcEIsQ0FDNUIsQ0FDSixFQUNKLElBQUssd0JBQ0QsTUFBTyxDQUNILEdBQUd3RSxFQUNIOEQsUUFBUyxFQUNiLEVBQ0osUUFDSSxPQUFPOUQsQ0FDZixDQUNKLEVWdkJRWSxxQldGUSxTQUE4QlosRUFBUSxDQUFFNUUsS0FBTSxFQUFHLEVBQUcwUyxHQUNoRSxNQUNTLFVBREZBLEVBQU81USxLQUlDOEMsRUFGQSxDQUFFLEdBQUdBLEVBQU81RSxLQUFNMFMsRUFBTzFTLElBQUssQ0FJakQsRVhKUWlDLG9CWVhPLFNBQThCMkMsRUFBUSxDQUNqRHZDLFVBQVcsR0FDWHJDLEtBQU0sR0FDTndCLGNBQWUsR0FDZmhCLGtCQUFtQixFQUN2QixFQUFHa1MsR0FDQyxPQUFPQSxFQUFPNVEsTUFDVixJQUFLLDRCQUNELE1BQU0sQ0FDRk8sVUFBVyxHQUNYckMsS0FBTTBTLEVBQU8xUyxLQUNid0IsY0FBZWtSLEVBQU9sUixjQUN0QmhCLGtCQUFtQmtTLEVBQU9sUyxpQkFDOUIsRUFDSixJQUFLLDBCQUNELE1BQU8sQ0FDSDZCLFVBQVcsR0FDWHJDLEtBQU0sR0FDTndCLGNBQWUsR0FDZmhCLGtCQUFtQixFQUN2QixFQUNKLFFBQVMsTUFBTyxDQUFDLEdBQUdvRSxDQUFLLENBQzdCLENBQ0osQ1pYSSxDQUNKLENBQUMsRUFFRyxHQUFFLEMsR2FkRjZZLEVBQTJCLEdBRy9CLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCxFQUF5QkUsR0FDNUMsT0FBcUI3TCxLQUFBQSxJQUFqQjhMLElBSUFDLEVBQVNKLEVBQXlCRSxHQUFZLENBR2pERyxRQUFTLEVBQ1YsRUFHQUMsRUFBb0JKLEdBQVVFLEVBQVFBLEVBQU9DLFFBQVNKLENBQW1CLEdBR2xFRyxFQUFPQyxPQUNmLENDckJBSixFQUFvQmpTLEVBQUksQ0FBQ3FTLEVBQVNFLEtBQ2pDLElBQUksSUFBSXhLLEtBQU93SyxFQUNYTixFQUFvQnZULEVBQUU2VCxFQUFZeEssQ0FBRyxHQUFLLENBQUNrSyxFQUFvQnZULEVBQUUyVCxFQUFTdEssQ0FBRyxHQUMvRWxLLE9BQU80RSxlQUFlNFAsRUFBU3RLLEVBQUssQ0FBRWpJLFdBQVksR0FBTWQsSUFBS3VULEVBQVd4SyxFQUFLLENBQUMsQ0FHakYsRUNQQWtLLEVBQW9CdlIsRUFBSSxXQUN2QixHQUEwQixVQUF0QixPQUFPMlAsV0FBeUIsT0FBT0EsV0FDM0MsSUFDQyxPQUFPeGQsTUFBUSxJQUFJcUwsU0FBUyxhQUFhLEVBQUUsQ0FHNUMsQ0FGRSxNQUFPNUksR0FDUixHQUFzQixVQUFsQixPQUFPa1csT0FBcUIsT0FBT0EsTUFDeEMsQ0FDQSxFQUFFLEVDUEh5RyxFQUFvQnZULEVBQUksQ0FBQ3FILEVBQUs2RSxJQUFVL00sT0FBT2pKLFVBQVVtSixlQUFlQyxLQUFLK0gsRUFBSzZFLENBQUssRUNDdkZxSCxFQUFvQjVVLEVBQUksSUFDRixhQUFsQixPQUFPd0YsUUFBMEJBLE9BQU8yUCxhQUMxQzNVLE9BQU80RSxlQUFlNFAsRUFBU3hQLE9BQU8yUCxZQUFhLENBQUV4WixNQUFPLFFBQVMsQ0FBQyxFQUV2RTZFLE9BQU80RSxlQUFlNFAsRUFBUyxhQUFjLENBQUVyWixNQUFPLEVBQUssQ0FBQyxDQUM3RCxFQ0hBaVosRUFBb0IsR0FBRyxFQUNHQSxFQUFvQixHQUFHLEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZW1vLy4vc3JjL2pzL21vZGFsL3Jlc2l6ZS5qcyIsIndlYnBhY2s6Ly9tZW1vLy4vc3JjL2pzL21vZGFsL2J1dHRvbkV2bnQuanMiLCJ3ZWJwYWNrOi8vbWVtby8uL3NyYy9qcy9hcHAuanMiLCJ3ZWJwYWNrOi8vbWVtby8uL3NyYy9qcy9jcmVhdG9yL21lbW9DcmVhdG9yLmpzIiwid2VicGFjazovL21lbW8vLi9zcmMvanMvbW9kYWwvZHJhZ25kcm9wLmpzIiwid2VicGFjazovL21lbW8vLi9ub2RlX21vZHVsZXMvaW1tZXIvZGlzdC9pbW1lci5lc20ubWpzIiwid2VicGFjazovL21lbW8vLi9zcmMvanMvcmVkdWNlci9zdG9yZS5qcyIsIndlYnBhY2s6Ly9tZW1vLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZi5qcyIsIndlYnBhY2s6Ly9tZW1vLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvUHJvcGVydHlLZXkuanMiLCJ3ZWJwYWNrOi8vbWVtby8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b1ByaW1pdGl2ZS5qcyIsIndlYnBhY2s6Ly9tZW1vLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiLCJ3ZWJwYWNrOi8vbWVtby8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly9tZW1vLy4vbm9kZV9tb2R1bGVzL3JlZHV4L2VzL3JlZHV4LmpzIiwid2VicGFjazovL21lbW8vLi9ub2RlX21vZHVsZXMvcmVkdXgtdGh1bmsvZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVtby8uL25vZGVfbW9kdWxlcy9AcmVkdXhqcy90b29sa2l0L2Rpc3QvcmVkdXgtdG9vbGtpdC5lc20uanMiLCJ3ZWJwYWNrOi8vbWVtby8uL3NyYy9qcy9yZWR1Y2VyL21vZGFsTXV0YXRlT2JzZXJ2ZXIuanMiLCJ3ZWJwYWNrOi8vbWVtby8uL3NyYy9qcy9yZWR1Y2VyL21vZGFsRHJhZ09ic2VydmVyLmpzIiwid2VicGFjazovL21lbW8vLi9zcmMvanMvcmVkdWNlci9mb2N1c2VkTW9kYWxPYnNlcnZlci5qcyIsIndlYnBhY2s6Ly9tZW1vLy4vc3JjL2pzL3JlZHVjZXIvbW9kYWxSZXNpemVPYnNlcnZlci5qcyIsIndlYnBhY2s6Ly9tZW1vL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL21lbW8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL21lbW8vd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly9tZW1vL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vbWVtby93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL21lbW8vd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5BVl9IRUlHSFQgfSBmcm9tIFwiLi4vYXBwXCI7XHJcbmltcG9ydCB7IHN0b3JlIH0gZnJvbSBcIi4uL3JlZHVjZXIvc3RvcmVcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBSZXNpemUod2lkdGggPSBcIjIwMHB4XCIsIGhlaWdodCA9IFwiMjMwcHhcIil7XHJcbiAgICB0aGlzLkNPUk5FUl9SRVNJWkVSID0ge1xyXG4gICAgICAgIExFRlQgOiBcImxlZnRcIixcclxuICAgICAgICBUT1AgOiBcInRvcFwiLFxyXG4gICAgICAgIFRPUF9MRUZUIDogXCJ0b3AtbGVmdFwiLFxyXG4gICAgICAgIFRPUF9SSUdIVCA6IFwidG9wLXJpZ2h0XCIsXHJcbiAgICAgICAgUklHSFQgOiBcInJpZ2h0XCIsXHJcbiAgICAgICAgQk9UVE9NIDogXCJib3R0b21cIixcclxuICAgICAgICBCT1RUT01fTEVGVCA6IFwiYm90dG9tLWxlZnRcIixcclxuICAgICAgICBCT1RUT01fUklHSFQgOiBcImJvdHRvbS1yaWdodFwiLFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLm1vZGFsTWluaW11bVNpemUgPSB7XHJcbiAgICAgICAgd2lkdGg6IE51bWJlcih3aWR0aC5tYXRjaCgvXFxkKy9nKVswXSksXHJcbiAgICAgICAgaGVpZ2h0OiBOdW1iZXIoaGVpZ2h0Lm1hdGNoKC9cXGQrL2cpWzBdKSxcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIEBhdXRob3IgSkhMRUVcclxuICAgICogQG1lbWJlciBSZXNpemUjYm9keVxyXG4gICAgKiBAdHlwZSB7RWxlbWVudH1cclxuICAgICogQGRlc2NyaXB0aW9uIFRoZSBib2R5IGVsZW1lbnRcclxuICAgICovXHJcbiAgICB0aGlzLmJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XHJcblxyXG4gICAgdGhpcy5tb2RhbCA9IG51bGw7XHJcbn1cclxuXHJcblxyXG5cclxuLyoqXHJcbiAqIEBhdXRob3IgSkhMRUVcclxuICogQG1lbWJlcm9mIFJlc2l6ZVxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIEluaXRpYWxpemUgZXZlbnRzXHJcbiAqIEByZXR1cm4ge1Jlc2l6ZX1cclxuICovXHJcblJlc2l6ZS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIChtb2RhbCl7XHJcbiAgICB0aGlzLm1vZGFsID0gbW9kYWw7XHJcblxyXG4gICAgLy9tb3VzZSBkb3duIHJlc2l6ZSBjbGljayBzdGFydCBldmVudCB0byBoYW5kbGUgbW9kYWwgcmVzaXplXHJcbiAgICBmb3IoY29uc3QgcHJvcGVydHkgaW4gdGhpcy5DT1JORVJfUkVTSVpFUil7XHJcbiAgICAgICAgY29uc3QgcmVzaXplVHJpZ2dlclByb3AgPSB0aGlzLkNPUk5FUl9SRVNJWkVSW3Byb3BlcnR5XTtcclxuICAgICAgICBjb25zdCByZXNpemVUcmlnZ2VycyA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvckFsbChgW2Nvcm5lcj1cIiR7cmVzaXplVHJpZ2dlclByb3B9XCJdYCk7XHJcbiAgICAgICAgaWYocmVzaXplVHJpZ2dlcnMubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgIHJlc2l6ZVRyaWdnZXJzLmZvckVhY2goIHRyaWdnZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgdHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBlID0+IHRoaXMucmVzaXplQ2xpY2tTdGFydEhhbmRsZXIoZSwgdGhpcykpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcblxyXG5SZXNpemUucHJvdG90eXBlLnJlc2l6ZUNsaWNrU3RhcnRIYW5kbGVyID0gZnVuY3Rpb24gKGUsIF90aGlzKXtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0IHJlc2l6ZVRyaWdnZXIgPSBlLmN1cnJlbnRUYXJnZXQ7XHJcbiAgICBjb25zdCByZXNpemVUcmlnZ2VyTmFtZSA9IHJlc2l6ZVRyaWdnZXIucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmRhdGFzZXQubmFtZTtcclxuICAgIGNvbnN0IHJlc2l6ZVRyaWdnZXJQcm9wID0gcmVzaXplVHJpZ2dlci5nZXRBdHRyaWJ1dGUoXCJjb3JuZXJcIik7XHJcblxyXG4gICAgbGV0IG1vdXNlUG9zaXRpb24gPSB7XHJcbiAgICAgICAgeDogZS5wYWdlWCxcclxuICAgICAgICB5OiBlLnBhZ2VZXHJcbiAgICB9O1xyXG5cclxuICAgIF90aGlzLnVwZGF0ZUFzQ3VycmVudChyZXNpemVUcmlnZ2VyTmFtZSwgbW91c2VQb3NpdGlvbiwgcmVzaXplVHJpZ2dlclByb3ApO1xyXG5cclxufVxyXG5cclxuUmVzaXplLnByb3RvdHlwZS51cGRhdGVBc0N1cnJlbnQgPSBmdW5jdGlvbihuYW1lLCBtb3VzZVBvc2l0aW9uLCByZXNpemVUcmlnZ2VyUHJvcCl7XHJcbiAgICBzdG9yZS5kaXNwYXRjaCh7IHR5cGU6IFwiZm9jdXNcIiwgbmFtZSB9KTtcclxuICAgIHN0b3JlLmRpc3BhdGNoKHsgdHlwZTogXCJtb2RhbFJlc2l6ZU9ic2VydmVyL3N0YXJ0XCIsIG5hbWUsIG1vdXNlUG9zaXRpb24sIHJlc2l6ZVRyaWdnZXJQcm9wfSk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgcmVzaXplZCBtb2RhbCBpbmZvcm1hdGlvblxyXG4gKi9cclxuUmVzaXplLnByb3RvdHlwZS5yZXNpemVJbmZvID0gZnVuY3Rpb24gKCl7XHJcbiAgICBjb25zdCBzZWxlY3RWYWx1ZSA9IHN0YXRlID0+IHN0YXRlLm1vZGFsUmVzaXplT2JzZXJ2ZXI7XHJcbiAgICBjb25zdCByZXNpemVJbmZvID0gc2VsZWN0VmFsdWUoc3RvcmUuZ2V0U3RhdGUoKSlcclxuICAgIHJldHVybiByZXNpemVJbmZvO1xyXG59XHJcblxyXG5cclxuUmVzaXplLnByb3RvdHlwZS5yZXNpemVkTW9kYWxJbmZvID0gZnVuY3Rpb24gKCl7XHJcbiAgICByZXR1cm4gdGhpcy5nZXRNb2RhbCgpW3RoaXMucmVzaXplSW5mbygpLm5hbWVdO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBzdGF0dXMgb2YgcmVzaXplXHJcbiAqL1xyXG5SZXNpemUucHJvdG90eXBlLmlzTW9kYWxSZXNpemVkID0gZnVuY3Rpb24gKCl7XHJcbiAgICByZXR1cm4gdGhpcy5yZXNpemVJbmZvKCkuaXNSZXNpemVkO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEBhdXRob3IgSkhMRUVcclxuICogQG1lbWJlcm9mIFJlc2l6ZVxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIE1heWJlIG9ubHkgYm9keSBlbGVtZW50IHdvdWxkIG5lZWQgdGhpcyB0byBzdWJzY3JpYmUgaWZcclxuICogICAgICAgICAgICAgIGFueSBvZiBtb2RhbCBoYXMgYmVlbiB0cmlnZ2VyZWQgdG8gYmUgcmVzaXplZC5cclxuICovXHJcbiBSZXNpemUucHJvdG90eXBlLnN1YnNjcmliZUlmUmVzaXplID0gZnVuY3Rpb24oKXtcclxuICAgIHRoaXMuYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBlID0+IHRoaXMucmVzaXplSGFuZGxlcihlLCB0aGlzKSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIYW5kbGUgcmVzaXplIHdoZW4gbW91c2UgbW92ZXNcclxuICovXHJcblJlc2l6ZS5wcm90b3R5cGUucmVzaXplSGFuZGxlciA9IGZ1bmN0aW9uIChlKXtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgaWYodGhpcy5pc01vZGFsUmVzaXplZCgpKXtcclxuICAgICAgICB0aGlzLnJlc2l6ZU1vZGFsKGUpO1xyXG4gICAgfVxyXG4gICAgXHJcbn0gICAgXHJcblxyXG4vKipcclxuKiBjYWxjIHdpZHRoIHdoZW4gbW91c2UgcmVzaXppbmcgcG9zaXRpb24gRE9FUyBlZmZlY3Qgb2YgbW9kYWwgcG9zaXRpb25cclxuKiBAcGFyYW0ge251bWJlcn0gbW91c2VQb3NpdGlvblggLSBlLnBhZ2VYIHdoaWNoIGlzIHRoZSBtb3VzZSB4IHBvc2l0aW9uXHJcbiovXHJcblJlc2l6ZS5wcm90b3R5cGUuZ2V0V2lkdGhGcm9tVW5wb3NpdGlvbmVkTW9kYWwgPSBmdW5jdGlvbihtb3VzZVBvc2l0aW9uWCkge1xyXG4gICBsZXQgd2lkdGggPSAodGhpcy5nZXRPcmlnaW5Qb3NpdGlvbigpLnggKyB0aGlzLmdldE9yaWdpblNpemUoKS53aWR0aCkgLSBtb3VzZVBvc2l0aW9uWDtcclxuXHJcbiAgIHJldHVybiB3aWR0aDtcclxufVxyXG5cclxuIC8qKiBcclxuICogY2FsYyB3aWR0aCB3aGVuIG1vdXNlIHJlc2l6aW5nIHBvc2l0aW9uIERPRVMgTk9UIGVmZmVjdCBvZiBtb2RhbCBwb3NpdGlvblxyXG4gKiBAcGFyYW0ge251bWJlcn0gbW91c2VQb3NpdGlvblggLSBlLnBhZ2VYIHdoaWNoIGlzIHRoZSBtb3VzZSB4IHBvc2l0aW9uXHJcbiAqL1xyXG5SZXNpemUucHJvdG90eXBlLmdldFdpZHRoRnJvbVBvc2l0aW9uZWRNb2RhbCA9IGZ1bmN0aW9uKG1vdXNlUG9zaXRpb25YKSB7XHJcbiAgICBsZXQgd2lkdGggPSBtb3VzZVBvc2l0aW9uWCAtIHRoaXMuZ2V0T3JpZ2luUG9zaXRpb24oKS54O1xyXG4gICAgcmV0dXJuIHdpZHRoO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIGNhbGMgaGVpZ2h0IHdoZW4gbW91c2UgcmVzaXppbmcgcG9zaXRpb24gRE9FUyBlZmZlY3Qgb2YgbW9kYWwgcG9zaXRpb25cclxuICogQHBhcmFtIHtudW1iZXJ9IG1vdXNlUG9zaXRpb25ZIC0gZS5wYWdlWSB3aGljaCBpcyB0aGUgbW91c2UgeSBwb3NpdGlvblxyXG4gKi9cclxuIFJlc2l6ZS5wcm90b3R5cGUuZ2V0SGVpZ2h0RnJvbVVucG9zaXRpb25lZE1vZGFsID0gZnVuY3Rpb24obW91c2VQb3NpdGlvblkpe1xyXG4gICAgbGV0IGhlaWdodCA9ICh0aGlzLmdldE9yaWdpblBvc2l0aW9uKCkueSArIHRoaXMuZ2V0T3JpZ2luU2l6ZSgpLmhlaWdodCkgLSBtb3VzZVBvc2l0aW9uWTtcclxuXHJcblxyXG4gICAgcmV0dXJuIGhlaWdodDtcclxufVxyXG5cclxuLyoqXHJcbiogY2FsYyBoZWlnaHQgd2hlbiBtb3VzZSByZXNpemluZyBwb3NpdGlvbiBET0VTIE5PVCBlZmZlY3Qgb2YgbW9kYWwgcG9zaXRpb25cclxuKiBAcGFyYW0ge251bWJlcn0gbW91c2VQb3NpdGlvblkgLSBlLnBhZ2VZIHdoaWNoIGlzIHRoZSBtb3VzZSB5IHBvc2l0aW9uXHJcbiovXHJcblJlc2l6ZS5wcm90b3R5cGUuZ2V0SGVpZ2h0RnJvbVBvc2l0aW9uZWRNb2RhbCA9IGZ1bmN0aW9uKG1vdXNlUG9zaXRpb25ZKXtcclxuICAgIGxldCBoZWlnaHQgPSBtb3VzZVBvc2l0aW9uWSAtIHRoaXMuZ2V0T3JpZ2luUG9zaXRpb24oKS55O1xyXG4gICAgcmV0dXJuIGhlaWdodDtcclxufVxyXG5cclxuXHJcblxyXG4vKipcclxuICogaWYgd2lkdGggbWluaW11bSA/IHJldHVybiBudWxsIDogc2V0IG1vZGFsIHNpemUgd2l0aCBjaGFuZ2VkIHdpZHRoXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCAtIGNoYW5nZWQgd2lkdGhcclxuICovXHJcblJlc2l6ZS5wcm90b3R5cGUuc2V0U2l6ZVdpdGhXaWR0aCA9IGZ1bmN0aW9uKHdpZHRoKSB7XHJcbiAgICAvL2NoZWNrIGlmIHdpZHRoIDwgbWluIHdpZHRoID0+IHJldHVybjtcclxuICAgIGxldCBpc01pbmltdW0gPSB0aGlzLmNoZWNrSWZNaW5pbXVtV2lkdGgod2lkdGgpO1xyXG4gICAgaWYgKGlzTWluaW11bSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzaXplID0ge1xyXG4gICAgICAgIHdpZHRoLFxyXG4gICAgICAgIGhlaWdodDogdGhpcy5nZXRPcmlnaW5TaXplKCkuaGVpZ2h0LFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gc2l6ZTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4qIGlmIGhlaWdodCBtaW5pbXVtID8gcmV0dXJuIG51bGwgOiBzZXQgbW9kYWwgc2l6ZSB3aXRoIGNoYW5nZWQgaGVpZ2h0XHJcbiogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCAtIGNoYW5nZWQgaGVpZ2h0XHJcbiovXHJcblJlc2l6ZS5wcm90b3R5cGUuc2V0U2l6ZVdpdGhIZWlnaHQgPSBmdW5jdGlvbihoZWlnaHQpe1xyXG4gICAgbGV0IGlzTWluaW11bSA9IHRoaXMuY2hlY2tJZk1pbmltdW1IZWlnaHQoaGVpZ2h0KTtcclxuICAgIFxyXG4gICAgaWYgKGlzTWluaW11bSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgbGV0IHNpemUgPSB7XHJcbiAgICAgICAgd2lkdGg6IHRoaXMuZ2V0T3JpZ2luU2l6ZSgpLndpZHRoLFxyXG4gICAgICAgIGhlaWdodCxcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc2l6ZTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBjaGVjayBpZiByZXNpemVkIHdpZHRoIGlzIG5hcnJvd2VyIHRoYW4gdGhlIHdpZHRoIG9mIG1pbmltdW0gc2l6ZVxyXG4gKiBAcGFyYW0ge251bWJlcn0gd2lkdGggLSByZXNpemVkIHdpZHRoXHJcbiAqL1xyXG5SZXNpemUucHJvdG90eXBlLmNoZWNrSWZNaW5pbXVtV2lkdGggPSBmdW5jdGlvbih3aWR0aCl7XHJcbiAgICBcclxuICAgIHJldHVybiAod2lkdGggPCB0aGlzLm1vZGFsTWluaW11bVNpemUud2lkdGgpID8gdHJ1ZSA6IGZhbHNlO1xyXG59XHJcblxyXG4vKipcclxuICogY2hlY2sgaWYgcmVzaXplZCBoZWlnaHQgaXMgc2hvcnRlciB0aGFuIHRoZSBoZWlnaHQgb2YgbWluaW11bSBzaXplXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHQgLSByZXNpemVkIGhlaWdodFxyXG4gKi9cclxuUmVzaXplLnByb3RvdHlwZS5jaGVja0lmTWluaW11bUhlaWdodCA9IGZ1bmN0aW9uKGhlaWdodCl7XHJcbiAgICByZXR1cm4gKGhlaWdodCA8IHRoaXMubW9kYWxNaW5pbXVtU2l6ZS5oZWlnaHQpID8gdHJ1ZSA6IGZhbHNlO1xyXG59XHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiByZXNpemU6IG1vdXNlIG1vdmUgZXZlbnQgaGFuZGxlclxyXG4gKi9cclxuIFJlc2l6ZS5wcm90b3R5cGUucmVzaXplTW9kYWwgPSBmdW5jdGlvbihlKXtcclxuICAgIGxldCBtb3VzZVBvc2l0aW9uWCA9IGUucGFnZVg7XHJcbiAgICBsZXQgbW91c2VQb3NpdGlvblkgPSBlLnBhZ2VZO1xyXG5cclxuICAgIC8vaWYgbW91c2UgaXMgb24gdGhlIHN0YXR1c2JhciwgZG8gbm90aGluZ1xyXG4gICAgaWYobW91c2VQb3NpdGlvblkgPCBOQVZfSEVJR0hUKXtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy93aGljaCBwYXJ0IHRyaWdnZXJlZCBmcm9tIG1vZGFsXHJcbiAgICBsZXQgcmVzaXplVHJpZ2dlclByb3AgPSB0aGlzLnJlc2l6ZUluZm8oKS5yZXNpemVUcmlnZ2VyUHJvcDsgXHJcblxyXG4gICAgbGV0IGlzV2lkdGhOYXJyb3cgPSBmYWxzZTtcclxuICAgIGxldCBpc0hlaWdodFNob3J0ID0gZmFsc2U7XHJcblxyXG4gICAgbGV0IHdpZHRoID0gMDtcclxuICAgIGxldCBoZWlnaHQ9IDA7XHJcbiAgICBsZXQgc2l6ZSA9IDA7XHJcbiAgICBsZXQgcG9zaXRpb24gPSAwO1xyXG5cclxuICAgIHN3aXRjaChyZXNpemVUcmlnZ2VyUHJvcCl7XHJcbiAgICAgICAgY2FzZSB0aGlzLkNPUk5FUl9SRVNJWkVSLkxFRlQ6XHJcbiAgICAgICAgICAgIHdpZHRoID0gdGhpcy5nZXRXaWR0aEZyb21VbnBvc2l0aW9uZWRNb2RhbChtb3VzZVBvc2l0aW9uWCk7XHJcbiAgICAgICAgICAgIHNpemUgPSB0aGlzLnNldFNpemVXaXRoV2lkdGgod2lkdGgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHNpemUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYm9keS5zdHlsZS5jdXJzb3IgPSBcImV3LXJlc2l6ZVwiO1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb24gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeDogbW91c2VQb3NpdGlvblgsXHJcbiAgICAgICAgICAgICAgICAgICAgeTogdGhpcy5nZXRPcmlnaW5Qb3NpdGlvbigpLnlcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVNb2RhbChzaXplLCBwb3NpdGlvbiwgdGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgdGhpcy5DT1JORVJfUkVTSVpFUi5SSUdIVDpcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHdpZHRoID0gdGhpcy5nZXRXaWR0aEZyb21Qb3NpdGlvbmVkTW9kYWwobW91c2VQb3NpdGlvblgpO1xyXG4gICAgICAgICAgICBzaXplID0gdGhpcy5zZXRTaXplV2l0aFdpZHRoKHdpZHRoKTtcclxuXHJcbiAgICAgICAgICAgIGlmKHNpemUpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVNb2RhbFNpemUoc2l6ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJvZHkuc3R5bGUuY3Vyc29yID0gXCJldy1yZXNpemVcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSB0aGlzLkNPUk5FUl9SRVNJWkVSLkJPVFRPTTpcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGhlaWdodCA9IHRoaXMuZ2V0SGVpZ2h0RnJvbVBvc2l0aW9uZWRNb2RhbChtb3VzZVBvc2l0aW9uWSk7XHJcbiAgICAgICAgICAgIHNpemUgPSB0aGlzLnNldFNpemVXaXRoSGVpZ2h0KGhlaWdodCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZihzaXplKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuYm9keS5zdHlsZS5jdXJzb3IgPSBcIm5zLXJlc2l6ZVwiO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVNb2RhbFNpemUoc2l6ZSk7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIHRoaXMuQ09STkVSX1JFU0laRVIuVE9QOlxyXG4gICAgICAgICAgICAvL2dldCBuZXcgaGVpZ2h0XHJcblxyXG4gICAgICAgICAgICBoZWlnaHQgPSB0aGlzLmdldEhlaWdodEZyb21VbnBvc2l0aW9uZWRNb2RhbChtb3VzZVBvc2l0aW9uWSk7XHJcbiAgICAgICAgICAgIHNpemUgPSB0aGlzLnNldFNpemVXaXRoSGVpZ2h0KGhlaWdodCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoc2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb24gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeDogdGhpcy5nZXRPcmlnaW5Qb3NpdGlvbigpLngsXHJcbiAgICAgICAgICAgICAgICAgICAgeTogbW91c2VQb3NpdGlvblksXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTW9kYWwoc2l6ZSwgcG9zaXRpb24sIHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ib2R5LnN0eWxlLmN1cnNvciA9IFwibnMtcmVzaXplXCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgdGhpcy5DT1JORVJfUkVTSVpFUi5UT1BfUklHSFQ6XHJcbiAgICAgICAgICAgIC8vZ2V0IG5ldyB3aWR0aFxyXG4gICAgICAgICAgICB3aWR0aCA9IHRoaXMuZ2V0V2lkdGhGcm9tUG9zaXRpb25lZE1vZGFsKG1vdXNlUG9zaXRpb25YKTtcclxuICAgICAgICAgICAgLy9nZXQgbmV3IGhlaWdodFxyXG4gICAgICAgICAgICBoZWlnaHQgPSB0aGlzLmdldEhlaWdodEZyb21VbnBvc2l0aW9uZWRNb2RhbChtb3VzZVBvc2l0aW9uWSk7XHJcbiAgICAgICAgICAgIC8vc2V0IG5ldyBwb3NpdGlvblxyXG4gICAgICAgICAgICBwb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgIHg6IHRoaXMuZ2V0T3JpZ2luUG9zaXRpb24oKS54LFxyXG4gICAgICAgICAgICAgICAgeTogbW91c2VQb3NpdGlvblksXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAvL2NoZWNrIG1vZGFsIHNpemVcclxuICAgICAgICAgICAgaXNXaWR0aE5hcnJvdyA9IHRoaXMuY2hlY2tJZk1pbmltdW1XaWR0aCh3aWR0aCk7XHJcbiAgICAgICAgICAgIGlzSGVpZ2h0U2hvcnQgPSB0aGlzLmNoZWNrSWZNaW5pbXVtSGVpZ2h0KGhlaWdodCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoaXNXaWR0aE5hcnJvdyAmJiBpc0hlaWdodFNob3J0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0gXHJcblxyXG4gICAgICAgICAgICB0aGlzLmJvZHkuc3R5bGUuY3Vyc29yID0gXCJuZXN3LXJlc2l6ZVwiO1xyXG5cclxuICAgICAgICAgICAgaWYgKGlzV2lkdGhOYXJyb3cgJiYgIWlzSGVpZ2h0U2hvcnQpIHtcclxuICAgICAgICAgICAgICAgIHdpZHRoID0gdGhpcy5tb2RhbE1pbmltdW1TaXplLndpZHRoO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIGlmICghaXNXaWR0aE5hcnJvdyAmJiBpc0hlaWdodFNob3J0KSB7XHJcbiAgICAgICAgICAgICAgICBzaXplID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5nZXRPcmlnaW5TaXplKCkuaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTW9kYWxTaXplKHNpemUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy9zZXQgbmV3IHNpemVcclxuICAgICAgICAgICAgc2l6ZSA9IHtcclxuICAgICAgICAgICAgICAgIHdpZHRoLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0LFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy51cGRhdGVNb2RhbChzaXplLCBwb3NpdGlvbik7XHJcblxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIHRoaXMuQ09STkVSX1JFU0laRVIuVE9QX0xFRlQ6XHJcblxyXG4gICAgICAgICAgICB3aWR0aCA9IHRoaXMuZ2V0V2lkdGhGcm9tVW5wb3NpdGlvbmVkTW9kYWwobW91c2VQb3NpdGlvblgpO1xyXG4gICAgICAgICAgICBoZWlnaHQgPSB0aGlzLmdldEhlaWdodEZyb21VbnBvc2l0aW9uZWRNb2RhbChtb3VzZVBvc2l0aW9uWSk7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgeDogbW91c2VQb3NpdGlvblgsXHJcbiAgICAgICAgICAgICAgICB5OiBtb3VzZVBvc2l0aW9uWVxyXG4gICAgICAgICAgICAgICAgLy8geTogbW91c2VQb3NpdGlvblkgPCBOQVZfSEVJR0hUID8gTkFWX0hFSUdIVCA6IG1vdXNlUG9zaXRpb25ZLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vY2hlY2sgbW9kYWwgc2l6ZVxyXG4gICAgICAgICAgICBpc1dpZHRoTmFycm93ID0gdGhpcy5jaGVja0lmTWluaW11bVdpZHRoKHdpZHRoKTtcclxuICAgICAgICAgICAgaXNIZWlnaHRTaG9ydCA9IHRoaXMuY2hlY2tJZk1pbmltdW1IZWlnaHQoaGVpZ2h0KTtcclxuICAgICAgICAgICAgaWYgKGlzV2lkdGhOYXJyb3cgJiYgaXNIZWlnaHRTaG9ydCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLmJvZHkuc3R5bGUuY3Vyc29yID0gXCJud3NlLXJlc2l6ZVwiO1xyXG5cclxuICAgICAgICAgICAgaWYgKGlzV2lkdGhOYXJyb3cgJiYgIWlzSGVpZ2h0U2hvcnQpIHtcclxuICAgICAgICAgICAgICAgIHNpemUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMuZ2V0T3JpZ2luU2l6ZSgpLndpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbi54ID0gdGhpcy5nZXRPcmlnaW5Qb3NpdGlvbigpLng7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzV2lkdGhOYXJyb3cgJiYgaXNIZWlnaHRTaG9ydCkge1xyXG4gICAgICAgICAgICAgICAgc2l6ZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aCxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuZ2V0T3JpZ2luU2l6ZSgpLmhlaWdodCxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbi55ID0gdGhpcy5nZXRPcmlnaW5Qb3NpdGlvbigpLnk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvL3NldCBuZXcgc2l6ZVxyXG4gICAgICAgICAgICAgICAgc2l6ZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aCxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTW9kYWwoc2l6ZSwgcG9zaXRpb24pO1xyXG5cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSB0aGlzLkNPUk5FUl9SRVNJWkVSLkJPVFRPTV9SSUdIVDpcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHdpZHRoID0gdGhpcy5nZXRXaWR0aEZyb21Qb3NpdGlvbmVkTW9kYWwobW91c2VQb3NpdGlvblgpO1xyXG4gICAgICAgICAgICBoZWlnaHQgPSB0aGlzLmdldEhlaWdodEZyb21Qb3NpdGlvbmVkTW9kYWwobW91c2VQb3NpdGlvblkpO1xyXG5cclxuICAgICAgICAgICAgaXNXaWR0aE5hcnJvdyA9IHRoaXMuY2hlY2tJZk1pbmltdW1XaWR0aCh3aWR0aCk7XHJcbiAgICAgICAgICAgIGlzSGVpZ2h0U2hvcnQgPSB0aGlzLmNoZWNrSWZNaW5pbXVtSGVpZ2h0KGhlaWdodCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoaXNXaWR0aE5hcnJvdyAmJiBpc0hlaWdodFNob3J0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLmJvZHkuc3R5bGUuY3Vyc29yID0gXCJud3NlLXJlc2l6ZVwiO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLmNoZWNrSWZNaW5pbXVtV2lkdGgod2lkdGgpICYmICh3aWR0aCA9IHRoaXMubW9kYWxNaW5pbXVtU2l6ZS53aWR0aCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tJZk1pbmltdW1IZWlnaHQoaGVpZ2h0KSAmJiAoaGVpZ2h0ID0gdGhpcy5tb2RhbE1pbmltdW1TaXplLmhlaWdodCk7XHJcblxyXG4gICAgICAgICAgICBzaXplID0ge1xyXG4gICAgICAgICAgICAgICAgd2lkdGgsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU1vZGFsU2l6ZShzaXplKTtcclxuXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgdGhpcy5DT1JORVJfUkVTSVpFUi5CT1RUT01fTEVGVDpcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHdpZHRoID0gdGhpcy5nZXRXaWR0aEZyb21VbnBvc2l0aW9uZWRNb2RhbChtb3VzZVBvc2l0aW9uWCk7XHJcbiAgICAgICAgICAgIGhlaWdodCA9IHRoaXMuZ2V0SGVpZ2h0RnJvbVBvc2l0aW9uZWRNb2RhbChtb3VzZVBvc2l0aW9uWSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBwb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgIHg6IG1vdXNlUG9zaXRpb25YLFxyXG4gICAgICAgICAgICAgICAgeTogdGhpcy5nZXRPcmlnaW5Qb3NpdGlvbigpLnksXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy9jaGVjayBtb2RhbCBzaXplXHJcbiAgICAgICAgICAgIGlzV2lkdGhOYXJyb3cgPSB0aGlzLmNoZWNrSWZNaW5pbXVtV2lkdGgod2lkdGgpO1xyXG4gICAgICAgICAgICBpc0hlaWdodFNob3J0ID0gdGhpcy5jaGVja0lmTWluaW11bUhlaWdodChoZWlnaHQpO1xyXG4gICAgICAgICAgICBpZiAoaXNXaWR0aE5hcnJvdyAmJiBpc0hlaWdodFNob3J0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLmJvZHkuc3R5bGUuY3Vyc29yID0gXCJuZXN3LXJlc2l6ZVwiO1xyXG5cclxuICAgICAgICAgICAgaWYgKGlzV2lkdGhOYXJyb3cgJiYgIWlzSGVpZ2h0U2hvcnQpIHtcclxuICAgICAgICAgICAgICAgIHNpemUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMuZ2V0T3JpZ2luU2l6ZSgpLndpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU1vZGFsU2l6ZShzaXplKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFpc1dpZHRoTmFycm93ICYmIGlzSGVpZ2h0U2hvcnQpIHtcclxuICAgICAgICAgICAgICAgIHNpemUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmdldE9yaWdpblNpemUoKS5oZWlnaHQsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgLy9zZXQgbmV3IHBvc2l0aW9uXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbi55ID0gdGhpcy5nZXRPcmlnaW5Qb3NpdGlvbigpLnk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzaXplID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy51cGRhdGVNb2RhbChzaXplLCBwb3NpdGlvbik7XHJcblxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBHZXQgYWxsIHRoZSBtb2RhbCBpbmZvcm1hdGlvblxyXG4gKi9cclxuUmVzaXplLnByb3RvdHlwZS5nZXRNb2RhbCA9IGZ1bmN0aW9uKCl7XHJcbiAgICBjb25zdCBzZWxlY3RWYWx1ZSA9IHN0YXRlID0+IHN0YXRlLm1vZGFsTXV0YXRlT2JzZXJ2ZXI7XHJcbiAgICBjb25zdCBtb2RhbCA9IHNlbGVjdFZhbHVlKHN0b3JlLmdldFN0YXRlKCkpO1xyXG4gICAgcmV0dXJuIG1vZGFsO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBjdXJyZW50IHNpemUgb2YgdGhlIHJlc2l6ZSBtb2RhbFxyXG4gKi9cclxuUmVzaXplLnByb3RvdHlwZS5nZXRPcmlnaW5TaXplID0gZnVuY3Rpb24oKXtcclxuICAgIGNvbnN0IG1vZGFsID0gdGhpcy5yZXNpemVkTW9kYWxJbmZvKCk7XHJcbiAgICByZXR1cm4geyB3aWR0aDogcGFyc2VGbG9hdChtb2RhbC53aWR0aC5tYXRjaCgvXFxkKy9nKVswXSksIGhlaWdodDogcGFyc2VGbG9hdChtb2RhbC5oZWlnaHQubWF0Y2goL1xcZCsvZylbMF0pIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBzZW5kIHJlZHV4IHN0b3JlIHRoZSBzaXplIG9mIHRoZSBtb2RhbFxyXG4gKi9cclxuIFJlc2l6ZS5wcm90b3R5cGUudXBkYXRlTW9kYWxTaXplID0gZnVuY3Rpb24oc2l6ZSl7XHJcbiAgICBzdG9yZS5kaXNwYXRjaCh7IFxyXG4gICAgICAgIHR5cGU6IFwibW9kYWxNdXRhdGVPYnNlcnZlci9zaXplXCIsIFxyXG4gICAgICAgIG5hbWU6IHRoaXMucmVzaXplSW5mbygpLm5hbWUsIFxyXG4gICAgICAgIHdpZHRoOiBgJHtzaXplLndpZHRofXB4YCwgXHJcbiAgICAgICAgaGVpZ2h0OiBgJHtzaXplLmhlaWdodH1weGBcclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiogc2VuZCByZWR1eCBzdG9yZSB0aGUgcG9zaXRpb24gYW5kIHRoZSBzaXplIG9mIHRoZSBtb2RhbFxyXG4qL1xyXG5SZXNpemUucHJvdG90eXBlLnVwZGF0ZU1vZGFsID0gZnVuY3Rpb24oc2l6ZSwgcG9zaXRpb24pIHtcclxuICAgIC8vIHN0b3JlLmRpc3BhdGNoKHNldFBvc2l0aW9uQW5kU2l6ZU9mTW9kYWwoZ2V0TmFtZSgpLCBwb3NpdGlvbiwgc2l6ZSkpO1xyXG4gICAgc3RvcmUuZGlzcGF0Y2goeyBcclxuICAgICAgICB0eXBlOiBcIm1vZGFsTXV0YXRlT2JzZXJ2ZXIvdXBkYXRlXCIsIFxyXG4gICAgICAgIG5hbWU6IHRoaXMucmVzaXplSW5mbygpLm5hbWUsIFxyXG4gICAgICAgIHg6IGAke3Bvc2l0aW9uLnh9cHhgLCBcclxuICAgICAgICB5OiBgJHtwb3NpdGlvbi55fXB4YCwgXHJcbiAgICAgICAgd2lkdGg6IGAke3NpemUud2lkdGh9cHhgLCBcclxuICAgICAgICBoZWlnaHQ6IGAke3NpemUuaGVpZ2h0fXB4YCBcclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgcG9zaXRpb24gb2YgdGhlIHJlc2l6ZSBtb2RhbFxyXG4gKi9cclxuUmVzaXplLnByb3RvdHlwZS5nZXRPcmlnaW5Qb3NpdGlvbiA9IGZ1bmN0aW9uKCl7XHJcbiAgICBjb25zdCBtb2RhbCA9IHRoaXMucmVzaXplZE1vZGFsSW5mbygpO1xyXG4gICAgcmV0dXJuIHsgeDogcGFyc2VGbG9hdChtb2RhbC54Lm1hdGNoKC9cXGQrL2cpWzBdKSwgeTogcGFyc2VGbG9hdChtb2RhbC55Lm1hdGNoKC9cXGQrL2cpWzBdKSB9O1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFN1YnNjcmliZSBpZiB0aGUgbW9kYWwgcmVzaXplIGhhcyBmaW5pc2hlZFxyXG4gKi8gIFxyXG5SZXNpemUucHJvdG90eXBlLnN1YnNjcmliZUlmRmluaXNoUmVzaXplID0gZnVuY3Rpb24oKXtcclxuICAgIHRoaXMuYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZSA9PiB0aGlzLmZpbmlzaFJlc2l6ZUhhbmRsZXIoZSkpO1xyXG4gICAgLy8gdGhpcy5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBlID0+IHRoaXMuZmluaXNoUmVzaXplSGFuZGxlcihlKSk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogU2VuZCByZWR1eCBpZiB0aGUgcmVzaXplIGlzIGRvbmVcclxuICovXHJcblJlc2l6ZS5wcm90b3R5cGUuZmluaXNoUmVzaXplSGFuZGxlciA9IGZ1bmN0aW9uKGUpe1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIFxyXG4gICAgLy9zZXQgbW91c2UgY3Vyc29yIGJhY2sgdG8gbm9ybWFsXHJcbiAgICB0aGlzLmJvZHkuc3R5bGUuY3Vyc29yID0gXCJkZWZhdWx0XCI7XHJcblxyXG4gICAgLy9pZiB1c2VyIHdhcyByZXNpemluZywgcXVpdCByZXNpemVcclxuICAgIHRoaXMuaXNNb2RhbFJlc2l6ZWQoKSAmJiBzdG9yZS5kaXNwYXRjaCh7IHR5cGU6IFwibW9kYWxSZXNpemVPYnNlcnZlci9lbmRcIiB9KTtcclxuXHJcbn1cclxuXHJcblxyXG5SZXNpemUucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpe1xyXG4gICAgdGhpcy5zdWJzY3JpYmVJZlJlc2l6ZSgpO1xyXG4gICAgdGhpcy5zdWJzY3JpYmVJZkZpbmlzaFJlc2l6ZSgpO1xyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG59XHJcblxyXG4iLCJpbXBvcnQgeyBnZXRaSW5kZXgsIHN0b3JlIH0gZnJvbSBcIi4uL3JlZHVjZXIvc3RvcmVcIjtcclxuXHJcbi8qKlxyXG4gKiBAYXV0aG9yIEpITEVFXHJcbiAqIEBjbGFzcyBCdXR0b25Fdm50XHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAY2xhc3NkZXNjXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gQnV0dG9uRXZudChtb2RhbCl7XHJcbiAgLy8gdGhpcy5ST0xFX0NMT1NFID0gJ1tkYXRhLXJvbGU9XCJjbG9zZVwiXSc7XHJcbiAgdGhpcy5CVE5fQ0xJQ0sgPSB7XHJcbiAgICBCR19DT0xPUjogJ1tkYXRhLWNsaWNrPVwiYmdDb2xvclwiXScsXHJcbiAgICBNSU5JTUlaRTogJ1tkYXRhLWNsaWNrPVwibWluaW1pemVcIl0nLFxyXG4gICAgTUFYSU1JWkU6ICdbZGF0YS1jbGljaz1cIm1heGltaXplXCJdJyxcclxuICAgIENMT1NFOiAnW2RhdGEtY2xpY2s9XCJjbG9zZVwiXScsXHJcbiAgICAvLyBUQUJMRTogJ1tkYXRhLWNsaWNrPVwidGFibGVcIl0nLFxyXG4gICAgRFJBRzogJ1tkYXRhLWNsaWNrPVwiZHJhZ1wiXSdcclxuICB9O1xyXG5cclxuICB0aGlzLm1vZGFsID0gbW9kYWw7XHJcbiAgdGhpcy5tb2RhbE5hbWUgPSBtb2RhbC5kYXRhc2V0Lm5hbWU7XHJcbiAgdGhpcy51bnN1YnNjcmliZSA9IG51bGw7XHJcbiAgdGhpcy5vcmlnaW5JbmZvID0ge1xyXG4gICAgd2lkdGg6IFwiMHB4XCIsXHJcbiAgICBoZWlnaHQ6IFwiMHB4XCIsXHJcbiAgICB4OiBcIjBweFwiLFxyXG4gICAgeTogXCIwcHhcIlxyXG4gIH07XHJcblxyXG59XHJcblxyXG4vLyBCdXR0b25Fdm50LnByb3RvdHlwZS50YWJsZUV2ZW50ID0gZnVuY3Rpb24gKCl7XHJcbi8vICAgY29uc3QgdGFibGVCdG4gPSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IodGhpcy5CVE5fQ0xJQ0suVEFCTEUpO1xyXG4vLyAgIHRhYmxlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XHJcbi8vICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbi8vICAgICAvLyBjb25zdCB0YWJsZSA9IG5ldyBUYWJ1bGF0b3IoYCR7dGhpcy5tb2RhbE5hbWV9X2ApXHJcbi8vICAgfSlcclxuLy8gfVxyXG5cclxuXHJcbkJ1dHRvbkV2bnQucHJvdG90eXBlLmJnQ29sb3JFdmVudCA9IGZ1bmN0aW9uICgpe1xyXG4gIGNvbnN0IGJnQ29sb3JCdG4gPSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IodGhpcy5CVE5fQ0xJQ0suQkdfQ09MT1IpO1xyXG4gIGNvbnN0IG1vZGFsID0gdGhpcy5tb2RhbDtcclxuICBiZ0NvbG9yQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGUgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgLy8gbW9kYWwucXVlcnlTZWxlY3RvcignLmNhcmQtaGVhZGVyJykuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gZS50YXJnZXQudmFsdWU7XHJcbiAgICBtb2RhbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBlLnRhcmdldC52YWx1ZTtcclxuICB9KVxyXG59XHJcblxyXG5cclxuXHJcbkJ1dHRvbkV2bnQucHJvdG90eXBlLm1heGltaXplRXZlbnQgPSBmdW5jdGlvbiAoZSwgX3RoaXMpe1xyXG4gIGNvbnN0IG1heEJ0biA9IF90aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoX3RoaXMuQlROX0NMSUNLLk1BWElNSVpFKTtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgLy9zdG9yZSBjdXJyZW50IHNpemUgYW5kIHBvc2l0aW9uIG9mIHRoZSBtb2RhbFxyXG4gIGNvbnN0IHN0YXRlID0gc3RvcmUuZ2V0U3RhdGUoKTtcclxuICBjb25zdCBtb2RhbEluZm8gPSBzdGF0ZS5tb2RhbE11dGF0ZU9ic2VydmVyW190aGlzLm1vZGFsTmFtZV07XHJcblxyXG4gIF90aGlzLm9yaWdpbkluZm8ud2lkdGggPSBtb2RhbEluZm8ud2lkdGg7XHJcbiAgX3RoaXMub3JpZ2luSW5mby5oZWlnaHQgPSBtb2RhbEluZm8uaGVpZ2h0O1xyXG4gIF90aGlzLm9yaWdpbkluZm8ueCA9IG1vZGFsSW5mby54O1xyXG4gIF90aGlzLm9yaWdpbkluZm8ueSA9IG1vZGFsSW5mby55O1xyXG5cclxuICAvL2hpZGUgYW5kIHNob3cgYnV0dG9uc1xyXG4gIGNvbnN0IGJ0bkNvbnRhaW5lciA9IG1heEJ0bi5wYXJlbnRFbGVtZW50O1xyXG4gIGNvbnN0IG1pbmltaXplQnRuID0gYnRuQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoX3RoaXMuQlROX0NMSUNLLk1JTklNSVpFKTtcclxuICBtaW5pbWl6ZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKTtcclxuICBtYXhCdG4uY2xhc3NMaXN0LmFkZCgnZC1ub25lJyk7XHJcblxyXG4gIHN0b3JlLmRpc3BhdGNoKHsgdHlwZTogXCJtb2RhbE11dGF0ZU9ic2VydmVyL21heGltaXplXCIsIG5hbWU6IF90aGlzLm1vZGFsTmFtZSB9KTtcclxuICAgIFxyXG59XHJcblxyXG5CdXR0b25Fdm50LnByb3RvdHlwZS5taW5pbWl6ZUV2ZW50ID0gZnVuY3Rpb24gKGUsIF90aGlzKXtcclxuICAgIGNvbnN0IG1pbmltaXplQnRuID0gX3RoaXMubW9kYWwucXVlcnlTZWxlY3RvcihfdGhpcy5CVE5fQ0xJQ0suTUlOSU1JWkUpO1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAvL2hpZGUgYW5kIHNob3cgYnV0dG9uc1xyXG4gICAgICBjb25zdCBidG5Db250YWluZXIgPSBtaW5pbWl6ZUJ0bi5wYXJlbnRFbGVtZW50O1xyXG4gICAgICBjb25zdCBtYXhCdG4gPSBidG5Db250YWluZXIucXVlcnlTZWxlY3RvcihfdGhpcy5CVE5fQ0xJQ0suTUFYSU1JWkUpO1xyXG4gICAgICBtYXhCdG4uY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJyk7XHJcbiAgICAgIG1pbmltaXplQnRuLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpO1xyXG5cclxuICAgICAgc3RvcmUuZGlzcGF0Y2goeyBcclxuICAgICAgICB0eXBlOiBcIm1vZGFsTXV0YXRlT2JzZXJ2ZXIvdXBkYXRlXCIsIFxyXG4gICAgICAgIG5hbWU6IF90aGlzLm1vZGFsTmFtZSwgXHJcbiAgICAgICAgeDogX3RoaXMub3JpZ2luSW5mby54LCBcclxuICAgICAgICB5OiBfdGhpcy5vcmlnaW5JbmZvLnksIFxyXG4gICAgICAgIHdpZHRoOiBfdGhpcy5vcmlnaW5JbmZvLndpZHRoLCBcclxuICAgICAgICBoZWlnaHQ6IF90aGlzLm9yaWdpbkluZm8uaGVpZ2h0IFxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAYXV0aG9yIEpITEVFXHJcbiAqIEBtZW1iZXJvZiBCdXR0b25Fdm50XHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gTW9kYWwgY2xvc2UgZXZlbnQgZnVuY3Rpb24uIERlZmluZSAgd2hhdCB3b3VsZCBkbyBhZnRlciB1c2VyIGNsaWNrcyAnY2xvc2UnIGJ1dHRvbiBvbiB0aGUgbW9kYWwuXHJcbiAqL1xyXG5CdXR0b25Fdm50LnByb3RvdHlwZS5jbG9zZUV2ZW50ID0gZnVuY3Rpb24gKCl7XHJcbiAgICBjb25zdCBidG4gPSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IodGhpcy5CVE5fQ0xJQ0suQ0xPU0UpO1xyXG4gICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgIC8vdW5zdWJzY3JpYmVcclxuICAgICAgLy8gdW5zdWJzY3JpYmUoKTtcclxuICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xyXG4gICAgICBcclxuICAgICAgLy9yZW1vdmUgZnJvbSByZWR1eCBzdG9yZVxyXG4gICAgICBzdG9yZS5kaXNwYXRjaCh7IHR5cGU6IFwibW9kYWxNdXRhdGVPYnNlcnZlci9kZWxldGVcIiwgbmFtZTogdGhpcy5tb2RhbE5hbWUgfSk7XHJcbiAgICAgIHN0b3JlLmRpc3BhdGNoKHsgdHlwZTogXCJmb2N1c1wiLCBuYW1lOiBcIlwiIH0pO1xyXG4gICAgICBcclxuICAgICAgLy9yZW1vdmUgaHRtbFxyXG4gICAgICB0aGlzLm1vZGFsLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5tb2RhbCk7XHJcbiAgICAgIC8vIHRoaXMgPSBudWxsO1xyXG5cclxuICAgIH0pXHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQGF1dGhvciBKSExFRVxyXG4gKiBAbWVtYmVyb2YgQnV0dG9uRXZudFxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIFxyXG4gKi9cclxuQnV0dG9uRXZudC5wcm90b3R5cGUuekluZGV4RXZlbnQgPSBmdW5jdGlvbiAoKXtcclxuICAgIHRoaXMubW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZSA9PiB7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUFzQ3VycmVudCgpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAYXV0aG9yIEpITEVFXHJcbiAqIEBtZW1iZXJvZiBCdXR0b25Fdm50XHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gVXBkYXRlIGN1cnJlbnQgbW9kYWwgaW5mb3JtYXRpb24uXHJcbiAqL1xyXG5CdXR0b25Fdm50LnByb3RvdHlwZS51cGRhdGVBc0N1cnJlbnQgPSBmdW5jdGlvbiAoKXtcclxuICAgIGNvbnN0IHpJbmRleCA9IGdldFpJbmRleCgpO1xyXG4gICAgc3RvcmUuZGlzcGF0Y2goeyB0eXBlOiBcIm1vZGFsTXV0YXRlT2JzZXJ2ZXIvYWN0aXZlXCIsIG5hbWU6IHRoaXMubW9kYWxOYW1lLCB6SW5kZXggfSk7XHJcbiAgICBzdG9yZS5kaXNwYXRjaCh7IHR5cGU6IFwiZm9jdXNcIiwgbmFtZTogdGhpcy5tb2RhbE5hbWUgfSk7XHJcbiAgfVxyXG5cclxuXHJcblxyXG4gIFxyXG5cclxuLyoqXHJcbiAqIEBhdXRob3IgSkhMRUVcclxuICogQG1lbWJlcm9mIEJ1dHRvbkV2bnRcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBVcGRhdGUgbW9kYWwgaW5mb3JtYXRpb24gYnkgc3Vic2NyaWJpbmcgaXRcclxuICogQHBhcmFtIHtFbGVtZW50fSBtb2RhbCBUYXJnZXQgbW9kYWxcclxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIG1vZGFsXHJcbiAqL1xyXG5CdXR0b25Fdm50LnByb3RvdHlwZS51cGRhdGVNb2RhbFN0YXRlID0gZnVuY3Rpb24gKCl7XHJcbiAgY29uc3Qgc3RhdGUgPSBzdG9yZS5nZXRTdGF0ZSgpO1xyXG5cclxuICBpZih0aGlzLm1vZGFsTmFtZSAhPT0gc3RhdGUuZm9jdXNlZE1vZGFsT2JzZXJ2ZXIubmFtZSl7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBjb25zdCBpbmZvID0gc3RhdGUubW9kYWxNdXRhdGVPYnNlcnZlclt0aGlzLm1vZGFsTmFtZV07XHJcblxyXG4gIGlmKGluZm8ud2lkdGgpe1xyXG4gICAgdGhpcy5tb2RhbC5zdHlsZS53aWR0aCA9IGluZm8ud2lkdGg7XHJcbiAgfVxyXG5cclxuICBpZihpbmZvLmhlaWdodCl7XHJcbiAgICB0aGlzLm1vZGFsLnN0eWxlLmhlaWdodCA9IGluZm8uaGVpZ2h0O1xyXG4gIH1cclxuXHJcbiAgaWYoaW5mby54KXtcclxuICAgIHRoaXMubW9kYWwuc3R5bGUubGVmdCA9IGluZm8ueDtcclxuICB9XHJcblxyXG4gIGlmKGluZm8ueSl7XHJcbiAgICB0aGlzLm1vZGFsLnN0eWxlLnRvcCA9IGluZm8ueTtcclxuICB9XHJcblxyXG4gIGlmKGluZm8uekluZGV4KXtcclxuICAgIHRoaXMubW9kYWwuc3R5bGUuekluZGV4ID0gaW5mby56SW5kZXg7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuICAvKipcclxuICogQGF1dGhvciBKSExFRVxyXG4gKiBAbWVtYmVyb2YgQnV0dG9uRXZudFxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIFxyXG4gKi9cclxuICBCdXR0b25Fdm50LnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKXtcclxuICB0aGlzLnVuc3Vic2NyaWJlID0gc3RvcmUuc3Vic2NyaWJlKCAoKSA9PiB7XHJcbiAgICB0aGlzLnVwZGF0ZU1vZGFsU3RhdGUoKTtcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIHRoaXMudW5zdWJzY3JpYmU7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQGF1dGhvciBKSExFRVxyXG4gKiBAbWVtYmVyb2YgQnV0dG9uRXZudFxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIEluaXRpYWxpemUgYWxsIHRoZSBtb2RhbCBldmVudHNcclxuICovXHJcbi8vIEJ1dHRvbkV2bnQucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAobW9kYWwsIHVuc3Vic2NyaWJlKXtcclxuQnV0dG9uRXZudC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpe1xyXG4gIHRoaXMuc3Vic2NyaWJlKCk7XHJcbiAgdGhpcy51cGRhdGVBc0N1cnJlbnQoKTtcclxuICB0aGlzLnpJbmRleEV2ZW50KCk7XHJcbiAgdGhpcy5jbG9zZUV2ZW50KCk7XHJcbiAgLy8gdGhpcy5taW5pbWl6ZUV2ZW50KCk7XHJcbiAgdGhpcy5iZ0NvbG9yRXZlbnQoKTtcclxuICAvLyB0aGlzLm1heGltaXplRXZlbnQoKTtcclxuICB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IodGhpcy5CVE5fQ0xJQ0suTUlOSU1JWkUpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4gdGhpcy5taW5pbWl6ZUV2ZW50KGUsIHRoaXMpKTtcclxuICB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IodGhpcy5CVE5fQ0xJQ0suTUFYSU1JWkUpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4gdGhpcy5tYXhpbWl6ZUV2ZW50KGUsIHRoaXMpKTtcclxuICB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IodGhpcy5CVE5fQ0xJQ0suRFJBRylcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgZSA9PiB7XHJcbiAgICAgICAgY29uc3QgbW9kYWxJbmZvID0gc3RvcmUuZ2V0U3RhdGUoKS5tb2RhbE11dGF0ZU9ic2VydmVyW3RoaXMubW9kYWxOYW1lXTtcclxuICAgICAgICBpZihtb2RhbEluZm8ud2lkdGggPT09IFwiMTAwJVwiKXtcclxuICAgICAgICAgIHRoaXMubWluaW1pemVFdmVudChlLCB0aGlzKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgdGhpcy5tYXhpbWl6ZUV2ZW50KGUsIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG59XHJcbiIsImltcG9ydCB7IFJlc2l6ZSB9IGZyb20gXCIuL21vZGFsL3Jlc2l6ZVwiO1xyXG5pbXBvcnQgeyBCdXR0b25Fdm50IH0gZnJvbSBcIi4vbW9kYWwvYnV0dG9uRXZudFwiO1xyXG5pbXBvcnQgeyBzdG9yZSB9IGZyb20gXCIuL3JlZHVjZXIvc3RvcmVcIjtcclxuXHJcbmNvbnN0IHsgTWVtb0NyZWF0b3IgfSA9IHJlcXVpcmUoXCIuL2NyZWF0b3IvbWVtb0NyZWF0b3JcIik7XHJcbmNvbnN0IHsgRHJhZ25Ecm9wIH0gPSByZXF1aXJlKFwiLi9tb2RhbC9kcmFnbmRyb3BcIik7XHJcblxyXG4vLyByZXF1aXJlLmNvbnRleHQoXCIuLi9pbWFnZVwiLCB0cnVlKTtcclxuXHJcbmV4cG9ydCBjb25zdCBOQVZfSEVJR0hUID0gNDA7XHJcblxyXG5cclxuZnVuY3Rpb24gTWVtbyAoKXtcclxuICAgIHRoaXMubWVtb0NudCA9IDA7XHJcbiAgICB0aGlzLnNpemUgPSB7XHJcbiAgICAgICAgd2lkdGg6IFwiMjAwcHhcIixcclxuICAgICAgICBoZWlnaHQ6IFwiMjMwcHhcIlxyXG4gICAgfTtcclxuICAgIHRoaXMuZHJhZ25Ecm9wID0gbnVsbDtcclxuICAgIHRoaXMucmVzaXplID0gbnVsbDtcclxuICAgIHRoaXMubXYgPSBudWxsO1xyXG59XHJcblxyXG5cclxuTWVtby5wcm90b3R5cGUuY3JlYXRlTWVtb0hhbmRsZXIgPSBmdW5jdGlvbihlLCBfdGhpcyl7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAvL2NyZWF0ZSBhIG1lbW8gYm94IHRocm91Z2ggTWVtb0NyZWF0b3JcclxuICAgIGNvbnN0IGJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN3YWxsJyk7XHJcbiAgICBjb25zdCBjcmVhdG9yID0gbmV3IE1lbW9DcmVhdG9yKF90aGlzLm1lbW9DbnQsIHRoaXMuc2l6ZS53aWR0aCwgdGhpcy5zaXplLmhlaWdodCk7XHJcbiAgICBjb25zdCBlbGVtcyA9IGNyZWF0b3IuaW5pdCgpO1xyXG4gICAgZWxlbXMuY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJywgYG1lbW9fJHtfdGhpcy5tZW1vQ250fWApO1xyXG4gICAgLy9hcHBlbmQgaXQgdG8gaHRtbFxyXG4gICAgYm94LmFwcGVuZENoaWxkKGVsZW1zLmNvbnRhaW5lcik7XHJcbiAgICBjb25zdCBtZW1vVGV4dEFyZWEgPSBlbGVtcy5ib2R5LnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJyk7XHJcbiAgICBtZW1vVGV4dEFyZWEuZm9jdXMoKTtcclxuXHJcbiAgICBzdG9yZS5kaXNwYXRjaCh7XHJcbiAgICAgICAgdHlwZTogXCJtb2RhbE11dGF0ZU9ic2VydmVyL3VwZGF0ZVwiLFxyXG4gICAgICAgIG5hbWU6IGBtZW1vXyR7X3RoaXMubWVtb0NudH1gLFxyXG4gICAgICAgIHg6IGVsZW1zLmNvbnRhaW5lci5zdHlsZS5sZWZ0LFxyXG4gICAgICAgIHk6IGVsZW1zLmNvbnRhaW5lci5zdHlsZS50b3AsXHJcbiAgICAgICAgd2lkdGg6IHRoaXMuc2l6ZS53aWR0aCxcclxuICAgICAgICBoZWlnaHQ6IHRoaXMuc2l6ZS5oZWlnaHRcclxuICAgIH0pO1xyXG5cclxuICAgIFxyXG5cclxuICAgIC8vU3Vic2NyaWJlIGlmIG1vZGFsIGF0dHJpYnV0ZXMgc3VjaCBhcyBcclxuICAgIC8vd2lkdGgsIGhlaWdodCwgei1pbmRleCBhbmQgcG9zaXRpb24gZ2V0IGNoYW5nZXMuXHJcbiAgICBjb25zdCBtdiA9IG5ldyBCdXR0b25Fdm50KGVsZW1zLmNvbnRhaW5lcik7XHJcbiAgICBtdi5pbml0KCk7XHJcbiAgICB0aGlzLmRyYWduRHJvcC5pbml0KGVsZW1zLmhlYWRlci5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jbGljaz1cImRyYWdcIl0nKSk7XHJcbiAgICB0aGlzLnJlc2l6ZS5pbml0KGVsZW1zLmNvbnRhaW5lcik7XHJcblxyXG5cclxuICAgIF90aGlzLm1lbW9DbnQrKztcclxuICAgIFxyXG59XHJcblxyXG5NZW1vLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKXtcclxuICAgIGNvbnN0IEFERF9CVE5fQVRUUiA9IFwiYWRkTWVtb1wiO1xyXG4gICAgY29uc3QgYWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2V2bnQ9XCIke0FERF9CVE5fQVRUUn1cIl1gKTtcclxuICAgIGFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB0aGlzLmNyZWF0ZU1lbW9IYW5kbGVyKGUsIHRoaXMpKTtcclxuICAgIFxyXG4gICAgdGhpcy5kcmFnbkRyb3AgPSBuZXcgRHJhZ25Ecm9wKCk7XHJcbiAgICB0aGlzLmRyYWduRHJvcC5ib2R5RXZudHMoKTtcclxuXHJcbiAgICB0aGlzLnJlc2l6ZSA9IG5ldyBSZXNpemUodGhpcy5zaXplLndpZHRoLCB0aGlzLnNpemUuaGVpZ2h0KTtcclxuICAgIHRoaXMucmVzaXplLnN1YnNjcmliZSgpO1xyXG5cclxufVxyXG5cclxuY29uc3QgbWVtbyA9IG5ldyBNZW1vKCk7XHJcbm1lbW8uaW5pdCgpO1xyXG4iLCIvKipcclxuICogQGF1dGhvciBKSExFRVxyXG4gKiBAY2xhc3MgTWVtb0NyZWF0b3JcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBjbGFzc2Rlc2MgTWVtb0NyZWF0b3IgY29udHJvbGxlclxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIE1lbW9DcmVhdG9yIChtZW1vQ250LCB3aWR0aCwgaGVpZ2h0KXtcclxuICAgIHRoaXMuRUxFTVMgPSB7XHJcbiAgICAgICAgQ09OVEFJTkVSOiBcIkNPTlRBSU5FUlwiLFxyXG4gICAgICAgIEhFQURFUjogXCJIRUFERVJcIixcclxuICAgICAgICBCT0RZOiBcIkJPRFlcIixcclxuICAgICAgICBDT1JORVJTOiBcIkNPUk5FUlNcIixcclxuICAgICAgICBGT09URVI6IFwiRk9PVEVSXCJcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5kZWZTZXR0aW5nID0ge1xyXG4gICAgICAgIHdpZHRoOiB3aWR0aCArIFwicHhcIixcclxuICAgICAgICBoZWlnaHQ6IGhlaWdodCArIFwicHhcIixcclxuICAgICAgICB0b3A6IDYwLCAgICBcclxuICAgICAgICBsZWZ0OiAwLFxyXG4gICAgICAgIHJhbmRvbVBvc1JhbmdlOiA1MFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLkhFQURFUiA9IHtcclxuICAgICAgICBUQUc6IFwic2VjdGlvblwiLFxyXG4gICAgICAgIENMQVNTX05BTUU6IFtcImNhcmQtaGVhZGVyXCIsIFwiZC1mbGV4XCIsIFwianVzdGlmeS1jb250ZW50LWVuZFwiXSxcclxuICAgICAgICAvLyA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiB0aXRsZT1cIlRhYmxlXCIgYXJpYS1sYWJlbD1cIlRhYmxlXCJcclxuICAgICAgICAvLyAgICAgICAgIGRhdGEtY2xpY2s9XCJ0YWJsZVwiXHJcbiAgICAgICAgLy8gICAgICAgICBjbGFzcz1cImJ0biBidG4tc20gYnRuLXRyYW5zcGFyZW50XCI+XHJcbiAgICAgICAgLy8gICAgICAgICA8aSBjbGFzcz1cImJpIGJpLWJvcmRlci1hbGxcIj48L2k+XHJcbiAgICAgICAgLy8gPC9idXR0b24+ICAgIFxyXG4gICAgICAgIElOTkVSX0hUTUw6IGBcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgtZ3Jvdy0xXCIgZGF0YS1jbGljaz1cImRyYWdcIj4gPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyXCI+XHJcbiAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgdGl0bGU9XCJNaW5pbWl6ZVwiIGFyaWEtbGFiZWw9XCJNaW5pbWl6ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtY2xpY2s9XCJtaW5pbWl6ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1zbSBidG4tdHJhbnNwYXJlbnQgZC1ub25lXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiYmkgYmktZnJvbnRcIj48L2k+XHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIHRpdGxlPVwiTWF4aW1pemVcIiBhcmlhLWxhYmVsPVwiTWF4aW1pemVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWNsaWNrPVwibWF4aW1pemVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJ0biBidG4tc20gYnRuLXRyYW5zcGFyZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiYmkgYmktc3F1YXJlXCI+PC9pPlxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiB0aXRsZT1cIkNsb3NlXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCIgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWNsaWNrPVwiY2xvc2VcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJ0biBidG4tc20gYnRuLXRyYW5zcGFyZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiYmkgYmkteC1sZ1wiPjwvaT5cclxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICBgLFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLkJPRFkgPSB7XHJcbiAgICAgICAgVEFHOiBcInNlY3Rpb25cIixcclxuICAgICAgICBDTEFTU19OQU1FOiBbXCJjYXJkLWJvZHlcIl0sXHJcbiAgICAgICAgSU5ORVJfSFRNTDogYFxyXG4gICAgICAgIDx0ZXh0YXJlYSBjbGFzcz1cInctMTAwIGgtMTAwXCI+PC90ZXh0YXJlYT5cclxuICAgICAgICBgXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuRk9PVEVSID0ge1xyXG4gICAgICAgIFRBRzogXCJzZWN0aW9uXCIsXHJcbiAgICAgICAgQ0xBU1NfTkFNRTogW1wiY2FyZC1mb290ZXJcIl0sXHJcbiAgICAgICAgSU5ORVJfSFRNTDogYFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZC1mbGV4XCI+XHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiYmdDb2xvcl8ke21lbW9DbnR9XCIgdGl0bGU9XCJCYWNrZ3JvdW5kIGNvbG9yXCIgY2xhc3M9XCJidG4gcHgtMiBidG4tdHJhbnNwYXJlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImJpIGJpLXBhbGV0dGVcIj48L2k+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjb2xvclwiIGlkPVwiYmdDb2xvcl8ke21lbW9DbnR9XCIgZGF0YS1jbGljaz1cImJnQ29sb3JcIiBjbGFzcz1cImQtbm9uZVwiID48L2lucHV0PlxyXG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgYFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLkNPUk5FUlMgPSB7XHJcbiAgICAgICAgVEFHOiBcImRpdlwiLFxyXG4gICAgICAgIENMQVNTX05BTUU6IFtdLFxyXG4gICAgICAgIElOTkVSX0hUTUwgOiBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNvcm5lci1sZWZ0XCIgY29ybmVyPVwibGVmdFwiPjwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb3JuZXItdG9wXCIgY29ybmVyPVwidG9wXCI+PC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNvcm5lci10b3AtbGVmdFwiIGNvcm5lcj1cInRvcC1sZWZ0XCI+PC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNvcm5lci10b3AtcmlnaHRcIiBjb3JuZXI9XCJ0b3AtcmlnaHRcIj48L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29ybmVyLXJpZ2h0XCIgY29ybmVyPVwicmlnaHRcIj48L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29ybmVyLWJvdHRvbVwiIGNvcm5lcj1cImJvdHRvbVwiPjwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb3JuZXItYm90dG9tLWxlZnRcIiBjb3JuZXI9XCJib3R0b20tbGVmdFwiPjwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb3JuZXItYm90dG9tLXJpZ2h0XCIgY29ybmVyPVwiYm90dG9tLXJpZ2h0XCI+PC9kaXY+XHJcbiAgICAgICAgYFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLkNPTlRBSU5FUiA9IHtcclxuICAgICAgICBUQUc6IFwiZGl2XCIsXHJcbiAgICAgICAgQ0xBU1NfTkFNRTogW1wiY2FyZFwiLCBcInBvc2l0aW9uLWFic29sdXRlXCJdLFxyXG4gICAgICAgIElOTkVSX0hUTUw6IGBgXHJcbiAgICB9O1xyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqIEBhdXRob3IgSkhMRUVcclxuICogQG1lbWJlcm9mIE1lbW9DcmVhdG9yXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gQXBwZW5kIGEgbWVtbyBodG1sIHRvIGl0cyBtb3RoZXIgaHRtbC5cclxuICogQHJldHVybiB7TWVtb0NyZWF0b3J9XHJcbiAqL1xyXG5NZW1vQ3JlYXRvci5wcm90b3R5cGUuY3JlYXRlRWxlbSA9IGZ1bmN0aW9uICh0YXJnZXQpe1xyXG4gICAgY29uc3QgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGhpc1t0YXJnZXRdLlRBRyk7XHJcbiAgICBlbGVtLmNsYXNzTGlzdC5hZGQoLi4udGhpc1t0YXJnZXRdLkNMQVNTX05BTUUpO1xyXG4gICAgZWxlbS5pbm5lckhUTUwgPSB0aGlzW3RhcmdldF0uSU5ORVJfSFRNTDtcclxuXHJcbiAgICByZXR1cm4gZWxlbTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAYXV0aG9yIEpITEVFXHJcbiAqIEBtZW1iZXJvZiBNZW1vQ3JlYXRvclxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIFxyXG4gKiBAcmV0dXJuIHtNZW1vQ3JlYXRvcn1cclxuICovXHJcbk1lbW9DcmVhdG9yLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCl7XHJcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNyZWF0ZUVsZW0odGhpcy5FTEVNUy5DT05UQUlORVIpO1xyXG4gICAgY29uc3QgaGVhZGVyID0gdGhpcy5jcmVhdGVFbGVtKHRoaXMuRUxFTVMuSEVBREVSKTsgXHJcbiAgICBjb25zdCBib2R5ID0gdGhpcy5jcmVhdGVFbGVtKHRoaXMuRUxFTVMuQk9EWSk7IFxyXG4gICAgY29uc3QgZm9vdGVyID0gdGhpcy5jcmVhdGVFbGVtKHRoaXMuRUxFTVMuRk9PVEVSKTsgXHJcbiAgICBjb25zdCBjb3JuZXJzID0gdGhpcy5jcmVhdGVFbGVtKHRoaXMuRUxFTVMuQ09STkVSUyk7IFxyXG5cclxuICAgIGNvbnRhaW5lci5zdHlsZS53aWR0aCA9IHRoaXMuZGVmU2V0dGluZy53aWR0aDtcclxuICAgIGNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSB0aGlzLmRlZlNldHRpbmcuaGVpZ2h0O1xyXG4gICAgY29udGFpbmVyLnN0eWxlLnRvcCA9IGAke3RoaXMuZGVmU2V0dGluZy50b3AgKyBnZXRSYW5kb21JbnQodGhpcy5kZWZTZXR0aW5nLnJhbmRvbVBvc1JhbmdlKX1weGA7XHJcbiAgICBjb250YWluZXIuc3R5bGUubGVmdCA9IGAke3RoaXMuZGVmU2V0dGluZy5sZWZ0ICsgZ2V0UmFuZG9tSW50KHRoaXMuZGVmU2V0dGluZy5yYW5kb21Qb3NSYW5nZSl9cHhgOyBcclxuXHJcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaGVhZGVyKTtcclxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChib2R5KTtcclxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChmb290ZXIpO1xyXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNvcm5lcnMpO1xyXG5cclxuICAgIGNvbnN0IGVsZW1zID0ge1xyXG4gICAgICAgIGNvbnRhaW5lcixcclxuICAgICAgICBoZWFkZXIsXHJcbiAgICAgICAgYm9keSxcclxuICAgICAgICBmb290ZXIsXHJcbiAgICAgICAgY29ybmVyc1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICByZXR1cm4gZWxlbXM7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBnZXRSYW5kb21JbnQobWF4KSB7XHJcblxyXG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG1heCk7XHJcbiAgfSIsImltcG9ydCB7IE5BVl9IRUlHSFQgfSBmcm9tIFwiLi4vYXBwXCI7XHJcbmltcG9ydCB7IHN0b3JlIH0gZnJvbSBcIi4uL3JlZHVjZXIvc3RvcmVcIjtcclxuXHJcbi8qKlxyXG4gKiBAYXV0aG9yIEpITEVFXHJcbiAqIEBjbGFzcyBEcmFnbkRyb3BcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBjbGFzc2Rlc2MgRHJhZyBhbmQgRHJvcCBFdmVudCBDb250cm9sbGVyXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gRHJhZ25Ecm9wKCl7XHJcbiAgICBcclxuICAvKipcclxuICAqIEBhdXRob3IgSkhMRUVcclxuICAqIEBtZW1iZXIgRHJhZ25Ecm9wI2JvZHlcclxuICAqIEB0eXBlIHtFbGVtZW50fVxyXG4gICogQGRlc2NyaXB0aW9uIFRoZSBib2R5IGVsZW1lbnRcclxuICAqL1xyXG4gIHRoaXMuYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcclxuXHJcbn1cclxuXHJcblxyXG5cclxuLyoqXHJcbiAqIEBhdXRob3IgSkhMRUVcclxuICogQG1lbWJlcm9mIERyYWduRHJvcFxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIEluaXRpYWxpemUgZXZlbnRcclxuICogQHJldHVybiB7RHJhZ25Ecm9wfVxyXG4gKi9cclxuRHJhZ25Ecm9wLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKGhlYWRlcil7XHJcbiAgaGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMubW91c2VEb3duSGFuZGxlcik7XHJcbiAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG5EcmFnbkRyb3AucHJvdG90eXBlLmJvZHlFdm50cyA9IGZ1bmN0aW9uICgpe1xyXG4gIHRoaXMuYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5kcm9wSGFuZGxlcik7XHJcbiAgLy8gdGhpcy5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCB0aGlzLmRyb3BIYW5kbGVyKTtcclxuICB0aGlzLmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5tb3VzZU1vdmVIYW5kbGVyKTtcclxuICByZXR1cm4gdGhpcztcclxufVxyXG5cclxuLyoqXHJcbiAqIEBhdXRob3IgSkhMRUVcclxuICogQG1lbWJlcm9mIERyYWduRHJvcFxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIERyYWcgc3RhcnQgZXZlbnQgaGFuZGxlclxyXG4gKiBAcGFyYW0ge0V2ZW50fSBlIE1vdXNlIGRvd24gZXZlbnQgcGFyYW1cclxuICogQHJldHVybiB7RHJhZ25Ecm9wfVxyXG4gKi9cclxuRHJhZ25Ecm9wLnByb3RvdHlwZS5tb3VzZURvd25IYW5kbGVyID0gZnVuY3Rpb24gKGUpe1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICAvL2NvbXB1dGUgY3VycmVudCBwb3NpdGlvbiBvZiBtb3VzZVxyXG4gIGNvbnN0IG1vdXNlUG9zaXRpb25Pbk1vZGFsID0ge1xyXG4gICAgICB4OiBlLmxheWVyWCxcclxuICAgICAgeTogZS5sYXllclksXHJcbiAgfTtcclxuXHJcbiAgY29uc3QgbmFtZSA9IGUuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuZGF0YXNldC5uYW1lO1xyXG5cclxuICBzdG9yZS5kaXNwYXRjaCh7IHR5cGU6IFwiZm9jdXNcIiwgbmFtZSB9KTtcclxuICBzdG9yZS5kaXNwYXRjaCh7XHJcbiAgICB0eXBlOiBcIm1vZGFsRHJhZ09ic2VydmVyL3N0YXJ0XCIsXHJcbiAgICBuYW1lLFxyXG4gICAgbW91c2VQb3NpdGlvbjogbW91c2VQb3NpdGlvbk9uTW9kYWwsXHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiB0aGlzO1xyXG59XHJcblxyXG4vKipcclxuICogQGF1dGhvciBKSExFRVxyXG4gKiBAbWVtYmVyb2YgRHJhZ25Ecm9wXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gRHJhZ2dpbmcgZXZlbnQgaGFuZGxlclxyXG4gKiBAcGFyYW0ge0V2ZW50fSBlIE1vdXNlIG1vdmUgZXZlbnRcclxuICogQHJldHVybiB7RHJhZ25Ecm9wfVxyXG4gKi9cclxuRHJhZ25Ecm9wLnByb3RvdHlwZS5tb3VzZU1vdmVIYW5kbGVyID0gZnVuY3Rpb24gKGUpe1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gIGNvbnN0IGdldERyYWduZHJvcCA9IChzdGF0ZSkgPT4gc3RhdGUubW9kYWxEcmFnT2JzZXJ2ZXI7XHJcbiAgY29uc3QgZHJhZ25kcm9wU3RhdHVzID0gZ2V0RHJhZ25kcm9wKHN0b3JlLmdldFN0YXRlKCkpO1xyXG4gIFxyXG4gIGlmICghZHJhZ25kcm9wU3RhdHVzLm1vdXNlT24pIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGNvbnN0IG1vdXNlUG9zaXRpb24gPSBkcmFnbmRyb3BTdGF0dXMubW91c2VQb3NpdGlvbjtcclxuICBjb25zdCBuYW1lID0gZHJhZ25kcm9wU3RhdHVzLm5hbWU7XHJcbiAgLy8gY29uc3QgY29tcHV0ZWRZID0gZS5wYWdlWSAtIG1vdXNlUG9zaXRpb24ueSAtIE5BVl9IRUlHSFQ7XHJcbiAgY29uc3QgY29tcHV0ZWRZID0gZS5wYWdlWSAtIG1vdXNlUG9zaXRpb24ueTtcclxuXHJcbiAgbGV0IG1vZGFsUG9zaXRpb24gPSB7XHJcbiAgICB4OiBlLnBhZ2VYIC0gbW91c2VQb3NpdGlvbi54LCBcclxuICAgIHk6IGNvbXB1dGVkWSA8IE5BVl9IRUlHSFQgPyBOQVZfSEVJR0hUIDogY29tcHV0ZWRZLFxyXG4gICAgLy8geTogY29tcHV0ZWRZIDwgMCA/IDAgOiBjb21wdXRlZFksXHJcbiAgfTtcclxuXHJcbiAgc3RvcmUuZGlzcGF0Y2goe1xyXG4gICAgdHlwZTogXCJtb2RhbE11dGF0ZU9ic2VydmVyL3Bvc2l0aW9uXCIsXHJcbiAgICBuYW1lLFxyXG4gICAgeDogYCR7bW9kYWxQb3NpdGlvbi54fXB4YCxcclxuICAgIHk6IGAke21vZGFsUG9zaXRpb24ueX1weGAsXHJcbiAgICAvLyB6SW5kZXhcclxuICB9KTtcclxuXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAYXV0aG9yIEpITEVFXHJcbiAqIEBtZW1iZXJvZiBEcmFnbkRyb3BcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBEcm9wIGV2ZW50IGhhbmRsZXJcclxuICogQHJldHVybiB7RHJhZ25Ecm9wfVxyXG4gKi9cclxuRHJhZ25Ecm9wLnByb3RvdHlwZS5kcm9wSGFuZGxlciA9IGZ1bmN0aW9uIChlKXtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICBjb25zdCBnZXREcmFnbmRyb3AgPSAoc3RhdGUpID0+IHN0YXRlLm1vZGFsRHJhZ09ic2VydmVyO1xyXG4gIGNvbnN0IGRyYWduZHJvcFN0YXR1cyA9IGdldERyYWduZHJvcChzdG9yZS5nZXRTdGF0ZSgpKTtcclxuXHJcbiAgaWYgKCFkcmFnbmRyb3BTdGF0dXMubW91c2VPbikge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgc3RvcmUuZGlzcGF0Y2goeyB0eXBlOiBcIm1vZGFsRHJhZ09ic2VydmVyL2VuZFwiIH0pO1xyXG59IiwiZnVuY3Rpb24gbihuKXtmb3IodmFyIHI9YXJndW1lbnRzLmxlbmd0aCx0PUFycmF5KHI+MT9yLTE6MCksZT0xO2U8cjtlKyspdFtlLTFdPWFyZ3VtZW50c1tlXTtpZihcInByb2R1Y3Rpb25cIiE9PXByb2Nlc3MuZW52Lk5PREVfRU5WKXt2YXIgaT1ZW25dLG89aT9cImZ1bmN0aW9uXCI9PXR5cGVvZiBpP2kuYXBwbHkobnVsbCx0KTppOlwidW5rbm93biBlcnJvciBucjogXCIrbjt0aHJvdyBFcnJvcihcIltJbW1lcl0gXCIrbyl9dGhyb3cgRXJyb3IoXCJbSW1tZXJdIG1pbmlmaWVkIGVycm9yIG5yOiBcIituKyh0Lmxlbmd0aD9cIiBcIit0Lm1hcCgoZnVuY3Rpb24obil7cmV0dXJuXCInXCIrbitcIidcIn0pKS5qb2luKFwiLFwiKTpcIlwiKStcIi4gRmluZCB0aGUgZnVsbCBlcnJvciBhdDogaHR0cHM6Ly9iaXQubHkvM2NYRUtXZlwiKX1mdW5jdGlvbiByKG4pe3JldHVybiEhbiYmISFuW1FdfWZ1bmN0aW9uIHQobil7dmFyIHI7cmV0dXJuISFuJiYoZnVuY3Rpb24obil7aWYoIW58fFwib2JqZWN0XCIhPXR5cGVvZiBuKXJldHVybiExO3ZhciByPU9iamVjdC5nZXRQcm90b3R5cGVPZihuKTtpZihudWxsPT09cilyZXR1cm4hMDt2YXIgdD1PYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChyLFwiY29uc3RydWN0b3JcIikmJnIuY29uc3RydWN0b3I7cmV0dXJuIHQ9PT1PYmplY3R8fFwiZnVuY3Rpb25cIj09dHlwZW9mIHQmJkZ1bmN0aW9uLnRvU3RyaW5nLmNhbGwodCk9PT1afShuKXx8QXJyYXkuaXNBcnJheShuKXx8ISFuW0xdfHwhIShudWxsPT09KHI9bi5jb25zdHJ1Y3Rvcil8fHZvaWQgMD09PXI/dm9pZCAwOnJbTF0pfHxzKG4pfHx2KG4pKX1mdW5jdGlvbiBlKHQpe3JldHVybiByKHQpfHxuKDIzLHQpLHRbUV0udH1mdW5jdGlvbiBpKG4scix0KXt2b2lkIDA9PT10JiYodD0hMSksMD09PW8obik/KHQ/T2JqZWN0LmtleXM6bm4pKG4pLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QmJlwic3ltYm9sXCI9PXR5cGVvZiBlfHxyKGUsbltlXSxuKX0pKTpuLmZvckVhY2goKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHIoZSx0LG4pfSkpfWZ1bmN0aW9uIG8obil7dmFyIHI9bltRXTtyZXR1cm4gcj9yLmk+Mz9yLmktNDpyLmk6QXJyYXkuaXNBcnJheShuKT8xOnMobik/Mjp2KG4pPzM6MH1mdW5jdGlvbiB1KG4scil7cmV0dXJuIDI9PT1vKG4pP24uaGFzKHIpOk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuLHIpfWZ1bmN0aW9uIGEobixyKXtyZXR1cm4gMj09PW8obik/bi5nZXQocik6bltyXX1mdW5jdGlvbiBmKG4scix0KXt2YXIgZT1vKG4pOzI9PT1lP24uc2V0KHIsdCk6Mz09PWU/bi5hZGQodCk6bltyXT10fWZ1bmN0aW9uIGMobixyKXtyZXR1cm4gbj09PXI/MCE9PW58fDEvbj09MS9yOm4hPW4mJnIhPXJ9ZnVuY3Rpb24gcyhuKXtyZXR1cm4gWCYmbiBpbnN0YW5jZW9mIE1hcH1mdW5jdGlvbiB2KG4pe3JldHVybiBxJiZuIGluc3RhbmNlb2YgU2V0fWZ1bmN0aW9uIHAobil7cmV0dXJuIG4ub3x8bi50fWZ1bmN0aW9uIGwobil7aWYoQXJyYXkuaXNBcnJheShuKSlyZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwobik7dmFyIHI9cm4obik7ZGVsZXRlIHJbUV07Zm9yKHZhciB0PW5uKHIpLGU9MDtlPHQubGVuZ3RoO2UrKyl7dmFyIGk9dFtlXSxvPXJbaV07ITE9PT1vLndyaXRhYmxlJiYoby53cml0YWJsZT0hMCxvLmNvbmZpZ3VyYWJsZT0hMCksKG8uZ2V0fHxvLnNldCkmJihyW2ldPXtjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsZW51bWVyYWJsZTpvLmVudW1lcmFibGUsdmFsdWU6bltpXX0pfXJldHVybiBPYmplY3QuY3JlYXRlKE9iamVjdC5nZXRQcm90b3R5cGVPZihuKSxyKX1mdW5jdGlvbiBkKG4sZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPSExKSx5KG4pfHxyKG4pfHwhdChuKXx8KG8obik+MSYmKG4uc2V0PW4uYWRkPW4uY2xlYXI9bi5kZWxldGU9aCksT2JqZWN0LmZyZWV6ZShuKSxlJiZpKG4sKGZ1bmN0aW9uKG4scil7cmV0dXJuIGQociwhMCl9KSwhMCkpLG59ZnVuY3Rpb24gaCgpe24oMil9ZnVuY3Rpb24geShuKXtyZXR1cm4gbnVsbD09bnx8XCJvYmplY3RcIiE9dHlwZW9mIG58fE9iamVjdC5pc0Zyb3plbihuKX1mdW5jdGlvbiBiKHIpe3ZhciB0PXRuW3JdO3JldHVybiB0fHxuKDE4LHIpLHR9ZnVuY3Rpb24gbShuLHIpe3RuW25dfHwodG5bbl09cil9ZnVuY3Rpb24gXygpe3JldHVyblwicHJvZHVjdGlvblwiPT09cHJvY2Vzcy5lbnYuTk9ERV9FTlZ8fFV8fG4oMCksVX1mdW5jdGlvbiBqKG4scil7ciYmKGIoXCJQYXRjaGVzXCIpLG4udT1bXSxuLnM9W10sbi52PXIpfWZ1bmN0aW9uIGcobil7TyhuKSxuLnAuZm9yRWFjaChTKSxuLnA9bnVsbH1mdW5jdGlvbiBPKG4pe249PT1VJiYoVT1uLmwpfWZ1bmN0aW9uIHcobil7cmV0dXJuIFU9e3A6W10sbDpVLGg6bixtOiEwLF86MH19ZnVuY3Rpb24gUyhuKXt2YXIgcj1uW1FdOzA9PT1yLml8fDE9PT1yLmk/ci5qKCk6ci5nPSEwfWZ1bmN0aW9uIFAocixlKXtlLl89ZS5wLmxlbmd0aDt2YXIgaT1lLnBbMF0sbz12b2lkIDAhPT1yJiZyIT09aTtyZXR1cm4gZS5oLk98fGIoXCJFUzVcIikuUyhlLHIsbyksbz8oaVtRXS5QJiYoZyhlKSxuKDQpKSx0KHIpJiYocj1NKGUsciksZS5sfHx4KGUscikpLGUudSYmYihcIlBhdGNoZXNcIikuTShpW1FdLnQscixlLnUsZS5zKSk6cj1NKGUsaSxbXSksZyhlKSxlLnUmJmUudihlLnUsZS5zKSxyIT09SD9yOnZvaWQgMH1mdW5jdGlvbiBNKG4scix0KXtpZih5KHIpKXJldHVybiByO3ZhciBlPXJbUV07aWYoIWUpcmV0dXJuIGkociwoZnVuY3Rpb24oaSxvKXtyZXR1cm4gQShuLGUscixpLG8sdCl9KSwhMCkscjtpZihlLkEhPT1uKXJldHVybiByO2lmKCFlLlApcmV0dXJuIHgobixlLnQsITApLGUudDtpZighZS5JKXtlLkk9ITAsZS5BLl8tLTt2YXIgbz00PT09ZS5pfHw1PT09ZS5pP2Uubz1sKGUuayk6ZS5vLHU9byxhPSExOzM9PT1lLmkmJih1PW5ldyBTZXQobyksby5jbGVhcigpLGE9ITApLGkodSwoZnVuY3Rpb24ocixpKXtyZXR1cm4gQShuLGUsbyxyLGksdCxhKX0pKSx4KG4sbywhMSksdCYmbi51JiZiKFwiUGF0Y2hlc1wiKS5OKGUsdCxuLnUsbi5zKX1yZXR1cm4gZS5vfWZ1bmN0aW9uIEEoZSxpLG8sYSxjLHMsdil7aWYoXCJwcm9kdWN0aW9uXCIhPT1wcm9jZXNzLmVudi5OT0RFX0VOViYmYz09PW8mJm4oNSkscihjKSl7dmFyIHA9TShlLGMscyYmaSYmMyE9PWkuaSYmIXUoaS5SLGEpP3MuY29uY2F0KGEpOnZvaWQgMCk7aWYoZihvLGEscCksIXIocCkpcmV0dXJuO2UubT0hMX1lbHNlIHYmJm8uYWRkKGMpO2lmKHQoYykmJiF5KGMpKXtpZighZS5oLkQmJmUuXzwxKXJldHVybjtNKGUsYyksaSYmaS5BLmx8fHgoZSxjKX19ZnVuY3Rpb24geChuLHIsdCl7dm9pZCAwPT09dCYmKHQ9ITEpLCFuLmwmJm4uaC5EJiZuLm0mJmQocix0KX1mdW5jdGlvbiB6KG4scil7dmFyIHQ9bltRXTtyZXR1cm4odD9wKHQpOm4pW3JdfWZ1bmN0aW9uIEkobixyKXtpZihyIGluIG4pZm9yKHZhciB0PU9iamVjdC5nZXRQcm90b3R5cGVPZihuKTt0Oyl7dmFyIGU9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpO2lmKGUpcmV0dXJuIGU7dD1PYmplY3QuZ2V0UHJvdG90eXBlT2YodCl9fWZ1bmN0aW9uIGsobil7bi5QfHwobi5QPSEwLG4ubCYmayhuLmwpKX1mdW5jdGlvbiBFKG4pe24ub3x8KG4ubz1sKG4udCkpfWZ1bmN0aW9uIE4obixyLHQpe3ZhciBlPXMocik/YihcIk1hcFNldFwiKS5GKHIsdCk6dihyKT9iKFwiTWFwU2V0XCIpLlQocix0KTpuLk8/ZnVuY3Rpb24obixyKXt2YXIgdD1BcnJheS5pc0FycmF5KG4pLGU9e2k6dD8xOjAsQTpyP3IuQTpfKCksUDohMSxJOiExLFI6e30sbDpyLHQ6bixrOm51bGwsbzpudWxsLGo6bnVsbCxDOiExfSxpPWUsbz1lbjt0JiYoaT1bZV0sbz1vbik7dmFyIHU9UHJveHkucmV2b2NhYmxlKGksbyksYT11LnJldm9rZSxmPXUucHJveHk7cmV0dXJuIGUuaz1mLGUuaj1hLGZ9KHIsdCk6YihcIkVTNVwiKS5KKHIsdCk7cmV0dXJuKHQ/dC5BOl8oKSkucC5wdXNoKGUpLGV9ZnVuY3Rpb24gUihlKXtyZXR1cm4gcihlKXx8bigyMixlKSxmdW5jdGlvbiBuKHIpe2lmKCF0KHIpKXJldHVybiByO3ZhciBlLHU9cltRXSxjPW8ocik7aWYodSl7aWYoIXUuUCYmKHUuaTw0fHwhYihcIkVTNVwiKS5LKHUpKSlyZXR1cm4gdS50O3UuST0hMCxlPUQocixjKSx1Lkk9ITF9ZWxzZSBlPUQocixjKTtyZXR1cm4gaShlLChmdW5jdGlvbihyLHQpe3UmJmEodS50LHIpPT09dHx8ZihlLHIsbih0KSl9KSksMz09PWM/bmV3IFNldChlKTplfShlKX1mdW5jdGlvbiBEKG4scil7c3dpdGNoKHIpe2Nhc2UgMjpyZXR1cm4gbmV3IE1hcChuKTtjYXNlIDM6cmV0dXJuIEFycmF5LmZyb20obil9cmV0dXJuIGwobil9ZnVuY3Rpb24gRigpe2Z1bmN0aW9uIHQobixyKXt2YXIgdD1zW25dO3JldHVybiB0P3QuZW51bWVyYWJsZT1yOnNbbl09dD17Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6cixnZXQ6ZnVuY3Rpb24oKXt2YXIgcj10aGlzW1FdO3JldHVyblwicHJvZHVjdGlvblwiIT09cHJvY2Vzcy5lbnYuTk9ERV9FTlYmJmYociksZW4uZ2V0KHIsbil9LHNldDpmdW5jdGlvbihyKXt2YXIgdD10aGlzW1FdO1wicHJvZHVjdGlvblwiIT09cHJvY2Vzcy5lbnYuTk9ERV9FTlYmJmYodCksZW4uc2V0KHQsbixyKX19LHR9ZnVuY3Rpb24gZShuKXtmb3IodmFyIHI9bi5sZW5ndGgtMTtyPj0wO3ItLSl7dmFyIHQ9bltyXVtRXTtpZighdC5QKXN3aXRjaCh0Lmkpe2Nhc2UgNTphKHQpJiZrKHQpO2JyZWFrO2Nhc2UgNDpvKHQpJiZrKHQpfX19ZnVuY3Rpb24gbyhuKXtmb3IodmFyIHI9bi50LHQ9bi5rLGU9bm4odCksaT1lLmxlbmd0aC0xO2k+PTA7aS0tKXt2YXIgbz1lW2ldO2lmKG8hPT1RKXt2YXIgYT1yW29dO2lmKHZvaWQgMD09PWEmJiF1KHIsbykpcmV0dXJuITA7dmFyIGY9dFtvXSxzPWYmJmZbUV07aWYocz9zLnQhPT1hOiFjKGYsYSkpcmV0dXJuITB9fXZhciB2PSEhcltRXTtyZXR1cm4gZS5sZW5ndGghPT1ubihyKS5sZW5ndGgrKHY/MDoxKX1mdW5jdGlvbiBhKG4pe3ZhciByPW4uaztpZihyLmxlbmd0aCE9PW4udC5sZW5ndGgpcmV0dXJuITA7dmFyIHQ9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihyLHIubGVuZ3RoLTEpO2lmKHQmJiF0LmdldClyZXR1cm4hMDtmb3IodmFyIGU9MDtlPHIubGVuZ3RoO2UrKylpZighci5oYXNPd25Qcm9wZXJ0eShlKSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBmKHIpe3IuZyYmbigzLEpTT04uc3RyaW5naWZ5KHAocikpKX12YXIgcz17fTttKFwiRVM1XCIse0o6ZnVuY3Rpb24obixyKXt2YXIgZT1BcnJheS5pc0FycmF5KG4pLGk9ZnVuY3Rpb24obixyKXtpZihuKXtmb3IodmFyIGU9QXJyYXkoci5sZW5ndGgpLGk9MDtpPHIubGVuZ3RoO2krKylPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIlwiK2ksdChpLCEwKSk7cmV0dXJuIGV9dmFyIG89cm4ocik7ZGVsZXRlIG9bUV07Zm9yKHZhciB1PW5uKG8pLGE9MDthPHUubGVuZ3RoO2ErKyl7dmFyIGY9dVthXTtvW2ZdPXQoZixufHwhIW9bZl0uZW51bWVyYWJsZSl9cmV0dXJuIE9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKHIpLG8pfShlLG4pLG89e2k6ZT81OjQsQTpyP3IuQTpfKCksUDohMSxJOiExLFI6e30sbDpyLHQ6bixrOmksbzpudWxsLGc6ITEsQzohMX07cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLFEse3ZhbHVlOm8sd3JpdGFibGU6ITB9KSxpfSxTOmZ1bmN0aW9uKG4sdCxvKXtvP3IodCkmJnRbUV0uQT09PW4mJmUobi5wKToobi51JiZmdW5jdGlvbiBuKHIpe2lmKHImJlwib2JqZWN0XCI9PXR5cGVvZiByKXt2YXIgdD1yW1FdO2lmKHQpe3ZhciBlPXQudCxvPXQuayxmPXQuUixjPXQuaTtpZig0PT09YylpKG8sKGZ1bmN0aW9uKHIpe3IhPT1RJiYodm9pZCAwIT09ZVtyXXx8dShlLHIpP2Zbcl18fG4ob1tyXSk6KGZbcl09ITAsayh0KSkpfSkpLGkoZSwoZnVuY3Rpb24obil7dm9pZCAwIT09b1tuXXx8dShvLG4pfHwoZltuXT0hMSxrKHQpKX0pKTtlbHNlIGlmKDU9PT1jKXtpZihhKHQpJiYoayh0KSxmLmxlbmd0aD0hMCksby5sZW5ndGg8ZS5sZW5ndGgpZm9yKHZhciBzPW8ubGVuZ3RoO3M8ZS5sZW5ndGg7cysrKWZbc109ITE7ZWxzZSBmb3IodmFyIHY9ZS5sZW5ndGg7djxvLmxlbmd0aDt2KyspZlt2XT0hMDtmb3IodmFyIHA9TWF0aC5taW4oby5sZW5ndGgsZS5sZW5ndGgpLGw9MDtsPHA7bCsrKW8uaGFzT3duUHJvcGVydHkobCl8fChmW2xdPSEwKSx2b2lkIDA9PT1mW2xdJiZuKG9bbF0pfX19fShuLnBbMF0pLGUobi5wKSl9LEs6ZnVuY3Rpb24obil7cmV0dXJuIDQ9PT1uLmk/byhuKTphKG4pfX0pfWZ1bmN0aW9uIFQoKXtmdW5jdGlvbiBlKG4pe2lmKCF0KG4pKXJldHVybiBuO2lmKEFycmF5LmlzQXJyYXkobikpcmV0dXJuIG4ubWFwKGUpO2lmKHMobikpcmV0dXJuIG5ldyBNYXAoQXJyYXkuZnJvbShuLmVudHJpZXMoKSkubWFwKChmdW5jdGlvbihuKXtyZXR1cm5bblswXSxlKG5bMV0pXX0pKSk7aWYodihuKSlyZXR1cm4gbmV3IFNldChBcnJheS5mcm9tKG4pLm1hcChlKSk7dmFyIHI9T2JqZWN0LmNyZWF0ZShPYmplY3QuZ2V0UHJvdG90eXBlT2YobikpO2Zvcih2YXIgaSBpbiBuKXJbaV09ZShuW2ldKTtyZXR1cm4gdShuLEwpJiYocltMXT1uW0xdKSxyfWZ1bmN0aW9uIGYobil7cmV0dXJuIHIobik/ZShuKTpufXZhciBjPVwiYWRkXCI7bShcIlBhdGNoZXNcIix7JDpmdW5jdGlvbihyLHQpe3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQpe2Zvcih2YXIgaT10LnBhdGgsdT10Lm9wLGY9cixzPTA7czxpLmxlbmd0aC0xO3MrKyl7dmFyIHY9byhmKSxwPWlbc107XCJzdHJpbmdcIiE9dHlwZW9mIHAmJlwibnVtYmVyXCIhPXR5cGVvZiBwJiYocD1cIlwiK3ApLDAhPT12JiYxIT09dnx8XCJfX3Byb3RvX19cIiE9PXAmJlwiY29uc3RydWN0b3JcIiE9PXB8fG4oMjQpLFwiZnVuY3Rpb25cIj09dHlwZW9mIGYmJlwicHJvdG90eXBlXCI9PT1wJiZuKDI0KSxcIm9iamVjdFwiIT10eXBlb2YoZj1hKGYscCkpJiZuKDE1LGkuam9pbihcIi9cIikpfXZhciBsPW8oZiksZD1lKHQudmFsdWUpLGg9aVtpLmxlbmd0aC0xXTtzd2l0Y2godSl7Y2FzZVwicmVwbGFjZVwiOnN3aXRjaChsKXtjYXNlIDI6cmV0dXJuIGYuc2V0KGgsZCk7Y2FzZSAzOm4oMTYpO2RlZmF1bHQ6cmV0dXJuIGZbaF09ZH1jYXNlIGM6c3dpdGNoKGwpe2Nhc2UgMTpyZXR1cm5cIi1cIj09PWg/Zi5wdXNoKGQpOmYuc3BsaWNlKGgsMCxkKTtjYXNlIDI6cmV0dXJuIGYuc2V0KGgsZCk7Y2FzZSAzOnJldHVybiBmLmFkZChkKTtkZWZhdWx0OnJldHVybiBmW2hdPWR9Y2FzZVwicmVtb3ZlXCI6c3dpdGNoKGwpe2Nhc2UgMTpyZXR1cm4gZi5zcGxpY2UoaCwxKTtjYXNlIDI6cmV0dXJuIGYuZGVsZXRlKGgpO2Nhc2UgMzpyZXR1cm4gZi5kZWxldGUodC52YWx1ZSk7ZGVmYXVsdDpyZXR1cm4gZGVsZXRlIGZbaF19ZGVmYXVsdDpuKDE3LHUpfX0pKSxyfSxOOmZ1bmN0aW9uKG4scix0LGUpe3N3aXRjaChuLmkpe2Nhc2UgMDpjYXNlIDQ6Y2FzZSAyOnJldHVybiBmdW5jdGlvbihuLHIsdCxlKXt2YXIgbz1uLnQscz1uLm87aShuLlIsKGZ1bmN0aW9uKG4saSl7dmFyIHY9YShvLG4pLHA9YShzLG4pLGw9aT91KG8sbik/XCJyZXBsYWNlXCI6YzpcInJlbW92ZVwiO2lmKHYhPT1wfHxcInJlcGxhY2VcIiE9PWwpe3ZhciBkPXIuY29uY2F0KG4pO3QucHVzaChcInJlbW92ZVwiPT09bD97b3A6bCxwYXRoOmR9OntvcDpsLHBhdGg6ZCx2YWx1ZTpwfSksZS5wdXNoKGw9PT1jP3tvcDpcInJlbW92ZVwiLHBhdGg6ZH06XCJyZW1vdmVcIj09PWw/e29wOmMscGF0aDpkLHZhbHVlOmYodil9OntvcDpcInJlcGxhY2VcIixwYXRoOmQsdmFsdWU6Zih2KX0pfX0pKX0obixyLHQsZSk7Y2FzZSA1OmNhc2UgMTpyZXR1cm4gZnVuY3Rpb24obixyLHQsZSl7dmFyIGk9bi50LG89bi5SLHU9bi5vO2lmKHUubGVuZ3RoPGkubGVuZ3RoKXt2YXIgYT1bdSxpXTtpPWFbMF0sdT1hWzFdO3ZhciBzPVtlLHRdO3Q9c1swXSxlPXNbMV19Zm9yKHZhciB2PTA7djxpLmxlbmd0aDt2KyspaWYob1t2XSYmdVt2XSE9PWlbdl0pe3ZhciBwPXIuY29uY2F0KFt2XSk7dC5wdXNoKHtvcDpcInJlcGxhY2VcIixwYXRoOnAsdmFsdWU6Zih1W3ZdKX0pLGUucHVzaCh7b3A6XCJyZXBsYWNlXCIscGF0aDpwLHZhbHVlOmYoaVt2XSl9KX1mb3IodmFyIGw9aS5sZW5ndGg7bDx1Lmxlbmd0aDtsKyspe3ZhciBkPXIuY29uY2F0KFtsXSk7dC5wdXNoKHtvcDpjLHBhdGg6ZCx2YWx1ZTpmKHVbbF0pfSl9aS5sZW5ndGg8dS5sZW5ndGgmJmUucHVzaCh7b3A6XCJyZXBsYWNlXCIscGF0aDpyLmNvbmNhdChbXCJsZW5ndGhcIl0pLHZhbHVlOmkubGVuZ3RofSl9KG4scix0LGUpO2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24obixyLHQsZSl7dmFyIGk9bi50LG89bi5vLHU9MDtpLmZvckVhY2goKGZ1bmN0aW9uKG4pe2lmKCFvLmhhcyhuKSl7dmFyIGk9ci5jb25jYXQoW3VdKTt0LnB1c2goe29wOlwicmVtb3ZlXCIscGF0aDppLHZhbHVlOm59KSxlLnVuc2hpZnQoe29wOmMscGF0aDppLHZhbHVlOm59KX11Kyt9KSksdT0wLG8uZm9yRWFjaCgoZnVuY3Rpb24obil7aWYoIWkuaGFzKG4pKXt2YXIgbz1yLmNvbmNhdChbdV0pO3QucHVzaCh7b3A6YyxwYXRoOm8sdmFsdWU6bn0pLGUudW5zaGlmdCh7b3A6XCJyZW1vdmVcIixwYXRoOm8sdmFsdWU6bn0pfXUrK30pKX0obixyLHQsZSl9fSxNOmZ1bmN0aW9uKG4scix0LGUpe3QucHVzaCh7b3A6XCJyZXBsYWNlXCIscGF0aDpbXSx2YWx1ZTpyPT09SD92b2lkIDA6cn0pLGUucHVzaCh7b3A6XCJyZXBsYWNlXCIscGF0aDpbXSx2YWx1ZTpufSl9fSl9ZnVuY3Rpb24gQygpe2Z1bmN0aW9uIHIobixyKXtmdW5jdGlvbiB0KCl7dGhpcy5jb25zdHJ1Y3Rvcj1ufWEobixyKSxuLnByb3RvdHlwZT0odC5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IHQpfWZ1bmN0aW9uIGUobil7bi5vfHwobi5SPW5ldyBNYXAsbi5vPW5ldyBNYXAobi50KSl9ZnVuY3Rpb24gbyhuKXtuLm98fChuLm89bmV3IFNldCxuLnQuZm9yRWFjaCgoZnVuY3Rpb24ocil7aWYodChyKSl7dmFyIGU9TihuLkEuaCxyLG4pO24ucC5zZXQocixlKSxuLm8uYWRkKGUpfWVsc2Ugbi5vLmFkZChyKX0pKSl9ZnVuY3Rpb24gdShyKXtyLmcmJm4oMyxKU09OLnN0cmluZ2lmeShwKHIpKSl9dmFyIGE9ZnVuY3Rpb24obixyKXtyZXR1cm4oYT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24obixyKXtuLl9fcHJvdG9fXz1yfXx8ZnVuY3Rpb24obixyKXtmb3IodmFyIHQgaW4gcilyLmhhc093blByb3BlcnR5KHQpJiYoblt0XT1yW3RdKX0pKG4scil9LGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKG4scil7cmV0dXJuIHRoaXNbUV09e2k6MixsOnIsQTpyP3IuQTpfKCksUDohMSxJOiExLG86dm9pZCAwLFI6dm9pZCAwLHQ6bixrOnRoaXMsQzohMSxnOiExfSx0aGlzfXIobixNYXApO3ZhciBvPW4ucHJvdG90eXBlO3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkobyxcInNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHAodGhpc1tRXSkuc2l6ZX19KSxvLmhhcz1mdW5jdGlvbihuKXtyZXR1cm4gcCh0aGlzW1FdKS5oYXMobil9LG8uc2V0PWZ1bmN0aW9uKG4scil7dmFyIHQ9dGhpc1tRXTtyZXR1cm4gdSh0KSxwKHQpLmhhcyhuKSYmcCh0KS5nZXQobik9PT1yfHwoZSh0KSxrKHQpLHQuUi5zZXQobiwhMCksdC5vLnNldChuLHIpLHQuUi5zZXQobiwhMCkpLHRoaXN9LG8uZGVsZXRlPWZ1bmN0aW9uKG4pe2lmKCF0aGlzLmhhcyhuKSlyZXR1cm4hMTt2YXIgcj10aGlzW1FdO3JldHVybiB1KHIpLGUociksayhyKSxyLnQuaGFzKG4pP3IuUi5zZXQobiwhMSk6ci5SLmRlbGV0ZShuKSxyLm8uZGVsZXRlKG4pLCEwfSxvLmNsZWFyPWZ1bmN0aW9uKCl7dmFyIG49dGhpc1tRXTt1KG4pLHAobikuc2l6ZSYmKGUobiksayhuKSxuLlI9bmV3IE1hcCxpKG4udCwoZnVuY3Rpb24ocil7bi5SLnNldChyLCExKX0pKSxuLm8uY2xlYXIoKSl9LG8uZm9yRWFjaD1mdW5jdGlvbihuLHIpe3ZhciB0PXRoaXM7cCh0aGlzW1FdKS5mb3JFYWNoKChmdW5jdGlvbihlLGkpe24uY2FsbChyLHQuZ2V0KGkpLGksdCl9KSl9LG8uZ2V0PWZ1bmN0aW9uKG4pe3ZhciByPXRoaXNbUV07dShyKTt2YXIgaT1wKHIpLmdldChuKTtpZihyLkl8fCF0KGkpKXJldHVybiBpO2lmKGkhPT1yLnQuZ2V0KG4pKXJldHVybiBpO3ZhciBvPU4oci5BLmgsaSxyKTtyZXR1cm4gZShyKSxyLm8uc2V0KG4sbyksb30sby5rZXlzPWZ1bmN0aW9uKCl7cmV0dXJuIHAodGhpc1tRXSkua2V5cygpfSxvLnZhbHVlcz1mdW5jdGlvbigpe3ZhciBuLHI9dGhpcyx0PXRoaXMua2V5cygpO3JldHVybihuPXt9KVtWXT1mdW5jdGlvbigpe3JldHVybiByLnZhbHVlcygpfSxuLm5leHQ9ZnVuY3Rpb24oKXt2YXIgbj10Lm5leHQoKTtyZXR1cm4gbi5kb25lP246e2RvbmU6ITEsdmFsdWU6ci5nZXQobi52YWx1ZSl9fSxufSxvLmVudHJpZXM9ZnVuY3Rpb24oKXt2YXIgbixyPXRoaXMsdD10aGlzLmtleXMoKTtyZXR1cm4obj17fSlbVl09ZnVuY3Rpb24oKXtyZXR1cm4gci5lbnRyaWVzKCl9LG4ubmV4dD1mdW5jdGlvbigpe3ZhciBuPXQubmV4dCgpO2lmKG4uZG9uZSlyZXR1cm4gbjt2YXIgZT1yLmdldChuLnZhbHVlKTtyZXR1cm57ZG9uZTohMSx2YWx1ZTpbbi52YWx1ZSxlXX19LG59LG9bVl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbnRyaWVzKCl9LG59KCksYz1mdW5jdGlvbigpe2Z1bmN0aW9uIG4obixyKXtyZXR1cm4gdGhpc1tRXT17aTozLGw6cixBOnI/ci5BOl8oKSxQOiExLEk6ITEsbzp2b2lkIDAsdDpuLGs6dGhpcyxwOm5ldyBNYXAsZzohMSxDOiExfSx0aGlzfXIobixTZXQpO3ZhciB0PW4ucHJvdG90eXBlO3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcInNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHAodGhpc1tRXSkuc2l6ZX19KSx0Lmhhcz1mdW5jdGlvbihuKXt2YXIgcj10aGlzW1FdO3JldHVybiB1KHIpLHIubz8hIXIuby5oYXMobil8fCEoIXIucC5oYXMobil8fCFyLm8uaGFzKHIucC5nZXQobikpKTpyLnQuaGFzKG4pfSx0LmFkZD1mdW5jdGlvbihuKXt2YXIgcj10aGlzW1FdO3JldHVybiB1KHIpLHRoaXMuaGFzKG4pfHwobyhyKSxrKHIpLHIuby5hZGQobikpLHRoaXN9LHQuZGVsZXRlPWZ1bmN0aW9uKG4pe2lmKCF0aGlzLmhhcyhuKSlyZXR1cm4hMTt2YXIgcj10aGlzW1FdO3JldHVybiB1KHIpLG8ociksayhyKSxyLm8uZGVsZXRlKG4pfHwhIXIucC5oYXMobikmJnIuby5kZWxldGUoci5wLmdldChuKSl9LHQuY2xlYXI9ZnVuY3Rpb24oKXt2YXIgbj10aGlzW1FdO3UobikscChuKS5zaXplJiYobyhuKSxrKG4pLG4uby5jbGVhcigpKX0sdC52YWx1ZXM9ZnVuY3Rpb24oKXt2YXIgbj10aGlzW1FdO3JldHVybiB1KG4pLG8obiksbi5vLnZhbHVlcygpfSx0LmVudHJpZXM9ZnVuY3Rpb24oKXt2YXIgbj10aGlzW1FdO3JldHVybiB1KG4pLG8obiksbi5vLmVudHJpZXMoKX0sdC5rZXlzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVzKCl9LHRbVl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZXMoKX0sdC5mb3JFYWNoPWZ1bmN0aW9uKG4scil7Zm9yKHZhciB0PXRoaXMudmFsdWVzKCksZT10Lm5leHQoKTshZS5kb25lOyluLmNhbGwocixlLnZhbHVlLGUudmFsdWUsdGhpcyksZT10Lm5leHQoKX0sbn0oKTttKFwiTWFwU2V0XCIse0Y6ZnVuY3Rpb24obixyKXtyZXR1cm4gbmV3IGYobixyKX0sVDpmdW5jdGlvbihuLHIpe3JldHVybiBuZXcgYyhuLHIpfX0pfWZ1bmN0aW9uIEooKXtGKCksQygpLFQoKX1mdW5jdGlvbiBLKG4pe3JldHVybiBufWZ1bmN0aW9uICQobil7cmV0dXJuIG59dmFyIEcsVSxXPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2woXCJ4XCIpLFg9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIE1hcCxxPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBTZXQsQj1cInVuZGVmaW5lZFwiIT10eXBlb2YgUHJveHkmJnZvaWQgMCE9PVByb3h5LnJldm9jYWJsZSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFJlZmxlY3QsSD1XP1N5bWJvbC5mb3IoXCJpbW1lci1ub3RoaW5nXCIpOigoRz17fSlbXCJpbW1lci1ub3RoaW5nXCJdPSEwLEcpLEw9Vz9TeW1ib2wuZm9yKFwiaW1tZXItZHJhZnRhYmxlXCIpOlwiX18kaW1tZXJfZHJhZnRhYmxlXCIsUT1XP1N5bWJvbC5mb3IoXCJpbW1lci1zdGF0ZVwiKTpcIl9fJGltbWVyX3N0YXRlXCIsVj1cInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3J8fFwiQEBpdGVyYXRvclwiLFk9ezA6XCJJbGxlZ2FsIHN0YXRlXCIsMTpcIkltbWVyIGRyYWZ0cyBjYW5ub3QgaGF2ZSBjb21wdXRlZCBwcm9wZXJ0aWVzXCIsMjpcIlRoaXMgb2JqZWN0IGhhcyBiZWVuIGZyb3plbiBhbmQgc2hvdWxkIG5vdCBiZSBtdXRhdGVkXCIsMzpmdW5jdGlvbihuKXtyZXR1cm5cIkNhbm5vdCB1c2UgYSBwcm94eSB0aGF0IGhhcyBiZWVuIHJldm9rZWQuIERpZCB5b3UgcGFzcyBhbiBvYmplY3QgZnJvbSBpbnNpZGUgYW4gaW1tZXIgZnVuY3Rpb24gdG8gYW4gYXN5bmMgcHJvY2Vzcz8gXCIrbn0sNDpcIkFuIGltbWVyIHByb2R1Y2VyIHJldHVybmVkIGEgbmV3IHZhbHVlICphbmQqIG1vZGlmaWVkIGl0cyBkcmFmdC4gRWl0aGVyIHJldHVybiBhIG5ldyB2YWx1ZSAqb3IqIG1vZGlmeSB0aGUgZHJhZnQuXCIsNTpcIkltbWVyIGZvcmJpZHMgY2lyY3VsYXIgcmVmZXJlbmNlc1wiLDY6XCJUaGUgZmlyc3Qgb3Igc2Vjb25kIGFyZ3VtZW50IHRvIGBwcm9kdWNlYCBtdXN0IGJlIGEgZnVuY3Rpb25cIiw3OlwiVGhlIHRoaXJkIGFyZ3VtZW50IHRvIGBwcm9kdWNlYCBtdXN0IGJlIGEgZnVuY3Rpb24gb3IgdW5kZWZpbmVkXCIsODpcIkZpcnN0IGFyZ3VtZW50IHRvIGBjcmVhdGVEcmFmdGAgbXVzdCBiZSBhIHBsYWluIG9iamVjdCwgYW4gYXJyYXksIG9yIGFuIGltbWVyYWJsZSBvYmplY3RcIiw5OlwiRmlyc3QgYXJndW1lbnQgdG8gYGZpbmlzaERyYWZ0YCBtdXN0IGJlIGEgZHJhZnQgcmV0dXJuZWQgYnkgYGNyZWF0ZURyYWZ0YFwiLDEwOlwiVGhlIGdpdmVuIGRyYWZ0IGlzIGFscmVhZHkgZmluYWxpemVkXCIsMTE6XCJPYmplY3QuZGVmaW5lUHJvcGVydHkoKSBjYW5ub3QgYmUgdXNlZCBvbiBhbiBJbW1lciBkcmFmdFwiLDEyOlwiT2JqZWN0LnNldFByb3RvdHlwZU9mKCkgY2Fubm90IGJlIHVzZWQgb24gYW4gSW1tZXIgZHJhZnRcIiwxMzpcIkltbWVyIG9ubHkgc3VwcG9ydHMgZGVsZXRpbmcgYXJyYXkgaW5kaWNlc1wiLDE0OlwiSW1tZXIgb25seSBzdXBwb3J0cyBzZXR0aW5nIGFycmF5IGluZGljZXMgYW5kIHRoZSAnbGVuZ3RoJyBwcm9wZXJ0eVwiLDE1OmZ1bmN0aW9uKG4pe3JldHVyblwiQ2Fubm90IGFwcGx5IHBhdGNoLCBwYXRoIGRvZXNuJ3QgcmVzb2x2ZTogXCIrbn0sMTY6J1NldHMgY2Fubm90IGhhdmUgXCJyZXBsYWNlXCIgcGF0Y2hlcy4nLDE3OmZ1bmN0aW9uKG4pe3JldHVyblwiVW5zdXBwb3J0ZWQgcGF0Y2ggb3BlcmF0aW9uOiBcIitufSwxODpmdW5jdGlvbihuKXtyZXR1cm5cIlRoZSBwbHVnaW4gZm9yICdcIituK1wiJyBoYXMgbm90IGJlZW4gbG9hZGVkIGludG8gSW1tZXIuIFRvIGVuYWJsZSB0aGUgcGx1Z2luLCBpbXBvcnQgYW5kIGNhbGwgYGVuYWJsZVwiK24rXCIoKWAgd2hlbiBpbml0aWFsaXppbmcgeW91ciBhcHBsaWNhdGlvbi5cIn0sMjA6XCJDYW5ub3QgdXNlIHByb3hpZXMgaWYgUHJveHksIFByb3h5LnJldm9jYWJsZSBvciBSZWZsZWN0IGFyZSBub3QgYXZhaWxhYmxlXCIsMjE6ZnVuY3Rpb24obil7cmV0dXJuXCJwcm9kdWNlIGNhbiBvbmx5IGJlIGNhbGxlZCBvbiB0aGluZ3MgdGhhdCBhcmUgZHJhZnRhYmxlOiBwbGFpbiBvYmplY3RzLCBhcnJheXMsIE1hcCwgU2V0IG9yIGNsYXNzZXMgdGhhdCBhcmUgbWFya2VkIHdpdGggJ1tpbW1lcmFibGVdOiB0cnVlJy4gR290ICdcIituK1wiJ1wifSwyMjpmdW5jdGlvbihuKXtyZXR1cm5cIidjdXJyZW50JyBleHBlY3RzIGEgZHJhZnQsIGdvdDogXCIrbn0sMjM6ZnVuY3Rpb24obil7cmV0dXJuXCInb3JpZ2luYWwnIGV4cGVjdHMgYSBkcmFmdCwgZ290OiBcIitufSwyNDpcIlBhdGNoaW5nIHJlc2VydmVkIGF0dHJpYnV0ZXMgbGlrZSBfX3Byb3RvX18sIHByb3RvdHlwZSBhbmQgY29uc3RydWN0b3IgaXMgbm90IGFsbG93ZWRcIn0sWj1cIlwiK09iamVjdC5wcm90b3R5cGUuY29uc3RydWN0b3Isbm49XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFJlZmxlY3QmJlJlZmxlY3Qub3duS2V5cz9SZWZsZWN0Lm93bktleXM6dm9pZCAwIT09T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scz9mdW5jdGlvbihuKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMobikuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMobikpfTpPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyxybj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yc3x8ZnVuY3Rpb24obil7dmFyIHI9e307cmV0dXJuIG5uKG4pLmZvckVhY2goKGZ1bmN0aW9uKHQpe3JbdF09T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLHQpfSkpLHJ9LHRuPXt9LGVuPXtnZXQ6ZnVuY3Rpb24obixyKXtpZihyPT09USlyZXR1cm4gbjt2YXIgZT1wKG4pO2lmKCF1KGUscikpcmV0dXJuIGZ1bmN0aW9uKG4scix0KXt2YXIgZSxpPUkocix0KTtyZXR1cm4gaT9cInZhbHVlXCJpbiBpP2kudmFsdWU6bnVsbD09PShlPWkuZ2V0KXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5jYWxsKG4uayk6dm9pZCAwfShuLGUscik7dmFyIGk9ZVtyXTtyZXR1cm4gbi5JfHwhdChpKT9pOmk9PT16KG4udCxyKT8oRShuKSxuLm9bcl09TihuLkEuaCxpLG4pKTppfSxoYXM6ZnVuY3Rpb24obixyKXtyZXR1cm4gciBpbiBwKG4pfSxvd25LZXlzOmZ1bmN0aW9uKG4pe3JldHVybiBSZWZsZWN0Lm93bktleXMocChuKSl9LHNldDpmdW5jdGlvbihuLHIsdCl7dmFyIGU9SShwKG4pLHIpO2lmKG51bGw9PWU/dm9pZCAwOmUuc2V0KXJldHVybiBlLnNldC5jYWxsKG4uayx0KSwhMDtpZighbi5QKXt2YXIgaT16KHAobiksciksbz1udWxsPT1pP3ZvaWQgMDppW1FdO2lmKG8mJm8udD09PXQpcmV0dXJuIG4ub1tyXT10LG4uUltyXT0hMSwhMDtpZihjKHQsaSkmJih2b2lkIDAhPT10fHx1KG4udCxyKSkpcmV0dXJuITA7RShuKSxrKG4pfXJldHVybiBuLm9bcl09PT10JiYodm9pZCAwIT09dHx8ciBpbiBuLm8pfHxOdW1iZXIuaXNOYU4odCkmJk51bWJlci5pc05hTihuLm9bcl0pfHwobi5vW3JdPXQsbi5SW3JdPSEwKSwhMH0sZGVsZXRlUHJvcGVydHk6ZnVuY3Rpb24obixyKXtyZXR1cm4gdm9pZCAwIT09eihuLnQscil8fHIgaW4gbi50PyhuLlJbcl09ITEsRShuKSxrKG4pKTpkZWxldGUgbi5SW3JdLG4ubyYmZGVsZXRlIG4ub1tyXSwhMH0sZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOmZ1bmN0aW9uKG4scil7dmFyIHQ9cChuKSxlPVJlZmxlY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik7cmV0dXJuIGU/e3dyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZToxIT09bi5pfHxcImxlbmd0aFwiIT09cixlbnVtZXJhYmxlOmUuZW51bWVyYWJsZSx2YWx1ZTp0W3JdfTplfSxkZWZpbmVQcm9wZXJ0eTpmdW5jdGlvbigpe24oMTEpfSxnZXRQcm90b3R5cGVPZjpmdW5jdGlvbihuKXtyZXR1cm4gT2JqZWN0LmdldFByb3RvdHlwZU9mKG4udCl9LHNldFByb3RvdHlwZU9mOmZ1bmN0aW9uKCl7bigxMil9fSxvbj17fTtpKGVuLChmdW5jdGlvbihuLHIpe29uW25dPWZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c1swXT1hcmd1bWVudHNbMF1bMF0sci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSkpLG9uLmRlbGV0ZVByb3BlcnR5PWZ1bmN0aW9uKHIsdCl7cmV0dXJuXCJwcm9kdWN0aW9uXCIhPT1wcm9jZXNzLmVudi5OT0RFX0VOViYmaXNOYU4ocGFyc2VJbnQodCkpJiZuKDEzKSxvbi5zZXQuY2FsbCh0aGlzLHIsdCx2b2lkIDApfSxvbi5zZXQ9ZnVuY3Rpb24ocix0LGUpe3JldHVyblwicHJvZHVjdGlvblwiIT09cHJvY2Vzcy5lbnYuTk9ERV9FTlYmJlwibGVuZ3RoXCIhPT10JiZpc05hTihwYXJzZUludCh0KSkmJm4oMTQpLGVuLnNldC5jYWxsKHRoaXMsclswXSx0LGUsclswXSl9O3ZhciB1bj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUocil7dmFyIGU9dGhpczt0aGlzLk89Qix0aGlzLkQ9ITAsdGhpcy5wcm9kdWNlPWZ1bmN0aW9uKHIsaSxvKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiByJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBpKXt2YXIgdT1pO2k9cjt2YXIgYT1lO3JldHVybiBmdW5jdGlvbihuKXt2YXIgcj10aGlzO3ZvaWQgMD09PW4mJihuPXUpO2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLGU9QXJyYXkodD4xP3QtMTowKSxvPTE7bzx0O28rKyllW28tMV09YXJndW1lbnRzW29dO3JldHVybiBhLnByb2R1Y2UobiwoZnVuY3Rpb24obil7dmFyIHQ7cmV0dXJuKHQ9aSkuY2FsbC5hcHBseSh0LFtyLG5dLmNvbmNhdChlKSl9KSl9fXZhciBmO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGkmJm4oNiksdm9pZCAwIT09byYmXCJmdW5jdGlvblwiIT10eXBlb2YgbyYmbig3KSx0KHIpKXt2YXIgYz13KGUpLHM9TihlLHIsdm9pZCAwKSx2PSEwO3RyeXtmPWkocyksdj0hMX1maW5hbGx5e3Y/ZyhjKTpPKGMpfXJldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBQcm9taXNlJiZmIGluc3RhbmNlb2YgUHJvbWlzZT9mLnRoZW4oKGZ1bmN0aW9uKG4pe3JldHVybiBqKGMsbyksUChuLGMpfSksKGZ1bmN0aW9uKG4pe3Rocm93IGcoYyksbn0pKTooaihjLG8pLFAoZixjKSl9aWYoIXJ8fFwib2JqZWN0XCIhPXR5cGVvZiByKXtpZih2b2lkIDA9PT0oZj1pKHIpKSYmKGY9ciksZj09PUgmJihmPXZvaWQgMCksZS5EJiZkKGYsITApLG8pe3ZhciBwPVtdLGw9W107YihcIlBhdGNoZXNcIikuTShyLGYscCxsKSxvKHAsbCl9cmV0dXJuIGZ9bigyMSxyKX0sdGhpcy5wcm9kdWNlV2l0aFBhdGNoZXM9ZnVuY3Rpb24obixyKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBuKXJldHVybiBmdW5jdGlvbihyKXtmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aCxpPUFycmF5KHQ+MT90LTE6MCksbz0xO288dDtvKyspaVtvLTFdPWFyZ3VtZW50c1tvXTtyZXR1cm4gZS5wcm9kdWNlV2l0aFBhdGNoZXMociwoZnVuY3Rpb24ocil7cmV0dXJuIG4uYXBwbHkodm9pZCAwLFtyXS5jb25jYXQoaSkpfSkpfTt2YXIgdCxpLG89ZS5wcm9kdWNlKG4sciwoZnVuY3Rpb24obixyKXt0PW4saT1yfSkpO3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBQcm9taXNlJiZvIGluc3RhbmNlb2YgUHJvbWlzZT9vLnRoZW4oKGZ1bmN0aW9uKG4pe3JldHVybltuLHQsaV19KSk6W28sdCxpXX0sXCJib29sZWFuXCI9PXR5cGVvZihudWxsPT1yP3ZvaWQgMDpyLnVzZVByb3hpZXMpJiZ0aGlzLnNldFVzZVByb3hpZXMoci51c2VQcm94aWVzKSxcImJvb2xlYW5cIj09dHlwZW9mKG51bGw9PXI/dm9pZCAwOnIuYXV0b0ZyZWV6ZSkmJnRoaXMuc2V0QXV0b0ZyZWV6ZShyLmF1dG9GcmVlemUpfXZhciBpPWUucHJvdG90eXBlO3JldHVybiBpLmNyZWF0ZURyYWZ0PWZ1bmN0aW9uKGUpe3QoZSl8fG4oOCkscihlKSYmKGU9UihlKSk7dmFyIGk9dyh0aGlzKSxvPU4odGhpcyxlLHZvaWQgMCk7cmV0dXJuIG9bUV0uQz0hMCxPKGkpLG99LGkuZmluaXNoRHJhZnQ9ZnVuY3Rpb24ocix0KXt2YXIgZT1yJiZyW1FdO1wicHJvZHVjdGlvblwiIT09cHJvY2Vzcy5lbnYuTk9ERV9FTlYmJihlJiZlLkN8fG4oOSksZS5JJiZuKDEwKSk7dmFyIGk9ZS5BO3JldHVybiBqKGksdCksUCh2b2lkIDAsaSl9LGkuc2V0QXV0b0ZyZWV6ZT1mdW5jdGlvbihuKXt0aGlzLkQ9bn0saS5zZXRVc2VQcm94aWVzPWZ1bmN0aW9uKHIpe3ImJiFCJiZuKDIwKSx0aGlzLk89cn0saS5hcHBseVBhdGNoZXM9ZnVuY3Rpb24obix0KXt2YXIgZTtmb3IoZT10Lmxlbmd0aC0xO2U+PTA7ZS0tKXt2YXIgaT10W2VdO2lmKDA9PT1pLnBhdGgubGVuZ3RoJiZcInJlcGxhY2VcIj09PWkub3Ape249aS52YWx1ZTticmVha319ZT4tMSYmKHQ9dC5zbGljZShlKzEpKTt2YXIgbz1iKFwiUGF0Y2hlc1wiKS4kO3JldHVybiByKG4pP28obix0KTp0aGlzLnByb2R1Y2UobiwoZnVuY3Rpb24obil7cmV0dXJuIG8obix0KX0pKX0sZX0oKSxhbj1uZXcgdW4sZm49YW4ucHJvZHVjZSxjbj1hbi5wcm9kdWNlV2l0aFBhdGNoZXMuYmluZChhbiksc249YW4uc2V0QXV0b0ZyZWV6ZS5iaW5kKGFuKSx2bj1hbi5zZXRVc2VQcm94aWVzLmJpbmQoYW4pLHBuPWFuLmFwcGx5UGF0Y2hlcy5iaW5kKGFuKSxsbj1hbi5jcmVhdGVEcmFmdC5iaW5kKGFuKSxkbj1hbi5maW5pc2hEcmFmdC5iaW5kKGFuKTtleHBvcnQgZGVmYXVsdCBmbjtleHBvcnR7dW4gYXMgSW1tZXIscG4gYXMgYXBwbHlQYXRjaGVzLEsgYXMgY2FzdERyYWZ0LCQgYXMgY2FzdEltbXV0YWJsZSxsbiBhcyBjcmVhdGVEcmFmdCxSIGFzIGN1cnJlbnQsSiBhcyBlbmFibGVBbGxQbHVnaW5zLEYgYXMgZW5hYmxlRVM1LEMgYXMgZW5hYmxlTWFwU2V0LFQgYXMgZW5hYmxlUGF0Y2hlcyxkbiBhcyBmaW5pc2hEcmFmdCxkIGFzIGZyZWV6ZSxMIGFzIGltbWVyYWJsZSxyIGFzIGlzRHJhZnQsdCBhcyBpc0RyYWZ0YWJsZSxIIGFzIG5vdGhpbmcsZSBhcyBvcmlnaW5hbCxmbiBhcyBwcm9kdWNlLGNuIGFzIHByb2R1Y2VXaXRoUGF0Y2hlcyxzbiBhcyBzZXRBdXRvRnJlZXplLHZuIGFzIHNldFVzZVByb3hpZXN9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW1tZXIuZXNtLmpzLm1hcFxuIiwiaW1wb3J0IHsgY29uZmlndXJlU3RvcmUgfSBmcm9tIFwiQHJlZHV4anMvdG9vbGtpdFwiO1xyXG5pbXBvcnQgZm9jdXNlZE1vZGFsT2JzZXJ2ZXIgZnJvbSBcIi4vZm9jdXNlZE1vZGFsT2JzZXJ2ZXJcIjtcclxuaW1wb3J0IG1vZGFsRHJhZ09ic2VydmVyIGZyb20gXCIuL21vZGFsRHJhZ09ic2VydmVyXCI7XHJcbmltcG9ydCBtb2RhbE11dGF0ZU9ic2VydmVyIGZyb20gXCIuL21vZGFsTXV0YXRlT2JzZXJ2ZXJcIjtcclxuaW1wb3J0IG1vZGFsUmVzaXplT2JzZXJ2ZXIgZnJvbSBcIi4vbW9kYWxSZXNpemVPYnNlcnZlclwiO1xyXG5cclxuZXhwb3J0IGxldCBzdG9yZSA9IGNvbmZpZ3VyZVN0b3JlKHtcclxuICAgIHJlZHVjZXI6IHtcclxuICAgICAgICBtb2RhbE11dGF0ZU9ic2VydmVyLFxyXG4gICAgICAgIG1vZGFsRHJhZ09ic2VydmVyLFxyXG4gICAgICAgIGZvY3VzZWRNb2RhbE9ic2VydmVyLFxyXG4gICAgICAgIG1vZGFsUmVzaXplT2JzZXJ2ZXIsXHJcbiAgICB9XHJcbn0pO1xyXG5cclxubGV0IHo9MDtcclxuZXhwb3J0IGZ1bmN0aW9uIGdldFpJbmRleCgpe1xyXG4gICAgeiA9IHorMTtcclxuICAgIHJldHVybiB6O1xyXG59IiwiZnVuY3Rpb24gX3R5cGVvZihvKSB7XG4gIFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjtcblxuICByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvO1xuICB9IDogZnVuY3Rpb24gKG8pIHtcbiAgICByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbztcbiAgfSwgX3R5cGVvZihvKTtcbn1cbmV4cG9ydCB7IF90eXBlb2YgYXMgZGVmYXVsdCB9OyIsImltcG9ydCBfdHlwZW9mIGZyb20gXCIuL3R5cGVvZi5qc1wiO1xuaW1wb3J0IHRvUHJpbWl0aXZlIGZyb20gXCIuL3RvUHJpbWl0aXZlLmpzXCI7XG5mdW5jdGlvbiB0b1Byb3BlcnR5S2V5KHQpIHtcbiAgdmFyIGkgPSB0b1ByaW1pdGl2ZSh0LCBcInN0cmluZ1wiKTtcbiAgcmV0dXJuIFwic3ltYm9sXCIgPT0gX3R5cGVvZihpKSA/IGkgOiBpICsgXCJcIjtcbn1cbmV4cG9ydCB7IHRvUHJvcGVydHlLZXkgYXMgZGVmYXVsdCB9OyIsImltcG9ydCBfdHlwZW9mIGZyb20gXCIuL3R5cGVvZi5qc1wiO1xuZnVuY3Rpb24gdG9QcmltaXRpdmUodCwgcikge1xuICBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDtcbiAgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07XG4gIGlmICh2b2lkIDAgIT09IGUpIHtcbiAgICB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTtcbiAgICBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKGkpKSByZXR1cm4gaTtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7XG4gIH1cbiAgcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTtcbn1cbmV4cG9ydCB7IHRvUHJpbWl0aXZlIGFzIGRlZmF1bHQgfTsiLCJpbXBvcnQgZGVmaW5lUHJvcGVydHkgZnJvbSBcIi4vZGVmaW5lUHJvcGVydHkuanNcIjtcbmZ1bmN0aW9uIG93bktleXMoZSwgcikge1xuICB2YXIgdCA9IE9iamVjdC5rZXlzKGUpO1xuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtcbiAgICByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHtcbiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7XG4gICAgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7XG4gIH1cbiAgcmV0dXJuIHQ7XG59XG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkMihlKSB7XG4gIGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7XG4gICAgdmFyIHQgPSBudWxsICE9IGFyZ3VtZW50c1tyXSA/IGFyZ3VtZW50c1tyXSA6IHt9O1xuICAgIHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7XG4gICAgICBkZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTtcbiAgICB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpIDogb3duS2V5cyhPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24gKHIpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gZTtcbn1cbmV4cG9ydCB7IF9vYmplY3RTcHJlYWQyIGFzIGRlZmF1bHQgfTsiLCJpbXBvcnQgdG9Qcm9wZXJ0eUtleSBmcm9tIFwiLi90b1Byb3BlcnR5S2V5LmpzXCI7XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkoZSwgciwgdCkge1xuICByZXR1cm4gKHIgPSB0b1Byb3BlcnR5S2V5KHIpKSBpbiBlID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIHtcbiAgICB2YWx1ZTogdCxcbiAgICBlbnVtZXJhYmxlOiAhMCxcbiAgICBjb25maWd1cmFibGU6ICEwLFxuICAgIHdyaXRhYmxlOiAhMFxuICB9KSA6IGVbcl0gPSB0LCBlO1xufVxuZXhwb3J0IHsgX2RlZmluZVByb3BlcnR5IGFzIGRlZmF1bHQgfTsiLCJpbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyJztcblxuLyoqXG4gKiBBZGFwdGVkIGZyb20gUmVhY3Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9ibG9iL21hc3Rlci9wYWNrYWdlcy9zaGFyZWQvZm9ybWF0UHJvZEVycm9yTWVzc2FnZS5qc1xuICpcbiAqIERvIG5vdCByZXF1aXJlIHRoaXMgbW9kdWxlIGRpcmVjdGx5ISBVc2Ugbm9ybWFsIHRocm93IGVycm9yIGNhbGxzLiBUaGVzZSBtZXNzYWdlcyB3aWxsIGJlIHJlcGxhY2VkIHdpdGggZXJyb3IgY29kZXNcbiAqIGR1cmluZyBidWlsZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBjb2RlXG4gKi9cbmZ1bmN0aW9uIGZvcm1hdFByb2RFcnJvck1lc3NhZ2UoY29kZSkge1xuICByZXR1cm4gXCJNaW5pZmllZCBSZWR1eCBlcnJvciAjXCIgKyBjb2RlICsgXCI7IHZpc2l0IGh0dHBzOi8vcmVkdXguanMub3JnL0Vycm9ycz9jb2RlPVwiICsgY29kZSArIFwiIGZvciB0aGUgZnVsbCBtZXNzYWdlIG9yIFwiICsgJ3VzZSB0aGUgbm9uLW1pbmlmaWVkIGRldiBlbnZpcm9ubWVudCBmb3IgZnVsbCBlcnJvcnMuICc7XG59XG5cbi8vIElubGluZWQgdmVyc2lvbiBvZiB0aGUgYHN5bWJvbC1vYnNlcnZhYmxlYCBwb2x5ZmlsbFxudmFyICQkb2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbC5vYnNlcnZhYmxlIHx8ICdAQG9ic2VydmFibGUnO1xufSkoKTtcblxuLyoqXG4gKiBUaGVzZSBhcmUgcHJpdmF0ZSBhY3Rpb24gdHlwZXMgcmVzZXJ2ZWQgYnkgUmVkdXguXG4gKiBGb3IgYW55IHVua25vd24gYWN0aW9ucywgeW91IG11c3QgcmV0dXJuIHRoZSBjdXJyZW50IHN0YXRlLlxuICogSWYgdGhlIGN1cnJlbnQgc3RhdGUgaXMgdW5kZWZpbmVkLCB5b3UgbXVzdCByZXR1cm4gdGhlIGluaXRpYWwgc3RhdGUuXG4gKiBEbyBub3QgcmVmZXJlbmNlIHRoZXNlIGFjdGlvbiB0eXBlcyBkaXJlY3RseSBpbiB5b3VyIGNvZGUuXG4gKi9cbnZhciByYW5kb21TdHJpbmcgPSBmdW5jdGlvbiByYW5kb21TdHJpbmcoKSB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoNykuc3BsaXQoJycpLmpvaW4oJy4nKTtcbn07XG5cbnZhciBBY3Rpb25UeXBlcyA9IHtcbiAgSU5JVDogXCJAQHJlZHV4L0lOSVRcIiArIHJhbmRvbVN0cmluZygpLFxuICBSRVBMQUNFOiBcIkBAcmVkdXgvUkVQTEFDRVwiICsgcmFuZG9tU3RyaW5nKCksXG4gIFBST0JFX1VOS05PV05fQUNUSU9OOiBmdW5jdGlvbiBQUk9CRV9VTktOT1dOX0FDVElPTigpIHtcbiAgICByZXR1cm4gXCJAQHJlZHV4L1BST0JFX1VOS05PV05fQUNUSU9OXCIgKyByYW5kb21TdHJpbmcoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge2FueX0gb2JqIFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBhcmd1bWVudCBhcHBlYXJzIHRvIGJlIGEgcGxhaW4gb2JqZWN0LlxuICovXG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KG9iaikge1xuICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG4gIHZhciBwcm90byA9IG9iajtcblxuICB3aGlsZSAoT2JqZWN0LmdldFByb3RvdHlwZU9mKHByb3RvKSAhPT0gbnVsbCkge1xuICAgIHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHByb3RvKTtcbiAgfVxuXG4gIHJldHVybiBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqKSA9PT0gcHJvdG87XG59XG5cbi8vIElubGluZWQgLyBzaG9ydGVuZWQgdmVyc2lvbiBvZiBga2luZE9mYCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9qb25zY2hsaW5rZXJ0L2tpbmQtb2ZcbmZ1bmN0aW9uIG1pbmlLaW5kT2YodmFsKSB7XG4gIGlmICh2YWwgPT09IHZvaWQgMCkgcmV0dXJuICd1bmRlZmluZWQnO1xuICBpZiAodmFsID09PSBudWxsKSByZXR1cm4gJ251bGwnO1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWw7XG5cbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnYm9vbGVhbic6XG4gICAgY2FzZSAnc3RyaW5nJzpcbiAgICBjYXNlICdudW1iZXInOlxuICAgIGNhc2UgJ3N5bWJvbCc6XG4gICAgY2FzZSAnZnVuY3Rpb24nOlxuICAgICAge1xuICAgICAgICByZXR1cm4gdHlwZTtcbiAgICAgIH1cbiAgfVxuXG4gIGlmIChBcnJheS5pc0FycmF5KHZhbCkpIHJldHVybiAnYXJyYXknO1xuICBpZiAoaXNEYXRlKHZhbCkpIHJldHVybiAnZGF0ZSc7XG4gIGlmIChpc0Vycm9yKHZhbCkpIHJldHVybiAnZXJyb3InO1xuICB2YXIgY29uc3RydWN0b3JOYW1lID0gY3Rvck5hbWUodmFsKTtcblxuICBzd2l0Y2ggKGNvbnN0cnVjdG9yTmFtZSkge1xuICAgIGNhc2UgJ1N5bWJvbCc6XG4gICAgY2FzZSAnUHJvbWlzZSc6XG4gICAgY2FzZSAnV2Vha01hcCc6XG4gICAgY2FzZSAnV2Vha1NldCc6XG4gICAgY2FzZSAnTWFwJzpcbiAgICBjYXNlICdTZXQnOlxuICAgICAgcmV0dXJuIGNvbnN0cnVjdG9yTmFtZTtcbiAgfSAvLyBvdGhlclxuXG5cbiAgcmV0dXJuIHR5cGUuc2xpY2UoOCwgLTEpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csICcnKTtcbn1cblxuZnVuY3Rpb24gY3Rvck5hbWUodmFsKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsLmNvbnN0cnVjdG9yID09PSAnZnVuY3Rpb24nID8gdmFsLmNvbnN0cnVjdG9yLm5hbWUgOiBudWxsO1xufVxuXG5mdW5jdGlvbiBpc0Vycm9yKHZhbCkge1xuICByZXR1cm4gdmFsIGluc3RhbmNlb2YgRXJyb3IgfHwgdHlwZW9mIHZhbC5tZXNzYWdlID09PSAnc3RyaW5nJyAmJiB2YWwuY29uc3RydWN0b3IgJiYgdHlwZW9mIHZhbC5jb25zdHJ1Y3Rvci5zdGFja1RyYWNlTGltaXQgPT09ICdudW1iZXInO1xufVxuXG5mdW5jdGlvbiBpc0RhdGUodmFsKSB7XG4gIGlmICh2YWwgaW5zdGFuY2VvZiBEYXRlKSByZXR1cm4gdHJ1ZTtcbiAgcmV0dXJuIHR5cGVvZiB2YWwudG9EYXRlU3RyaW5nID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiB2YWwuZ2V0RGF0ZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgdmFsLnNldERhdGUgPT09ICdmdW5jdGlvbic7XG59XG5cbmZ1bmN0aW9uIGtpbmRPZih2YWwpIHtcbiAgdmFyIHR5cGVPZlZhbCA9IHR5cGVvZiB2YWw7XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB0eXBlT2ZWYWwgPSBtaW5pS2luZE9mKHZhbCk7XG4gIH1cblxuICByZXR1cm4gdHlwZU9mVmFsO1xufVxuXG4vKipcbiAqIEBkZXByZWNhdGVkXG4gKlxuICogKipXZSByZWNvbW1lbmQgdXNpbmcgdGhlIGBjb25maWd1cmVTdG9yZWAgbWV0aG9kXG4gKiBvZiB0aGUgYEByZWR1eGpzL3Rvb2xraXRgIHBhY2thZ2UqKiwgd2hpY2ggcmVwbGFjZXMgYGNyZWF0ZVN0b3JlYC5cbiAqXG4gKiBSZWR1eCBUb29sa2l0IGlzIG91ciByZWNvbW1lbmRlZCBhcHByb2FjaCBmb3Igd3JpdGluZyBSZWR1eCBsb2dpYyB0b2RheSxcbiAqIGluY2x1ZGluZyBzdG9yZSBzZXR1cCwgcmVkdWNlcnMsIGRhdGEgZmV0Y2hpbmcsIGFuZCBtb3JlLlxuICpcbiAqICoqRm9yIG1vcmUgZGV0YWlscywgcGxlYXNlIHJlYWQgdGhpcyBSZWR1eCBkb2NzIHBhZ2U6KipcbiAqICoqaHR0cHM6Ly9yZWR1eC5qcy5vcmcvaW50cm9kdWN0aW9uL3doeS1ydGstaXMtcmVkdXgtdG9kYXkqKlxuICpcbiAqIGBjb25maWd1cmVTdG9yZWAgZnJvbSBSZWR1eCBUb29sa2l0IGlzIGFuIGltcHJvdmVkIHZlcnNpb24gb2YgYGNyZWF0ZVN0b3JlYCB0aGF0XG4gKiBzaW1wbGlmaWVzIHNldHVwIGFuZCBoZWxwcyBhdm9pZCBjb21tb24gYnVncy5cbiAqXG4gKiBZb3Ugc2hvdWxkIG5vdCBiZSB1c2luZyB0aGUgYHJlZHV4YCBjb3JlIHBhY2thZ2UgYnkgaXRzZWxmIHRvZGF5LCBleGNlcHQgZm9yIGxlYXJuaW5nIHB1cnBvc2VzLlxuICogVGhlIGBjcmVhdGVTdG9yZWAgbWV0aG9kIGZyb20gdGhlIGNvcmUgYHJlZHV4YCBwYWNrYWdlIHdpbGwgbm90IGJlIHJlbW92ZWQsIGJ1dCB3ZSBlbmNvdXJhZ2VcbiAqIGFsbCB1c2VycyB0byBtaWdyYXRlIHRvIHVzaW5nIFJlZHV4IFRvb2xraXQgZm9yIGFsbCBSZWR1eCBjb2RlLlxuICpcbiAqIElmIHlvdSB3YW50IHRvIHVzZSBgY3JlYXRlU3RvcmVgIHdpdGhvdXQgdGhpcyB2aXN1YWwgZGVwcmVjYXRpb24gd2FybmluZywgdXNlXG4gKiB0aGUgYGxlZ2FjeV9jcmVhdGVTdG9yZWAgaW1wb3J0IGluc3RlYWQ6XG4gKlxuICogYGltcG9ydCB7IGxlZ2FjeV9jcmVhdGVTdG9yZSBhcyBjcmVhdGVTdG9yZX0gZnJvbSAncmVkdXgnYFxuICpcbiAqL1xuXG5mdW5jdGlvbiBjcmVhdGVTdG9yZShyZWR1Y2VyLCBwcmVsb2FkZWRTdGF0ZSwgZW5oYW5jZXIpIHtcbiAgdmFyIF9yZWYyO1xuXG4gIGlmICh0eXBlb2YgcHJlbG9hZGVkU3RhdGUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGVuaGFuY2VyID09PSAnZnVuY3Rpb24nIHx8IHR5cGVvZiBlbmhhbmNlciA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgYXJndW1lbnRzWzNdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIiA/IGZvcm1hdFByb2RFcnJvck1lc3NhZ2UoMCkgOiAnSXQgbG9va3MgbGlrZSB5b3UgYXJlIHBhc3Npbmcgc2V2ZXJhbCBzdG9yZSBlbmhhbmNlcnMgdG8gJyArICdjcmVhdGVTdG9yZSgpLiBUaGlzIGlzIG5vdCBzdXBwb3J0ZWQuIEluc3RlYWQsIGNvbXBvc2UgdGhlbSAnICsgJ3RvZ2V0aGVyIHRvIGEgc2luZ2xlIGZ1bmN0aW9uLiBTZWUgaHR0cHM6Ly9yZWR1eC5qcy5vcmcvdHV0b3JpYWxzL2Z1bmRhbWVudGFscy9wYXJ0LTQtc3RvcmUjY3JlYXRpbmctYS1zdG9yZS13aXRoLWVuaGFuY2VycyBmb3IgYW4gZXhhbXBsZS4nKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgcHJlbG9hZGVkU3RhdGUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGVuaGFuY2VyID09PSAndW5kZWZpbmVkJykge1xuICAgIGVuaGFuY2VyID0gcHJlbG9hZGVkU3RhdGU7XG4gICAgcHJlbG9hZGVkU3RhdGUgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBpZiAodHlwZW9mIGVuaGFuY2VyICE9PSAndW5kZWZpbmVkJykge1xuICAgIGlmICh0eXBlb2YgZW5oYW5jZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIgPyBmb3JtYXRQcm9kRXJyb3JNZXNzYWdlKDEpIDogXCJFeHBlY3RlZCB0aGUgZW5oYW5jZXIgdG8gYmUgYSBmdW5jdGlvbi4gSW5zdGVhZCwgcmVjZWl2ZWQ6ICdcIiArIGtpbmRPZihlbmhhbmNlcikgKyBcIidcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVuaGFuY2VyKGNyZWF0ZVN0b3JlKShyZWR1Y2VyLCBwcmVsb2FkZWRTdGF0ZSk7XG4gIH1cblxuICBpZiAodHlwZW9mIHJlZHVjZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiID8gZm9ybWF0UHJvZEVycm9yTWVzc2FnZSgyKSA6IFwiRXhwZWN0ZWQgdGhlIHJvb3QgcmVkdWNlciB0byBiZSBhIGZ1bmN0aW9uLiBJbnN0ZWFkLCByZWNlaXZlZDogJ1wiICsga2luZE9mKHJlZHVjZXIpICsgXCInXCIpO1xuICB9XG5cbiAgdmFyIGN1cnJlbnRSZWR1Y2VyID0gcmVkdWNlcjtcbiAgdmFyIGN1cnJlbnRTdGF0ZSA9IHByZWxvYWRlZFN0YXRlO1xuICB2YXIgY3VycmVudExpc3RlbmVycyA9IFtdO1xuICB2YXIgbmV4dExpc3RlbmVycyA9IGN1cnJlbnRMaXN0ZW5lcnM7XG4gIHZhciBpc0Rpc3BhdGNoaW5nID0gZmFsc2U7XG4gIC8qKlxuICAgKiBUaGlzIG1ha2VzIGEgc2hhbGxvdyBjb3B5IG9mIGN1cnJlbnRMaXN0ZW5lcnMgc28gd2UgY2FuIHVzZVxuICAgKiBuZXh0TGlzdGVuZXJzIGFzIGEgdGVtcG9yYXJ5IGxpc3Qgd2hpbGUgZGlzcGF0Y2hpbmcuXG4gICAqXG4gICAqIFRoaXMgcHJldmVudHMgYW55IGJ1Z3MgYXJvdW5kIGNvbnN1bWVycyBjYWxsaW5nXG4gICAqIHN1YnNjcmliZS91bnN1YnNjcmliZSBpbiB0aGUgbWlkZGxlIG9mIGEgZGlzcGF0Y2guXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGVuc3VyZUNhbk11dGF0ZU5leHRMaXN0ZW5lcnMoKSB7XG4gICAgaWYgKG5leHRMaXN0ZW5lcnMgPT09IGN1cnJlbnRMaXN0ZW5lcnMpIHtcbiAgICAgIG5leHRMaXN0ZW5lcnMgPSBjdXJyZW50TGlzdGVuZXJzLnNsaWNlKCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZWFkcyB0aGUgc3RhdGUgdHJlZSBtYW5hZ2VkIGJ5IHRoZSBzdG9yZS5cbiAgICpcbiAgICogQHJldHVybnMge2FueX0gVGhlIGN1cnJlbnQgc3RhdGUgdHJlZSBvZiB5b3VyIGFwcGxpY2F0aW9uLlxuICAgKi9cblxuXG4gIGZ1bmN0aW9uIGdldFN0YXRlKCkge1xuICAgIGlmIChpc0Rpc3BhdGNoaW5nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiID8gZm9ybWF0UHJvZEVycm9yTWVzc2FnZSgzKSA6ICdZb3UgbWF5IG5vdCBjYWxsIHN0b3JlLmdldFN0YXRlKCkgd2hpbGUgdGhlIHJlZHVjZXIgaXMgZXhlY3V0aW5nLiAnICsgJ1RoZSByZWR1Y2VyIGhhcyBhbHJlYWR5IHJlY2VpdmVkIHRoZSBzdGF0ZSBhcyBhbiBhcmd1bWVudC4gJyArICdQYXNzIGl0IGRvd24gZnJvbSB0aGUgdG9wIHJlZHVjZXIgaW5zdGVhZCBvZiByZWFkaW5nIGl0IGZyb20gdGhlIHN0b3JlLicpO1xuICAgIH1cblxuICAgIHJldHVybiBjdXJyZW50U3RhdGU7XG4gIH1cbiAgLyoqXG4gICAqIEFkZHMgYSBjaGFuZ2UgbGlzdGVuZXIuIEl0IHdpbGwgYmUgY2FsbGVkIGFueSB0aW1lIGFuIGFjdGlvbiBpcyBkaXNwYXRjaGVkLFxuICAgKiBhbmQgc29tZSBwYXJ0IG9mIHRoZSBzdGF0ZSB0cmVlIG1heSBwb3RlbnRpYWxseSBoYXZlIGNoYW5nZWQuIFlvdSBtYXkgdGhlblxuICAgKiBjYWxsIGBnZXRTdGF0ZSgpYCB0byByZWFkIHRoZSBjdXJyZW50IHN0YXRlIHRyZWUgaW5zaWRlIHRoZSBjYWxsYmFjay5cbiAgICpcbiAgICogWW91IG1heSBjYWxsIGBkaXNwYXRjaCgpYCBmcm9tIGEgY2hhbmdlIGxpc3RlbmVyLCB3aXRoIHRoZSBmb2xsb3dpbmdcbiAgICogY2F2ZWF0czpcbiAgICpcbiAgICogMS4gVGhlIHN1YnNjcmlwdGlvbnMgYXJlIHNuYXBzaG90dGVkIGp1c3QgYmVmb3JlIGV2ZXJ5IGBkaXNwYXRjaCgpYCBjYWxsLlxuICAgKiBJZiB5b3Ugc3Vic2NyaWJlIG9yIHVuc3Vic2NyaWJlIHdoaWxlIHRoZSBsaXN0ZW5lcnMgYXJlIGJlaW5nIGludm9rZWQsIHRoaXNcbiAgICogd2lsbCBub3QgaGF2ZSBhbnkgZWZmZWN0IG9uIHRoZSBgZGlzcGF0Y2goKWAgdGhhdCBpcyBjdXJyZW50bHkgaW4gcHJvZ3Jlc3MuXG4gICAqIEhvd2V2ZXIsIHRoZSBuZXh0IGBkaXNwYXRjaCgpYCBjYWxsLCB3aGV0aGVyIG5lc3RlZCBvciBub3QsIHdpbGwgdXNlIGEgbW9yZVxuICAgKiByZWNlbnQgc25hcHNob3Qgb2YgdGhlIHN1YnNjcmlwdGlvbiBsaXN0LlxuICAgKlxuICAgKiAyLiBUaGUgbGlzdGVuZXIgc2hvdWxkIG5vdCBleHBlY3QgdG8gc2VlIGFsbCBzdGF0ZSBjaGFuZ2VzLCBhcyB0aGUgc3RhdGVcbiAgICogbWlnaHQgaGF2ZSBiZWVuIHVwZGF0ZWQgbXVsdGlwbGUgdGltZXMgZHVyaW5nIGEgbmVzdGVkIGBkaXNwYXRjaCgpYCBiZWZvcmVcbiAgICogdGhlIGxpc3RlbmVyIGlzIGNhbGxlZC4gSXQgaXMsIGhvd2V2ZXIsIGd1YXJhbnRlZWQgdGhhdCBhbGwgc3Vic2NyaWJlcnNcbiAgICogcmVnaXN0ZXJlZCBiZWZvcmUgdGhlIGBkaXNwYXRjaCgpYCBzdGFydGVkIHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlIGxhdGVzdFxuICAgKiBzdGF0ZSBieSB0aGUgdGltZSBpdCBleGl0cy5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgQSBjYWxsYmFjayB0byBiZSBpbnZva2VkIG9uIGV2ZXJ5IGRpc3BhdGNoLlxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IEEgZnVuY3Rpb24gdG8gcmVtb3ZlIHRoaXMgY2hhbmdlIGxpc3RlbmVyLlxuICAgKi9cblxuXG4gIGZ1bmN0aW9uIHN1YnNjcmliZShsaXN0ZW5lcikge1xuICAgIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIgPyBmb3JtYXRQcm9kRXJyb3JNZXNzYWdlKDQpIDogXCJFeHBlY3RlZCB0aGUgbGlzdGVuZXIgdG8gYmUgYSBmdW5jdGlvbi4gSW5zdGVhZCwgcmVjZWl2ZWQ6ICdcIiArIGtpbmRPZihsaXN0ZW5lcikgKyBcIidcIik7XG4gICAgfVxuXG4gICAgaWYgKGlzRGlzcGF0Y2hpbmcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIgPyBmb3JtYXRQcm9kRXJyb3JNZXNzYWdlKDUpIDogJ1lvdSBtYXkgbm90IGNhbGwgc3RvcmUuc3Vic2NyaWJlKCkgd2hpbGUgdGhlIHJlZHVjZXIgaXMgZXhlY3V0aW5nLiAnICsgJ0lmIHlvdSB3b3VsZCBsaWtlIHRvIGJlIG5vdGlmaWVkIGFmdGVyIHRoZSBzdG9yZSBoYXMgYmVlbiB1cGRhdGVkLCBzdWJzY3JpYmUgZnJvbSBhICcgKyAnY29tcG9uZW50IGFuZCBpbnZva2Ugc3RvcmUuZ2V0U3RhdGUoKSBpbiB0aGUgY2FsbGJhY2sgdG8gYWNjZXNzIHRoZSBsYXRlc3Qgc3RhdGUuICcgKyAnU2VlIGh0dHBzOi8vcmVkdXguanMub3JnL2FwaS9zdG9yZSNzdWJzY3JpYmVsaXN0ZW5lciBmb3IgbW9yZSBkZXRhaWxzLicpO1xuICAgIH1cblxuICAgIHZhciBpc1N1YnNjcmliZWQgPSB0cnVlO1xuICAgIGVuc3VyZUNhbk11dGF0ZU5leHRMaXN0ZW5lcnMoKTtcbiAgICBuZXh0TGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgIHJldHVybiBmdW5jdGlvbiB1bnN1YnNjcmliZSgpIHtcbiAgICAgIGlmICghaXNTdWJzY3JpYmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzRGlzcGF0Y2hpbmcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIiA/IGZvcm1hdFByb2RFcnJvck1lc3NhZ2UoNikgOiAnWW91IG1heSBub3QgdW5zdWJzY3JpYmUgZnJvbSBhIHN0b3JlIGxpc3RlbmVyIHdoaWxlIHRoZSByZWR1Y2VyIGlzIGV4ZWN1dGluZy4gJyArICdTZWUgaHR0cHM6Ly9yZWR1eC5qcy5vcmcvYXBpL3N0b3JlI3N1YnNjcmliZWxpc3RlbmVyIGZvciBtb3JlIGRldGFpbHMuJyk7XG4gICAgICB9XG5cbiAgICAgIGlzU3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgICAgZW5zdXJlQ2FuTXV0YXRlTmV4dExpc3RlbmVycygpO1xuICAgICAgdmFyIGluZGV4ID0gbmV4dExpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcbiAgICAgIG5leHRMaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIGN1cnJlbnRMaXN0ZW5lcnMgPSBudWxsO1xuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIERpc3BhdGNoZXMgYW4gYWN0aW9uLiBJdCBpcyB0aGUgb25seSB3YXkgdG8gdHJpZ2dlciBhIHN0YXRlIGNoYW5nZS5cbiAgICpcbiAgICogVGhlIGByZWR1Y2VyYCBmdW5jdGlvbiwgdXNlZCB0byBjcmVhdGUgdGhlIHN0b3JlLCB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZVxuICAgKiBjdXJyZW50IHN0YXRlIHRyZWUgYW5kIHRoZSBnaXZlbiBgYWN0aW9uYC4gSXRzIHJldHVybiB2YWx1ZSB3aWxsXG4gICAqIGJlIGNvbnNpZGVyZWQgdGhlICoqbmV4dCoqIHN0YXRlIG9mIHRoZSB0cmVlLCBhbmQgdGhlIGNoYW5nZSBsaXN0ZW5lcnNcbiAgICogd2lsbCBiZSBub3RpZmllZC5cbiAgICpcbiAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb25seSBzdXBwb3J0cyBwbGFpbiBvYmplY3QgYWN0aW9ucy4gSWYgeW91IHdhbnQgdG9cbiAgICogZGlzcGF0Y2ggYSBQcm9taXNlLCBhbiBPYnNlcnZhYmxlLCBhIHRodW5rLCBvciBzb21ldGhpbmcgZWxzZSwgeW91IG5lZWQgdG9cbiAgICogd3JhcCB5b3VyIHN0b3JlIGNyZWF0aW5nIGZ1bmN0aW9uIGludG8gdGhlIGNvcnJlc3BvbmRpbmcgbWlkZGxld2FyZS4gRm9yXG4gICAqIGV4YW1wbGUsIHNlZSB0aGUgZG9jdW1lbnRhdGlvbiBmb3IgdGhlIGByZWR1eC10aHVua2AgcGFja2FnZS4gRXZlbiB0aGVcbiAgICogbWlkZGxld2FyZSB3aWxsIGV2ZW50dWFsbHkgZGlzcGF0Y2ggcGxhaW4gb2JqZWN0IGFjdGlvbnMgdXNpbmcgdGhpcyBtZXRob2QuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhY3Rpb24gQSBwbGFpbiBvYmplY3QgcmVwcmVzZW50aW5nIOKAnHdoYXQgY2hhbmdlZOKAnS4gSXQgaXNcbiAgICogYSBnb29kIGlkZWEgdG8ga2VlcCBhY3Rpb25zIHNlcmlhbGl6YWJsZSBzbyB5b3UgY2FuIHJlY29yZCBhbmQgcmVwbGF5IHVzZXJcbiAgICogc2Vzc2lvbnMsIG9yIHVzZSB0aGUgdGltZSB0cmF2ZWxsaW5nIGByZWR1eC1kZXZ0b29sc2AuIEFuIGFjdGlvbiBtdXN0IGhhdmVcbiAgICogYSBgdHlwZWAgcHJvcGVydHkgd2hpY2ggbWF5IG5vdCBiZSBgdW5kZWZpbmVkYC4gSXQgaXMgYSBnb29kIGlkZWEgdG8gdXNlXG4gICAqIHN0cmluZyBjb25zdGFudHMgZm9yIGFjdGlvbiB0eXBlcy5cbiAgICpcbiAgICogQHJldHVybnMge09iamVjdH0gRm9yIGNvbnZlbmllbmNlLCB0aGUgc2FtZSBhY3Rpb24gb2JqZWN0IHlvdSBkaXNwYXRjaGVkLlxuICAgKlxuICAgKiBOb3RlIHRoYXQsIGlmIHlvdSB1c2UgYSBjdXN0b20gbWlkZGxld2FyZSwgaXQgbWF5IHdyYXAgYGRpc3BhdGNoKClgIHRvXG4gICAqIHJldHVybiBzb21ldGhpbmcgZWxzZSAoZm9yIGV4YW1wbGUsIGEgUHJvbWlzZSB5b3UgY2FuIGF3YWl0KS5cbiAgICovXG5cblxuICBmdW5jdGlvbiBkaXNwYXRjaChhY3Rpb24pIHtcbiAgICBpZiAoIWlzUGxhaW5PYmplY3QoYWN0aW9uKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIiA/IGZvcm1hdFByb2RFcnJvck1lc3NhZ2UoNykgOiBcIkFjdGlvbnMgbXVzdCBiZSBwbGFpbiBvYmplY3RzLiBJbnN0ZWFkLCB0aGUgYWN0dWFsIHR5cGUgd2FzOiAnXCIgKyBraW5kT2YoYWN0aW9uKSArIFwiJy4gWW91IG1heSBuZWVkIHRvIGFkZCBtaWRkbGV3YXJlIHRvIHlvdXIgc3RvcmUgc2V0dXAgdG8gaGFuZGxlIGRpc3BhdGNoaW5nIG90aGVyIHZhbHVlcywgc3VjaCBhcyAncmVkdXgtdGh1bmsnIHRvIGhhbmRsZSBkaXNwYXRjaGluZyBmdW5jdGlvbnMuIFNlZSBodHRwczovL3JlZHV4LmpzLm9yZy90dXRvcmlhbHMvZnVuZGFtZW50YWxzL3BhcnQtNC1zdG9yZSNtaWRkbGV3YXJlIGFuZCBodHRwczovL3JlZHV4LmpzLm9yZy90dXRvcmlhbHMvZnVuZGFtZW50YWxzL3BhcnQtNi1hc3luYy1sb2dpYyN1c2luZy10aGUtcmVkdXgtdGh1bmstbWlkZGxld2FyZSBmb3IgZXhhbXBsZXMuXCIpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgYWN0aW9uLnR5cGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiID8gZm9ybWF0UHJvZEVycm9yTWVzc2FnZSg4KSA6ICdBY3Rpb25zIG1heSBub3QgaGF2ZSBhbiB1bmRlZmluZWQgXCJ0eXBlXCIgcHJvcGVydHkuIFlvdSBtYXkgaGF2ZSBtaXNzcGVsbGVkIGFuIGFjdGlvbiB0eXBlIHN0cmluZyBjb25zdGFudC4nKTtcbiAgICB9XG5cbiAgICBpZiAoaXNEaXNwYXRjaGluZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIiA/IGZvcm1hdFByb2RFcnJvck1lc3NhZ2UoOSkgOiAnUmVkdWNlcnMgbWF5IG5vdCBkaXNwYXRjaCBhY3Rpb25zLicpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBpc0Rpc3BhdGNoaW5nID0gdHJ1ZTtcbiAgICAgIGN1cnJlbnRTdGF0ZSA9IGN1cnJlbnRSZWR1Y2VyKGN1cnJlbnRTdGF0ZSwgYWN0aW9uKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgaXNEaXNwYXRjaGluZyA9IGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBsaXN0ZW5lcnMgPSBjdXJyZW50TGlzdGVuZXJzID0gbmV4dExpc3RlbmVycztcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgbGlzdGVuZXIgPSBsaXN0ZW5lcnNbaV07XG4gICAgICBsaXN0ZW5lcigpO1xuICAgIH1cblxuICAgIHJldHVybiBhY3Rpb247XG4gIH1cbiAgLyoqXG4gICAqIFJlcGxhY2VzIHRoZSByZWR1Y2VyIGN1cnJlbnRseSB1c2VkIGJ5IHRoZSBzdG9yZSB0byBjYWxjdWxhdGUgdGhlIHN0YXRlLlxuICAgKlxuICAgKiBZb3UgbWlnaHQgbmVlZCB0aGlzIGlmIHlvdXIgYXBwIGltcGxlbWVudHMgY29kZSBzcGxpdHRpbmcgYW5kIHlvdSB3YW50IHRvXG4gICAqIGxvYWQgc29tZSBvZiB0aGUgcmVkdWNlcnMgZHluYW1pY2FsbHkuIFlvdSBtaWdodCBhbHNvIG5lZWQgdGhpcyBpZiB5b3VcbiAgICogaW1wbGVtZW50IGEgaG90IHJlbG9hZGluZyBtZWNoYW5pc20gZm9yIFJlZHV4LlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBuZXh0UmVkdWNlciBUaGUgcmVkdWNlciBmb3IgdGhlIHN0b3JlIHRvIHVzZSBpbnN0ZWFkLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG5cblxuICBmdW5jdGlvbiByZXBsYWNlUmVkdWNlcihuZXh0UmVkdWNlcikge1xuICAgIGlmICh0eXBlb2YgbmV4dFJlZHVjZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIgPyBmb3JtYXRQcm9kRXJyb3JNZXNzYWdlKDEwKSA6IFwiRXhwZWN0ZWQgdGhlIG5leHRSZWR1Y2VyIHRvIGJlIGEgZnVuY3Rpb24uIEluc3RlYWQsIHJlY2VpdmVkOiAnXCIgKyBraW5kT2YobmV4dFJlZHVjZXIpKTtcbiAgICB9XG5cbiAgICBjdXJyZW50UmVkdWNlciA9IG5leHRSZWR1Y2VyOyAvLyBUaGlzIGFjdGlvbiBoYXMgYSBzaW1pbGlhciBlZmZlY3QgdG8gQWN0aW9uVHlwZXMuSU5JVC5cbiAgICAvLyBBbnkgcmVkdWNlcnMgdGhhdCBleGlzdGVkIGluIGJvdGggdGhlIG5ldyBhbmQgb2xkIHJvb3RSZWR1Y2VyXG4gICAgLy8gd2lsbCByZWNlaXZlIHRoZSBwcmV2aW91cyBzdGF0ZS4gVGhpcyBlZmZlY3RpdmVseSBwb3B1bGF0ZXNcbiAgICAvLyB0aGUgbmV3IHN0YXRlIHRyZWUgd2l0aCBhbnkgcmVsZXZhbnQgZGF0YSBmcm9tIHRoZSBvbGQgb25lLlxuXG4gICAgZGlzcGF0Y2goe1xuICAgICAgdHlwZTogQWN0aW9uVHlwZXMuUkVQTEFDRVxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBJbnRlcm9wZXJhYmlsaXR5IHBvaW50IGZvciBvYnNlcnZhYmxlL3JlYWN0aXZlIGxpYnJhcmllcy5cbiAgICogQHJldHVybnMge29ic2VydmFibGV9IEEgbWluaW1hbCBvYnNlcnZhYmxlIG9mIHN0YXRlIGNoYW5nZXMuXG4gICAqIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWUgdGhlIG9ic2VydmFibGUgcHJvcG9zYWw6XG4gICAqIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLW9ic2VydmFibGVcbiAgICovXG5cblxuICBmdW5jdGlvbiBvYnNlcnZhYmxlKCkge1xuICAgIHZhciBfcmVmO1xuXG4gICAgdmFyIG91dGVyU3Vic2NyaWJlID0gc3Vic2NyaWJlO1xuICAgIHJldHVybiBfcmVmID0ge1xuICAgICAgLyoqXG4gICAgICAgKiBUaGUgbWluaW1hbCBvYnNlcnZhYmxlIHN1YnNjcmlwdGlvbiBtZXRob2QuXG4gICAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JzZXJ2ZXIgQW55IG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIGFzIGFuIG9ic2VydmVyLlxuICAgICAgICogVGhlIG9ic2VydmVyIG9iamVjdCBzaG91bGQgaGF2ZSBhIGBuZXh0YCBtZXRob2QuXG4gICAgICAgKiBAcmV0dXJucyB7c3Vic2NyaXB0aW9ufSBBbiBvYmplY3Qgd2l0aCBhbiBgdW5zdWJzY3JpYmVgIG1ldGhvZCB0aGF0IGNhblxuICAgICAgICogYmUgdXNlZCB0byB1bnN1YnNjcmliZSB0aGUgb2JzZXJ2YWJsZSBmcm9tIHRoZSBzdG9yZSwgYW5kIHByZXZlbnQgZnVydGhlclxuICAgICAgICogZW1pc3Npb24gb2YgdmFsdWVzIGZyb20gdGhlIG9ic2VydmFibGUuXG4gICAgICAgKi9cbiAgICAgIHN1YnNjcmliZTogZnVuY3Rpb24gc3Vic2NyaWJlKG9ic2VydmVyKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb2JzZXJ2ZXIgIT09ICdvYmplY3QnIHx8IG9ic2VydmVyID09PSBudWxsKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIiA/IGZvcm1hdFByb2RFcnJvck1lc3NhZ2UoMTEpIDogXCJFeHBlY3RlZCB0aGUgb2JzZXJ2ZXIgdG8gYmUgYW4gb2JqZWN0LiBJbnN0ZWFkLCByZWNlaXZlZDogJ1wiICsga2luZE9mKG9ic2VydmVyKSArIFwiJ1wiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9ic2VydmVTdGF0ZSgpIHtcbiAgICAgICAgICBpZiAob2JzZXJ2ZXIubmV4dCkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dChnZXRTdGF0ZSgpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBvYnNlcnZlU3RhdGUoKTtcbiAgICAgICAgdmFyIHVuc3Vic2NyaWJlID0gb3V0ZXJTdWJzY3JpYmUob2JzZXJ2ZVN0YXRlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB1bnN1YnNjcmliZTogdW5zdWJzY3JpYmVcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9LCBfcmVmWyQkb2JzZXJ2YWJsZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LCBfcmVmO1xuICB9IC8vIFdoZW4gYSBzdG9yZSBpcyBjcmVhdGVkLCBhbiBcIklOSVRcIiBhY3Rpb24gaXMgZGlzcGF0Y2hlZCBzbyB0aGF0IGV2ZXJ5XG4gIC8vIHJlZHVjZXIgcmV0dXJucyB0aGVpciBpbml0aWFsIHN0YXRlLiBUaGlzIGVmZmVjdGl2ZWx5IHBvcHVsYXRlc1xuICAvLyB0aGUgaW5pdGlhbCBzdGF0ZSB0cmVlLlxuXG5cbiAgZGlzcGF0Y2goe1xuICAgIHR5cGU6IEFjdGlvblR5cGVzLklOSVRcbiAgfSk7XG4gIHJldHVybiBfcmVmMiA9IHtcbiAgICBkaXNwYXRjaDogZGlzcGF0Y2gsXG4gICAgc3Vic2NyaWJlOiBzdWJzY3JpYmUsXG4gICAgZ2V0U3RhdGU6IGdldFN0YXRlLFxuICAgIHJlcGxhY2VSZWR1Y2VyOiByZXBsYWNlUmVkdWNlclxuICB9LCBfcmVmMlskJG9ic2VydmFibGVdID0gb2JzZXJ2YWJsZSwgX3JlZjI7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBSZWR1eCBzdG9yZSB0aGF0IGhvbGRzIHRoZSBzdGF0ZSB0cmVlLlxuICpcbiAqICoqV2UgcmVjb21tZW5kIHVzaW5nIGBjb25maWd1cmVTdG9yZWAgZnJvbSB0aGVcbiAqIGBAcmVkdXhqcy90b29sa2l0YCBwYWNrYWdlKiosIHdoaWNoIHJlcGxhY2VzIGBjcmVhdGVTdG9yZWA6XG4gKiAqKmh0dHBzOi8vcmVkdXguanMub3JnL2ludHJvZHVjdGlvbi93aHktcnRrLWlzLXJlZHV4LXRvZGF5KipcbiAqXG4gKiBUaGUgb25seSB3YXkgdG8gY2hhbmdlIHRoZSBkYXRhIGluIHRoZSBzdG9yZSBpcyB0byBjYWxsIGBkaXNwYXRjaCgpYCBvbiBpdC5cbiAqXG4gKiBUaGVyZSBzaG91bGQgb25seSBiZSBhIHNpbmdsZSBzdG9yZSBpbiB5b3VyIGFwcC4gVG8gc3BlY2lmeSBob3cgZGlmZmVyZW50XG4gKiBwYXJ0cyBvZiB0aGUgc3RhdGUgdHJlZSByZXNwb25kIHRvIGFjdGlvbnMsIHlvdSBtYXkgY29tYmluZSBzZXZlcmFsIHJlZHVjZXJzXG4gKiBpbnRvIGEgc2luZ2xlIHJlZHVjZXIgZnVuY3Rpb24gYnkgdXNpbmcgYGNvbWJpbmVSZWR1Y2Vyc2AuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVkdWNlciBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbmV4dCBzdGF0ZSB0cmVlLCBnaXZlblxuICogdGhlIGN1cnJlbnQgc3RhdGUgdHJlZSBhbmQgdGhlIGFjdGlvbiB0byBoYW5kbGUuXG4gKlxuICogQHBhcmFtIHthbnl9IFtwcmVsb2FkZWRTdGF0ZV0gVGhlIGluaXRpYWwgc3RhdGUuIFlvdSBtYXkgb3B0aW9uYWxseSBzcGVjaWZ5IGl0XG4gKiB0byBoeWRyYXRlIHRoZSBzdGF0ZSBmcm9tIHRoZSBzZXJ2ZXIgaW4gdW5pdmVyc2FsIGFwcHMsIG9yIHRvIHJlc3RvcmUgYVxuICogcHJldmlvdXNseSBzZXJpYWxpemVkIHVzZXIgc2Vzc2lvbi5cbiAqIElmIHlvdSB1c2UgYGNvbWJpbmVSZWR1Y2Vyc2AgdG8gcHJvZHVjZSB0aGUgcm9vdCByZWR1Y2VyIGZ1bmN0aW9uLCB0aGlzIG11c3QgYmVcbiAqIGFuIG9iamVjdCB3aXRoIHRoZSBzYW1lIHNoYXBlIGFzIGBjb21iaW5lUmVkdWNlcnNgIGtleXMuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2VuaGFuY2VyXSBUaGUgc3RvcmUgZW5oYW5jZXIuIFlvdSBtYXkgb3B0aW9uYWxseSBzcGVjaWZ5IGl0XG4gKiB0byBlbmhhbmNlIHRoZSBzdG9yZSB3aXRoIHRoaXJkLXBhcnR5IGNhcGFiaWxpdGllcyBzdWNoIGFzIG1pZGRsZXdhcmUsXG4gKiB0aW1lIHRyYXZlbCwgcGVyc2lzdGVuY2UsIGV0Yy4gVGhlIG9ubHkgc3RvcmUgZW5oYW5jZXIgdGhhdCBzaGlwcyB3aXRoIFJlZHV4XG4gKiBpcyBgYXBwbHlNaWRkbGV3YXJlKClgLlxuICpcbiAqIEByZXR1cm5zIHtTdG9yZX0gQSBSZWR1eCBzdG9yZSB0aGF0IGxldHMgeW91IHJlYWQgdGhlIHN0YXRlLCBkaXNwYXRjaCBhY3Rpb25zXG4gKiBhbmQgc3Vic2NyaWJlIHRvIGNoYW5nZXMuXG4gKi9cblxudmFyIGxlZ2FjeV9jcmVhdGVTdG9yZSA9IGNyZWF0ZVN0b3JlO1xuXG4vKipcbiAqIFByaW50cyBhIHdhcm5pbmcgaW4gdGhlIGNvbnNvbGUgaWYgaXQgZXhpc3RzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIFRoZSB3YXJuaW5nIG1lc3NhZ2UuXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gd2FybmluZyhtZXNzYWdlKSB7XG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi9cbiAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgY29uc29sZS5lcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XG4gIH1cbiAgLyogZXNsaW50LWVuYWJsZSBuby1jb25zb2xlICovXG5cblxuICB0cnkge1xuICAgIC8vIFRoaXMgZXJyb3Igd2FzIHRocm93biBhcyBhIGNvbnZlbmllbmNlIHNvIHRoYXQgaWYgeW91IGVuYWJsZVxuICAgIC8vIFwiYnJlYWsgb24gYWxsIGV4Y2VwdGlvbnNcIiBpbiB5b3VyIGNvbnNvbGUsXG4gICAgLy8gaXQgd291bGQgcGF1c2UgdGhlIGV4ZWN1dGlvbiBhdCB0aGlzIGxpbmUuXG4gICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICB9IGNhdGNoIChlKSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWVtcHR5XG5cbn1cblxuZnVuY3Rpb24gZ2V0VW5leHBlY3RlZFN0YXRlU2hhcGVXYXJuaW5nTWVzc2FnZShpbnB1dFN0YXRlLCByZWR1Y2VycywgYWN0aW9uLCB1bmV4cGVjdGVkS2V5Q2FjaGUpIHtcbiAgdmFyIHJlZHVjZXJLZXlzID0gT2JqZWN0LmtleXMocmVkdWNlcnMpO1xuICB2YXIgYXJndW1lbnROYW1lID0gYWN0aW9uICYmIGFjdGlvbi50eXBlID09PSBBY3Rpb25UeXBlcy5JTklUID8gJ3ByZWxvYWRlZFN0YXRlIGFyZ3VtZW50IHBhc3NlZCB0byBjcmVhdGVTdG9yZScgOiAncHJldmlvdXMgc3RhdGUgcmVjZWl2ZWQgYnkgdGhlIHJlZHVjZXInO1xuXG4gIGlmIChyZWR1Y2VyS2V5cy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gJ1N0b3JlIGRvZXMgbm90IGhhdmUgYSB2YWxpZCByZWR1Y2VyLiBNYWtlIHN1cmUgdGhlIGFyZ3VtZW50IHBhc3NlZCAnICsgJ3RvIGNvbWJpbmVSZWR1Y2VycyBpcyBhbiBvYmplY3Qgd2hvc2UgdmFsdWVzIGFyZSByZWR1Y2Vycy4nO1xuICB9XG5cbiAgaWYgKCFpc1BsYWluT2JqZWN0KGlucHV0U3RhdGUpKSB7XG4gICAgcmV0dXJuIFwiVGhlIFwiICsgYXJndW1lbnROYW1lICsgXCIgaGFzIHVuZXhwZWN0ZWQgdHlwZSBvZiBcXFwiXCIgKyBraW5kT2YoaW5wdXRTdGF0ZSkgKyBcIlxcXCIuIEV4cGVjdGVkIGFyZ3VtZW50IHRvIGJlIGFuIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgXCIgKyAoXCJrZXlzOiBcXFwiXCIgKyByZWR1Y2VyS2V5cy5qb2luKCdcIiwgXCInKSArIFwiXFxcIlwiKTtcbiAgfVxuXG4gIHZhciB1bmV4cGVjdGVkS2V5cyA9IE9iamVjdC5rZXlzKGlucHV0U3RhdGUpLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuICFyZWR1Y2Vycy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmICF1bmV4cGVjdGVkS2V5Q2FjaGVba2V5XTtcbiAgfSk7XG4gIHVuZXhwZWN0ZWRLZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIHVuZXhwZWN0ZWRLZXlDYWNoZVtrZXldID0gdHJ1ZTtcbiAgfSk7XG4gIGlmIChhY3Rpb24gJiYgYWN0aW9uLnR5cGUgPT09IEFjdGlvblR5cGVzLlJFUExBQ0UpIHJldHVybjtcblxuICBpZiAodW5leHBlY3RlZEtleXMubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBcIlVuZXhwZWN0ZWQgXCIgKyAodW5leHBlY3RlZEtleXMubGVuZ3RoID4gMSA/ICdrZXlzJyA6ICdrZXknKSArIFwiIFwiICsgKFwiXFxcIlwiICsgdW5leHBlY3RlZEtleXMuam9pbignXCIsIFwiJykgKyBcIlxcXCIgZm91bmQgaW4gXCIgKyBhcmd1bWVudE5hbWUgKyBcIi4gXCIpICsgXCJFeHBlY3RlZCB0byBmaW5kIG9uZSBvZiB0aGUga25vd24gcmVkdWNlciBrZXlzIGluc3RlYWQ6IFwiICsgKFwiXFxcIlwiICsgcmVkdWNlcktleXMuam9pbignXCIsIFwiJykgKyBcIlxcXCIuIFVuZXhwZWN0ZWQga2V5cyB3aWxsIGJlIGlnbm9yZWQuXCIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFzc2VydFJlZHVjZXJTaGFwZShyZWR1Y2Vycykge1xuICBPYmplY3Qua2V5cyhyZWR1Y2VycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIHJlZHVjZXIgPSByZWR1Y2Vyc1trZXldO1xuICAgIHZhciBpbml0aWFsU3RhdGUgPSByZWR1Y2VyKHVuZGVmaW5lZCwge1xuICAgICAgdHlwZTogQWN0aW9uVHlwZXMuSU5JVFxuICAgIH0pO1xuXG4gICAgaWYgKHR5cGVvZiBpbml0aWFsU3RhdGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiID8gZm9ybWF0UHJvZEVycm9yTWVzc2FnZSgxMikgOiBcIlRoZSBzbGljZSByZWR1Y2VyIGZvciBrZXkgXFxcIlwiICsga2V5ICsgXCJcXFwiIHJldHVybmVkIHVuZGVmaW5lZCBkdXJpbmcgaW5pdGlhbGl6YXRpb24uIFwiICsgXCJJZiB0aGUgc3RhdGUgcGFzc2VkIHRvIHRoZSByZWR1Y2VyIGlzIHVuZGVmaW5lZCwgeW91IG11c3QgXCIgKyBcImV4cGxpY2l0bHkgcmV0dXJuIHRoZSBpbml0aWFsIHN0YXRlLiBUaGUgaW5pdGlhbCBzdGF0ZSBtYXkgXCIgKyBcIm5vdCBiZSB1bmRlZmluZWQuIElmIHlvdSBkb24ndCB3YW50IHRvIHNldCBhIHZhbHVlIGZvciB0aGlzIHJlZHVjZXIsIFwiICsgXCJ5b3UgY2FuIHVzZSBudWxsIGluc3RlYWQgb2YgdW5kZWZpbmVkLlwiKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHJlZHVjZXIodW5kZWZpbmVkLCB7XG4gICAgICB0eXBlOiBBY3Rpb25UeXBlcy5QUk9CRV9VTktOT1dOX0FDVElPTigpXG4gICAgfSkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiID8gZm9ybWF0UHJvZEVycm9yTWVzc2FnZSgxMykgOiBcIlRoZSBzbGljZSByZWR1Y2VyIGZvciBrZXkgXFxcIlwiICsga2V5ICsgXCJcXFwiIHJldHVybmVkIHVuZGVmaW5lZCB3aGVuIHByb2JlZCB3aXRoIGEgcmFuZG9tIHR5cGUuIFwiICsgKFwiRG9uJ3QgdHJ5IHRvIGhhbmRsZSAnXCIgKyBBY3Rpb25UeXBlcy5JTklUICsgXCInIG9yIG90aGVyIGFjdGlvbnMgaW4gXFxcInJlZHV4LypcXFwiIFwiKSArIFwibmFtZXNwYWNlLiBUaGV5IGFyZSBjb25zaWRlcmVkIHByaXZhdGUuIEluc3RlYWQsIHlvdSBtdXN0IHJldHVybiB0aGUgXCIgKyBcImN1cnJlbnQgc3RhdGUgZm9yIGFueSB1bmtub3duIGFjdGlvbnMsIHVubGVzcyBpdCBpcyB1bmRlZmluZWQsIFwiICsgXCJpbiB3aGljaCBjYXNlIHlvdSBtdXN0IHJldHVybiB0aGUgaW5pdGlhbCBzdGF0ZSwgcmVnYXJkbGVzcyBvZiB0aGUgXCIgKyBcImFjdGlvbiB0eXBlLiBUaGUgaW5pdGlhbCBzdGF0ZSBtYXkgbm90IGJlIHVuZGVmaW5lZCwgYnV0IGNhbiBiZSBudWxsLlwiKTtcbiAgICB9XG4gIH0pO1xufVxuLyoqXG4gKiBUdXJucyBhbiBvYmplY3Qgd2hvc2UgdmFsdWVzIGFyZSBkaWZmZXJlbnQgcmVkdWNlciBmdW5jdGlvbnMsIGludG8gYSBzaW5nbGVcbiAqIHJlZHVjZXIgZnVuY3Rpb24uIEl0IHdpbGwgY2FsbCBldmVyeSBjaGlsZCByZWR1Y2VyLCBhbmQgZ2F0aGVyIHRoZWlyIHJlc3VsdHNcbiAqIGludG8gYSBzaW5nbGUgc3RhdGUgb2JqZWN0LCB3aG9zZSBrZXlzIGNvcnJlc3BvbmQgdG8gdGhlIGtleXMgb2YgdGhlIHBhc3NlZFxuICogcmVkdWNlciBmdW5jdGlvbnMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHJlZHVjZXJzIEFuIG9iamVjdCB3aG9zZSB2YWx1ZXMgY29ycmVzcG9uZCB0byBkaWZmZXJlbnRcbiAqIHJlZHVjZXIgZnVuY3Rpb25zIHRoYXQgbmVlZCB0byBiZSBjb21iaW5lZCBpbnRvIG9uZS4gT25lIGhhbmR5IHdheSB0byBvYnRhaW5cbiAqIGl0IGlzIHRvIHVzZSBFUzYgYGltcG9ydCAqIGFzIHJlZHVjZXJzYCBzeW50YXguIFRoZSByZWR1Y2VycyBtYXkgbmV2ZXIgcmV0dXJuXG4gKiB1bmRlZmluZWQgZm9yIGFueSBhY3Rpb24uIEluc3RlYWQsIHRoZXkgc2hvdWxkIHJldHVybiB0aGVpciBpbml0aWFsIHN0YXRlXG4gKiBpZiB0aGUgc3RhdGUgcGFzc2VkIHRvIHRoZW0gd2FzIHVuZGVmaW5lZCwgYW5kIHRoZSBjdXJyZW50IHN0YXRlIGZvciBhbnlcbiAqIHVucmVjb2duaXplZCBhY3Rpb24uXG4gKlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBBIHJlZHVjZXIgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGV2ZXJ5IHJlZHVjZXIgaW5zaWRlIHRoZVxuICogcGFzc2VkIG9iamVjdCwgYW5kIGJ1aWxkcyBhIHN0YXRlIG9iamVjdCB3aXRoIHRoZSBzYW1lIHNoYXBlLlxuICovXG5cblxuZnVuY3Rpb24gY29tYmluZVJlZHVjZXJzKHJlZHVjZXJzKSB7XG4gIHZhciByZWR1Y2VyS2V5cyA9IE9iamVjdC5rZXlzKHJlZHVjZXJzKTtcbiAgdmFyIGZpbmFsUmVkdWNlcnMgPSB7fTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHJlZHVjZXJLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGtleSA9IHJlZHVjZXJLZXlzW2ldO1xuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGlmICh0eXBlb2YgcmVkdWNlcnNba2V5XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgd2FybmluZyhcIk5vIHJlZHVjZXIgcHJvdmlkZWQgZm9yIGtleSBcXFwiXCIgKyBrZXkgKyBcIlxcXCJcIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiByZWR1Y2Vyc1trZXldID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBmaW5hbFJlZHVjZXJzW2tleV0gPSByZWR1Y2Vyc1trZXldO1xuICAgIH1cbiAgfVxuXG4gIHZhciBmaW5hbFJlZHVjZXJLZXlzID0gT2JqZWN0LmtleXMoZmluYWxSZWR1Y2Vycyk7IC8vIFRoaXMgaXMgdXNlZCB0byBtYWtlIHN1cmUgd2UgZG9uJ3Qgd2FybiBhYm91dCB0aGUgc2FtZVxuICAvLyBrZXlzIG11bHRpcGxlIHRpbWVzLlxuXG4gIHZhciB1bmV4cGVjdGVkS2V5Q2FjaGU7XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB1bmV4cGVjdGVkS2V5Q2FjaGUgPSB7fTtcbiAgfVxuXG4gIHZhciBzaGFwZUFzc2VydGlvbkVycm9yO1xuXG4gIHRyeSB7XG4gICAgYXNzZXJ0UmVkdWNlclNoYXBlKGZpbmFsUmVkdWNlcnMpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgc2hhcGVBc3NlcnRpb25FcnJvciA9IGU7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gY29tYmluYXRpb24oc3RhdGUsIGFjdGlvbikge1xuICAgIGlmIChzdGF0ZSA9PT0gdm9pZCAwKSB7XG4gICAgICBzdGF0ZSA9IHt9O1xuICAgIH1cblxuICAgIGlmIChzaGFwZUFzc2VydGlvbkVycm9yKSB7XG4gICAgICB0aHJvdyBzaGFwZUFzc2VydGlvbkVycm9yO1xuICAgIH1cblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgd2FybmluZ01lc3NhZ2UgPSBnZXRVbmV4cGVjdGVkU3RhdGVTaGFwZVdhcm5pbmdNZXNzYWdlKHN0YXRlLCBmaW5hbFJlZHVjZXJzLCBhY3Rpb24sIHVuZXhwZWN0ZWRLZXlDYWNoZSk7XG5cbiAgICAgIGlmICh3YXJuaW5nTWVzc2FnZSkge1xuICAgICAgICB3YXJuaW5nKHdhcm5pbmdNZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgaGFzQ2hhbmdlZCA9IGZhbHNlO1xuICAgIHZhciBuZXh0U3RhdGUgPSB7fTtcblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBmaW5hbFJlZHVjZXJLZXlzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIF9rZXkgPSBmaW5hbFJlZHVjZXJLZXlzW19pXTtcbiAgICAgIHZhciByZWR1Y2VyID0gZmluYWxSZWR1Y2Vyc1tfa2V5XTtcbiAgICAgIHZhciBwcmV2aW91c1N0YXRlRm9yS2V5ID0gc3RhdGVbX2tleV07XG4gICAgICB2YXIgbmV4dFN0YXRlRm9yS2V5ID0gcmVkdWNlcihwcmV2aW91c1N0YXRlRm9yS2V5LCBhY3Rpb24pO1xuXG4gICAgICBpZiAodHlwZW9mIG5leHRTdGF0ZUZvcktleSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdmFyIGFjdGlvblR5cGUgPSBhY3Rpb24gJiYgYWN0aW9uLnR5cGU7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIgPyBmb3JtYXRQcm9kRXJyb3JNZXNzYWdlKDE0KSA6IFwiV2hlbiBjYWxsZWQgd2l0aCBhbiBhY3Rpb24gb2YgdHlwZSBcIiArIChhY3Rpb25UeXBlID8gXCJcXFwiXCIgKyBTdHJpbmcoYWN0aW9uVHlwZSkgKyBcIlxcXCJcIiA6ICcodW5rbm93biB0eXBlKScpICsgXCIsIHRoZSBzbGljZSByZWR1Y2VyIGZvciBrZXkgXFxcIlwiICsgX2tleSArIFwiXFxcIiByZXR1cm5lZCB1bmRlZmluZWQuIFwiICsgXCJUbyBpZ25vcmUgYW4gYWN0aW9uLCB5b3UgbXVzdCBleHBsaWNpdGx5IHJldHVybiB0aGUgcHJldmlvdXMgc3RhdGUuIFwiICsgXCJJZiB5b3Ugd2FudCB0aGlzIHJlZHVjZXIgdG8gaG9sZCBubyB2YWx1ZSwgeW91IGNhbiByZXR1cm4gbnVsbCBpbnN0ZWFkIG9mIHVuZGVmaW5lZC5cIik7XG4gICAgICB9XG5cbiAgICAgIG5leHRTdGF0ZVtfa2V5XSA9IG5leHRTdGF0ZUZvcktleTtcbiAgICAgIGhhc0NoYW5nZWQgPSBoYXNDaGFuZ2VkIHx8IG5leHRTdGF0ZUZvcktleSAhPT0gcHJldmlvdXNTdGF0ZUZvcktleTtcbiAgICB9XG5cbiAgICBoYXNDaGFuZ2VkID0gaGFzQ2hhbmdlZCB8fCBmaW5hbFJlZHVjZXJLZXlzLmxlbmd0aCAhPT0gT2JqZWN0LmtleXMoc3RhdGUpLmxlbmd0aDtcbiAgICByZXR1cm4gaGFzQ2hhbmdlZCA/IG5leHRTdGF0ZSA6IHN0YXRlO1xuICB9O1xufVxuXG5mdW5jdGlvbiBiaW5kQWN0aW9uQ3JlYXRvcihhY3Rpb25DcmVhdG9yLCBkaXNwYXRjaCkge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBkaXNwYXRjaChhY3Rpb25DcmVhdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9O1xufVxuLyoqXG4gKiBUdXJucyBhbiBvYmplY3Qgd2hvc2UgdmFsdWVzIGFyZSBhY3Rpb24gY3JlYXRvcnMsIGludG8gYW4gb2JqZWN0IHdpdGggdGhlXG4gKiBzYW1lIGtleXMsIGJ1dCB3aXRoIGV2ZXJ5IGZ1bmN0aW9uIHdyYXBwZWQgaW50byBhIGBkaXNwYXRjaGAgY2FsbCBzbyB0aGV5XG4gKiBtYXkgYmUgaW52b2tlZCBkaXJlY3RseS4gVGhpcyBpcyBqdXN0IGEgY29udmVuaWVuY2UgbWV0aG9kLCBhcyB5b3UgY2FuIGNhbGxcbiAqIGBzdG9yZS5kaXNwYXRjaChNeUFjdGlvbkNyZWF0b3JzLmRvU29tZXRoaW5nKCkpYCB5b3Vyc2VsZiBqdXN0IGZpbmUuXG4gKlxuICogRm9yIGNvbnZlbmllbmNlLCB5b3UgY2FuIGFsc28gcGFzcyBhbiBhY3Rpb24gY3JlYXRvciBhcyB0aGUgZmlyc3QgYXJndW1lbnQsXG4gKiBhbmQgZ2V0IGEgZGlzcGF0Y2ggd3JhcHBlZCBmdW5jdGlvbiBpbiByZXR1cm4uXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R9IGFjdGlvbkNyZWF0b3JzIEFuIG9iamVjdCB3aG9zZSB2YWx1ZXMgYXJlIGFjdGlvblxuICogY3JlYXRvciBmdW5jdGlvbnMuIE9uZSBoYW5keSB3YXkgdG8gb2J0YWluIGl0IGlzIHRvIHVzZSBFUzYgYGltcG9ydCAqIGFzYFxuICogc3ludGF4LiBZb3UgbWF5IGFsc28gcGFzcyBhIHNpbmdsZSBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBkaXNwYXRjaCBUaGUgYGRpc3BhdGNoYCBmdW5jdGlvbiBhdmFpbGFibGUgb24geW91ciBSZWR1eFxuICogc3RvcmUuXG4gKlxuICogQHJldHVybnMge0Z1bmN0aW9ufE9iamVjdH0gVGhlIG9iamVjdCBtaW1pY2tpbmcgdGhlIG9yaWdpbmFsIG9iamVjdCwgYnV0IHdpdGhcbiAqIGV2ZXJ5IGFjdGlvbiBjcmVhdG9yIHdyYXBwZWQgaW50byB0aGUgYGRpc3BhdGNoYCBjYWxsLiBJZiB5b3UgcGFzc2VkIGFcbiAqIGZ1bmN0aW9uIGFzIGBhY3Rpb25DcmVhdG9yc2AsIHRoZSByZXR1cm4gdmFsdWUgd2lsbCBhbHNvIGJlIGEgc2luZ2xlXG4gKiBmdW5jdGlvbi5cbiAqL1xuXG5cbmZ1bmN0aW9uIGJpbmRBY3Rpb25DcmVhdG9ycyhhY3Rpb25DcmVhdG9ycywgZGlzcGF0Y2gpIHtcbiAgaWYgKHR5cGVvZiBhY3Rpb25DcmVhdG9ycyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBiaW5kQWN0aW9uQ3JlYXRvcihhY3Rpb25DcmVhdG9ycywgZGlzcGF0Y2gpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBhY3Rpb25DcmVhdG9ycyAhPT0gJ29iamVjdCcgfHwgYWN0aW9uQ3JlYXRvcnMgPT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiID8gZm9ybWF0UHJvZEVycm9yTWVzc2FnZSgxNikgOiBcImJpbmRBY3Rpb25DcmVhdG9ycyBleHBlY3RlZCBhbiBvYmplY3Qgb3IgYSBmdW5jdGlvbiwgYnV0IGluc3RlYWQgcmVjZWl2ZWQ6ICdcIiArIGtpbmRPZihhY3Rpb25DcmVhdG9ycykgKyBcIicuIFwiICsgXCJEaWQgeW91IHdyaXRlIFxcXCJpbXBvcnQgQWN0aW9uQ3JlYXRvcnMgZnJvbVxcXCIgaW5zdGVhZCBvZiBcXFwiaW1wb3J0ICogYXMgQWN0aW9uQ3JlYXRvcnMgZnJvbVxcXCI/XCIpO1xuICB9XG5cbiAgdmFyIGJvdW5kQWN0aW9uQ3JlYXRvcnMgPSB7fTtcblxuICBmb3IgKHZhciBrZXkgaW4gYWN0aW9uQ3JlYXRvcnMpIHtcbiAgICB2YXIgYWN0aW9uQ3JlYXRvciA9IGFjdGlvbkNyZWF0b3JzW2tleV07XG5cbiAgICBpZiAodHlwZW9mIGFjdGlvbkNyZWF0b3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGJvdW5kQWN0aW9uQ3JlYXRvcnNba2V5XSA9IGJpbmRBY3Rpb25DcmVhdG9yKGFjdGlvbkNyZWF0b3IsIGRpc3BhdGNoKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYm91bmRBY3Rpb25DcmVhdG9ycztcbn1cblxuLyoqXG4gKiBDb21wb3NlcyBzaW5nbGUtYXJndW1lbnQgZnVuY3Rpb25zIGZyb20gcmlnaHQgdG8gbGVmdC4gVGhlIHJpZ2h0bW9zdFxuICogZnVuY3Rpb24gY2FuIHRha2UgbXVsdGlwbGUgYXJndW1lbnRzIGFzIGl0IHByb3ZpZGVzIHRoZSBzaWduYXR1cmUgZm9yXG4gKiB0aGUgcmVzdWx0aW5nIGNvbXBvc2l0ZSBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0gey4uLkZ1bmN0aW9ufSBmdW5jcyBUaGUgZnVuY3Rpb25zIHRvIGNvbXBvc2UuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IEEgZnVuY3Rpb24gb2J0YWluZWQgYnkgY29tcG9zaW5nIHRoZSBhcmd1bWVudCBmdW5jdGlvbnNcbiAqIGZyb20gcmlnaHQgdG8gbGVmdC4gRm9yIGV4YW1wbGUsIGNvbXBvc2UoZiwgZywgaCkgaXMgaWRlbnRpY2FsIHRvIGRvaW5nXG4gKiAoLi4uYXJncykgPT4gZihnKGgoLi4uYXJncykpKS5cbiAqL1xuZnVuY3Rpb24gY29tcG9zZSgpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGZ1bmNzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIGZ1bmNzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgaWYgKGZ1bmNzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXJnKSB7XG4gICAgICByZXR1cm4gYXJnO1xuICAgIH07XG4gIH1cblxuICBpZiAoZnVuY3MubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIGZ1bmNzWzBdO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmNzLnJlZHVjZShmdW5jdGlvbiAoYSwgYikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gYShiLmFwcGx5KHZvaWQgMCwgYXJndW1lbnRzKSk7XG4gICAgfTtcbiAgfSk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHN0b3JlIGVuaGFuY2VyIHRoYXQgYXBwbGllcyBtaWRkbGV3YXJlIHRvIHRoZSBkaXNwYXRjaCBtZXRob2RcbiAqIG9mIHRoZSBSZWR1eCBzdG9yZS4gVGhpcyBpcyBoYW5keSBmb3IgYSB2YXJpZXR5IG9mIHRhc2tzLCBzdWNoIGFzIGV4cHJlc3NpbmdcbiAqIGFzeW5jaHJvbm91cyBhY3Rpb25zIGluIGEgY29uY2lzZSBtYW5uZXIsIG9yIGxvZ2dpbmcgZXZlcnkgYWN0aW9uIHBheWxvYWQuXG4gKlxuICogU2VlIGByZWR1eC10aHVua2AgcGFja2FnZSBhcyBhbiBleGFtcGxlIG9mIHRoZSBSZWR1eCBtaWRkbGV3YXJlLlxuICpcbiAqIEJlY2F1c2UgbWlkZGxld2FyZSBpcyBwb3RlbnRpYWxseSBhc3luY2hyb25vdXMsIHRoaXMgc2hvdWxkIGJlIHRoZSBmaXJzdFxuICogc3RvcmUgZW5oYW5jZXIgaW4gdGhlIGNvbXBvc2l0aW9uIGNoYWluLlxuICpcbiAqIE5vdGUgdGhhdCBlYWNoIG1pZGRsZXdhcmUgd2lsbCBiZSBnaXZlbiB0aGUgYGRpc3BhdGNoYCBhbmQgYGdldFN0YXRlYCBmdW5jdGlvbnNcbiAqIGFzIG5hbWVkIGFyZ3VtZW50cy5cbiAqXG4gKiBAcGFyYW0gey4uLkZ1bmN0aW9ufSBtaWRkbGV3YXJlcyBUaGUgbWlkZGxld2FyZSBjaGFpbiB0byBiZSBhcHBsaWVkLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBBIHN0b3JlIGVuaGFuY2VyIGFwcGx5aW5nIHRoZSBtaWRkbGV3YXJlLlxuICovXG5cbmZ1bmN0aW9uIGFwcGx5TWlkZGxld2FyZSgpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIG1pZGRsZXdhcmVzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIG1pZGRsZXdhcmVzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChjcmVhdGVTdG9yZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgc3RvcmUgPSBjcmVhdGVTdG9yZS5hcHBseSh2b2lkIDAsIGFyZ3VtZW50cyk7XG5cbiAgICAgIHZhciBfZGlzcGF0Y2ggPSBmdW5jdGlvbiBkaXNwYXRjaCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIiA/IGZvcm1hdFByb2RFcnJvck1lc3NhZ2UoMTUpIDogJ0Rpc3BhdGNoaW5nIHdoaWxlIGNvbnN0cnVjdGluZyB5b3VyIG1pZGRsZXdhcmUgaXMgbm90IGFsbG93ZWQuICcgKyAnT3RoZXIgbWlkZGxld2FyZSB3b3VsZCBub3QgYmUgYXBwbGllZCB0byB0aGlzIGRpc3BhdGNoLicpO1xuICAgICAgfTtcblxuICAgICAgdmFyIG1pZGRsZXdhcmVBUEkgPSB7XG4gICAgICAgIGdldFN0YXRlOiBzdG9yZS5nZXRTdGF0ZSxcbiAgICAgICAgZGlzcGF0Y2g6IGZ1bmN0aW9uIGRpc3BhdGNoKCkge1xuICAgICAgICAgIHJldHVybiBfZGlzcGF0Y2guYXBwbHkodm9pZCAwLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgdmFyIGNoYWluID0gbWlkZGxld2FyZXMubWFwKGZ1bmN0aW9uIChtaWRkbGV3YXJlKSB7XG4gICAgICAgIHJldHVybiBtaWRkbGV3YXJlKG1pZGRsZXdhcmVBUEkpO1xuICAgICAgfSk7XG4gICAgICBfZGlzcGF0Y2ggPSBjb21wb3NlLmFwcGx5KHZvaWQgMCwgY2hhaW4pKHN0b3JlLmRpc3BhdGNoKTtcbiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0b3JlKSwge30sIHtcbiAgICAgICAgZGlzcGF0Y2g6IF9kaXNwYXRjaFxuICAgICAgfSk7XG4gICAgfTtcbiAgfTtcbn1cblxuZXhwb3J0IHsgQWN0aW9uVHlwZXMgYXMgX19ET19OT1RfVVNFX19BY3Rpb25UeXBlcywgYXBwbHlNaWRkbGV3YXJlLCBiaW5kQWN0aW9uQ3JlYXRvcnMsIGNvbWJpbmVSZWR1Y2VycywgY29tcG9zZSwgY3JlYXRlU3RvcmUsIGxlZ2FjeV9jcmVhdGVTdG9yZSB9O1xuIiwiLyoqIEEgZnVuY3Rpb24gdGhhdCBhY2NlcHRzIGEgcG90ZW50aWFsIFwiZXh0cmEgYXJndW1lbnRcIiB2YWx1ZSB0byBiZSBpbmplY3RlZCBsYXRlcixcclxuICogYW5kIHJldHVybnMgYW4gaW5zdGFuY2Ugb2YgdGhlIHRodW5rIG1pZGRsZXdhcmUgdGhhdCB1c2VzIHRoYXQgdmFsdWVcclxuICovXG5mdW5jdGlvbiBjcmVhdGVUaHVua01pZGRsZXdhcmUoZXh0cmFBcmd1bWVudCkge1xuICAvLyBTdGFuZGFyZCBSZWR1eCBtaWRkbGV3YXJlIGRlZmluaXRpb24gcGF0dGVybjpcbiAgLy8gU2VlOiBodHRwczovL3JlZHV4LmpzLm9yZy90dXRvcmlhbHMvZnVuZGFtZW50YWxzL3BhcnQtNC1zdG9yZSN3cml0aW5nLWN1c3RvbS1taWRkbGV3YXJlXG4gIHZhciBtaWRkbGV3YXJlID0gZnVuY3Rpb24gbWlkZGxld2FyZShfcmVmKSB7XG4gICAgdmFyIGRpc3BhdGNoID0gX3JlZi5kaXNwYXRjaCxcbiAgICAgICAgZ2V0U3RhdGUgPSBfcmVmLmdldFN0YXRlO1xuICAgIHJldHVybiBmdW5jdGlvbiAobmV4dCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgLy8gVGhlIHRodW5rIG1pZGRsZXdhcmUgbG9va3MgZm9yIGFueSBmdW5jdGlvbnMgdGhhdCB3ZXJlIHBhc3NlZCB0byBgc3RvcmUuZGlzcGF0Y2hgLlxuICAgICAgICAvLyBJZiB0aGlzIFwiYWN0aW9uXCIgaXMgcmVhbGx5IGEgZnVuY3Rpb24sIGNhbGwgaXQgYW5kIHJldHVybiB0aGUgcmVzdWx0LlxuICAgICAgICBpZiAodHlwZW9mIGFjdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIC8vIEluamVjdCB0aGUgc3RvcmUncyBgZGlzcGF0Y2hgIGFuZCBgZ2V0U3RhdGVgIG1ldGhvZHMsIGFzIHdlbGwgYXMgYW55IFwiZXh0cmEgYXJnXCJcbiAgICAgICAgICByZXR1cm4gYWN0aW9uKGRpc3BhdGNoLCBnZXRTdGF0ZSwgZXh0cmFBcmd1bWVudCk7XG4gICAgICAgIH0gLy8gT3RoZXJ3aXNlLCBwYXNzIHRoZSBhY3Rpb24gZG93biB0aGUgbWlkZGxld2FyZSBjaGFpbiBhcyB1c3VhbFxuXG5cbiAgICAgICAgcmV0dXJuIG5leHQoYWN0aW9uKTtcbiAgICAgIH07XG4gICAgfTtcbiAgfTtcblxuICByZXR1cm4gbWlkZGxld2FyZTtcbn1cblxudmFyIHRodW5rID0gY3JlYXRlVGh1bmtNaWRkbGV3YXJlKCk7IC8vIEF0dGFjaCB0aGUgZmFjdG9yeSBmdW5jdGlvbiBzbyB1c2VycyBjYW4gY3JlYXRlIGEgY3VzdG9taXplZCB2ZXJzaW9uXG4vLyB3aXRoIHdoYXRldmVyIFwiZXh0cmEgYXJnXCIgdGhleSB3YW50IHRvIGluamVjdCBpbnRvIHRoZWlyIHRodW5rc1xuXG50aHVuay53aXRoRXh0cmFBcmd1bWVudCA9IGNyZWF0ZVRodW5rTWlkZGxld2FyZTtcbmV4cG9ydCBkZWZhdWx0IHRodW5rOyIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn07XHJcbnZhciBfX3NwcmVhZEFycmF5ID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5KSB8fCBmdW5jdGlvbiAodG8sIGZyb20pIHtcclxuICAgIGZvciAodmFyIGkgPSAwLCBpbCA9IGZyb20ubGVuZ3RoLCBqID0gdG8ubGVuZ3RoOyBpIDwgaWw7IGkrKywgaisrKVxyXG4gICAgICAgIHRvW2pdID0gZnJvbVtpXTtcclxuICAgIHJldHVybiB0bztcclxufTtcclxudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcclxudmFyIF9fZGVmUHJvcHMgPSBPYmplY3QuZGVmaW5lUHJvcGVydGllcztcclxudmFyIF9fZ2V0T3duUHJvcERlc2NzID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM7XHJcbnZhciBfX2dldE93blByb3BTeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scztcclxudmFyIF9faGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XHJcbnZhciBfX3Byb3BJc0VudW0gPSBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlO1xyXG52YXIgX19kZWZOb3JtYWxQcm9wID0gZnVuY3Rpb24gKG9iaiwga2V5LCB2YWx1ZSkgeyByZXR1cm4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlOyB9O1xyXG52YXIgX19zcHJlYWRWYWx1ZXMgPSBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgZm9yICh2YXIgcHJvcCBpbiBiIHx8IChiID0ge30pKVxyXG4gICAgICAgIGlmIChfX2hhc093blByb3AuY2FsbChiLCBwcm9wKSlcclxuICAgICAgICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xyXG4gICAgaWYgKF9fZ2V0T3duUHJvcFN5bWJvbHMpXHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYyA9IF9fZ2V0T3duUHJvcFN5bWJvbHMoYik7IF9pIDwgX2MubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBwcm9wID0gX2NbX2ldO1xyXG4gICAgICAgICAgICBpZiAoX19wcm9wSXNFbnVtLmNhbGwoYiwgcHJvcCkpXHJcbiAgICAgICAgICAgICAgICBfX2RlZk5vcm1hbFByb3AoYSwgcHJvcCwgYltwcm9wXSk7XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIGE7XHJcbn07XHJcbnZhciBfX3NwcmVhZFByb3BzID0gZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIF9fZGVmUHJvcHMoYSwgX19nZXRPd25Qcm9wRGVzY3MoYikpOyB9O1xyXG52YXIgX19hc3luYyA9IGZ1bmN0aW9uIChfX3RoaXMsIF9fYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgdmFyIGZ1bGZpbGxlZCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciByZWplY3RlZCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgc3RlcChnZW5lcmF0b3IudGhyb3codmFsdWUpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgc3RlcCA9IGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmRvbmUgPyByZXNvbHZlKHgudmFsdWUpIDogUHJvbWlzZS5yZXNvbHZlKHgudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH07XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KF9fdGhpcywgX19hcmd1bWVudHMpKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbi8vIHNyYy9pbmRleC50c1xyXG5pbXBvcnQgeyBlbmFibGVFUzUgfSBmcm9tIFwiaW1tZXJcIjtcclxuZXhwb3J0ICogZnJvbSBcInJlZHV4XCI7XHJcbmltcG9ydCB7IGRlZmF1bHQgYXMgZGVmYXVsdDIsIGN1cnJlbnQgYXMgY3VycmVudDIsIGZyZWV6ZSwgb3JpZ2luYWwsIGlzRHJhZnQgYXMgaXNEcmFmdDQgfSBmcm9tIFwiaW1tZXJcIjtcclxuaW1wb3J0IHsgY3JlYXRlU2VsZWN0b3IgYXMgY3JlYXRlU2VsZWN0b3IyIH0gZnJvbSBcInJlc2VsZWN0XCI7XHJcbi8vIHNyYy9jcmVhdGVEcmFmdFNhZmVTZWxlY3Rvci50c1xyXG5pbXBvcnQgeyBjdXJyZW50LCBpc0RyYWZ0IH0gZnJvbSBcImltbWVyXCI7XHJcbmltcG9ydCB7IGNyZWF0ZVNlbGVjdG9yIH0gZnJvbSBcInJlc2VsZWN0XCI7XHJcbnZhciBjcmVhdGVEcmFmdFNhZmVTZWxlY3RvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhcmdzID0gW107XHJcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgIH1cclxuICAgIHZhciBzZWxlY3RvciA9IGNyZWF0ZVNlbGVjdG9yLmFwcGx5KHZvaWQgMCwgYXJncyk7XHJcbiAgICB2YXIgd3JhcHBlZFNlbGVjdG9yID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIHJlc3QgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICByZXN0W19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2VsZWN0b3IuYXBwbHkodm9pZCAwLCBfX3NwcmVhZEFycmF5KFtpc0RyYWZ0KHZhbHVlKSA/IGN1cnJlbnQodmFsdWUpIDogdmFsdWVdLCByZXN0KSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHdyYXBwZWRTZWxlY3RvcjtcclxufTtcclxuLy8gc3JjL2NvbmZpZ3VyZVN0b3JlLnRzXHJcbmltcG9ydCB7IGNyZWF0ZVN0b3JlLCBjb21wb3NlIGFzIGNvbXBvc2UyLCBhcHBseU1pZGRsZXdhcmUsIGNvbWJpbmVSZWR1Y2VycyB9IGZyb20gXCJyZWR1eFwiO1xyXG4vLyBzcmMvZGV2dG9vbHNFeHRlbnNpb24udHNcclxuaW1wb3J0IHsgY29tcG9zZSB9IGZyb20gXCJyZWR1eFwiO1xyXG52YXIgY29tcG9zZVdpdGhEZXZUb29scyA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93Ll9fUkVEVVhfREVWVE9PTFNfRVhURU5TSU9OX0NPTVBPU0VfXyA/IHdpbmRvdy5fX1JFRFVYX0RFVlRPT0xTX0VYVEVOU0lPTl9DT01QT1NFX18gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcclxuICAgICAgICByZXR1cm4gdm9pZCAwO1xyXG4gICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09IFwib2JqZWN0XCIpXHJcbiAgICAgICAgcmV0dXJuIGNvbXBvc2U7XHJcbiAgICByZXR1cm4gY29tcG9zZS5hcHBseShudWxsLCBhcmd1bWVudHMpO1xyXG59O1xyXG52YXIgZGV2VG9vbHNFbmhhbmNlciA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93Ll9fUkVEVVhfREVWVE9PTFNfRVhURU5TSU9OX18gPyB3aW5kb3cuX19SRURVWF9ERVZUT09MU19FWFRFTlNJT05fXyA6IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAobm9vcDIpIHtcclxuICAgICAgICByZXR1cm4gbm9vcDI7XHJcbiAgICB9O1xyXG59O1xyXG4vLyBzcmMvaXNQbGFpbk9iamVjdC50c1xyXG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KHZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiIHx8IHZhbHVlID09PSBudWxsKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIHZhciBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih2YWx1ZSk7XHJcbiAgICBpZiAocHJvdG8gPT09IG51bGwpXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB2YXIgYmFzZVByb3RvID0gcHJvdG87XHJcbiAgICB3aGlsZSAoT2JqZWN0LmdldFByb3RvdHlwZU9mKGJhc2VQcm90bykgIT09IG51bGwpIHtcclxuICAgICAgICBiYXNlUHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoYmFzZVByb3RvKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcm90byA9PT0gYmFzZVByb3RvO1xyXG59XHJcbi8vIHNyYy9nZXREZWZhdWx0TWlkZGxld2FyZS50c1xyXG5pbXBvcnQgdGh1bmtNaWRkbGV3YXJlIGZyb20gXCJyZWR1eC10aHVua1wiO1xyXG4vLyBzcmMvdHNIZWxwZXJzLnRzXHJcbnZhciBoYXNNYXRjaEZ1bmN0aW9uID0gZnVuY3Rpb24gKHYpIHtcclxuICAgIHJldHVybiB2ICYmIHR5cGVvZiB2Lm1hdGNoID09PSBcImZ1bmN0aW9uXCI7XHJcbn07XHJcbi8vIHNyYy9jcmVhdGVBY3Rpb24udHNcclxuZnVuY3Rpb24gY3JlYXRlQWN0aW9uKHR5cGUsIHByZXBhcmVBY3Rpb24pIHtcclxuICAgIGZ1bmN0aW9uIGFjdGlvbkNyZWF0b3IoKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwcmVwYXJlQWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBwcmVwYXJlZCA9IHByZXBhcmVBY3Rpb24uYXBwbHkodm9pZCAwLCBhcmdzKTtcclxuICAgICAgICAgICAgaWYgKCFwcmVwYXJlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwicHJlcGFyZUFjdGlvbiBkaWQgbm90IHJldHVybiBhbiBvYmplY3RcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsXHJcbiAgICAgICAgICAgICAgICBwYXlsb2FkOiBwcmVwYXJlZC5wYXlsb2FkXHJcbiAgICAgICAgICAgIH0sIFwibWV0YVwiIGluIHByZXBhcmVkICYmIHsgbWV0YTogcHJlcGFyZWQubWV0YSB9KSwgXCJlcnJvclwiIGluIHByZXBhcmVkICYmIHsgZXJyb3I6IHByZXBhcmVkLmVycm9yIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyB0eXBlOiB0eXBlLCBwYXlsb2FkOiBhcmdzWzBdIH07XHJcbiAgICB9XHJcbiAgICBhY3Rpb25DcmVhdG9yLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJcIiArIHR5cGU7IH07XHJcbiAgICBhY3Rpb25DcmVhdG9yLnR5cGUgPSB0eXBlO1xyXG4gICAgYWN0aW9uQ3JlYXRvci5tYXRjaCA9IGZ1bmN0aW9uIChhY3Rpb24pIHsgcmV0dXJuIGFjdGlvbi50eXBlID09PSB0eXBlOyB9O1xyXG4gICAgcmV0dXJuIGFjdGlvbkNyZWF0b3I7XHJcbn1cclxuZnVuY3Rpb24gaXNBY3Rpb24oYWN0aW9uKSB7XHJcbiAgICByZXR1cm4gaXNQbGFpbk9iamVjdChhY3Rpb24pICYmIFwidHlwZVwiIGluIGFjdGlvbjtcclxufVxyXG5mdW5jdGlvbiBpc0FjdGlvbkNyZWF0b3IoYWN0aW9uKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIGFjdGlvbiA9PT0gXCJmdW5jdGlvblwiICYmIFwidHlwZVwiIGluIGFjdGlvbiAmJiBoYXNNYXRjaEZ1bmN0aW9uKGFjdGlvbik7XHJcbn1cclxuZnVuY3Rpb24gaXNGU0EoYWN0aW9uKSB7XHJcbiAgICByZXR1cm4gaXNBY3Rpb24oYWN0aW9uKSAmJiB0eXBlb2YgYWN0aW9uLnR5cGUgPT09IFwic3RyaW5nXCIgJiYgT2JqZWN0LmtleXMoYWN0aW9uKS5ldmVyeShpc1ZhbGlkS2V5KTtcclxufVxyXG5mdW5jdGlvbiBpc1ZhbGlkS2V5KGtleSkge1xyXG4gICAgcmV0dXJuIFtcInR5cGVcIiwgXCJwYXlsb2FkXCIsIFwiZXJyb3JcIiwgXCJtZXRhXCJdLmluZGV4T2Yoa2V5KSA+IC0xO1xyXG59XHJcbmZ1bmN0aW9uIGdldFR5cGUoYWN0aW9uQ3JlYXRvcikge1xyXG4gICAgcmV0dXJuIFwiXCIgKyBhY3Rpb25DcmVhdG9yO1xyXG59XHJcbi8vIHNyYy9hY3Rpb25DcmVhdG9ySW52YXJpYW50TWlkZGxld2FyZS50c1xyXG5mdW5jdGlvbiBnZXRNZXNzYWdlKHR5cGUpIHtcclxuICAgIHZhciBzcGxpdFR5cGUgPSB0eXBlID8gKFwiXCIgKyB0eXBlKS5zcGxpdChcIi9cIikgOiBbXTtcclxuICAgIHZhciBhY3Rpb25OYW1lID0gc3BsaXRUeXBlW3NwbGl0VHlwZS5sZW5ndGggLSAxXSB8fCBcImFjdGlvbkNyZWF0b3JcIjtcclxuICAgIHJldHVybiBcIkRldGVjdGVkIGFuIGFjdGlvbiBjcmVhdG9yIHdpdGggdHlwZSBcXFwiXCIgKyAodHlwZSB8fCBcInVua25vd25cIikgKyBcIlxcXCIgYmVpbmcgZGlzcGF0Y2hlZC4gXFxuTWFrZSBzdXJlIHlvdSdyZSBjYWxsaW5nIHRoZSBhY3Rpb24gY3JlYXRvciBiZWZvcmUgZGlzcGF0Y2hpbmcsIGkuZS4gYGRpc3BhdGNoKFwiICsgYWN0aW9uTmFtZSArIFwiKCkpYCBpbnN0ZWFkIG9mIGBkaXNwYXRjaChcIiArIGFjdGlvbk5hbWUgKyBcIilgLiBUaGlzIGlzIG5lY2Vzc2FyeSBldmVuIGlmIHRoZSBhY3Rpb24gaGFzIG5vIHBheWxvYWQuXCI7XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlQWN0aW9uQ3JlYXRvckludmFyaWFudE1pZGRsZXdhcmUob3B0aW9ucykge1xyXG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cclxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gZnVuY3Rpb24gKG5leHQpIHsgcmV0dXJuIGZ1bmN0aW9uIChhY3Rpb24pIHsgcmV0dXJuIG5leHQoYWN0aW9uKTsgfTsgfTsgfTtcclxuICAgIH1cclxuICAgIHZhciBfYyA9IG9wdGlvbnMuaXNBY3Rpb25DcmVhdG9yLCBpc0FjdGlvbkNyZWF0b3IyID0gX2MgPT09IHZvaWQgMCA/IGlzQWN0aW9uQ3JlYXRvciA6IF9jO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZ1bmN0aW9uIChuZXh0KSB7IHJldHVybiBmdW5jdGlvbiAoYWN0aW9uKSB7XHJcbiAgICAgICAgaWYgKGlzQWN0aW9uQ3JlYXRvcjIoYWN0aW9uKSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oZ2V0TWVzc2FnZShhY3Rpb24udHlwZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV4dChhY3Rpb24pO1xyXG4gICAgfTsgfTsgfTtcclxufVxyXG4vLyBzcmMvdXRpbHMudHNcclxuaW1wb3J0IGNyZWF0ZU5leHRTdGF0ZSwgeyBpc0RyYWZ0YWJsZSB9IGZyb20gXCJpbW1lclwiO1xyXG5mdW5jdGlvbiBnZXRUaW1lTWVhc3VyZVV0aWxzKG1heERlbGF5LCBmbk5hbWUpIHtcclxuICAgIHZhciBlbGFwc2VkID0gMDtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbWVhc3VyZVRpbWU6IGZ1bmN0aW9uIChmbikge1xyXG4gICAgICAgICAgICB2YXIgc3RhcnRlZCA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZm4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgICAgICAgIHZhciBmaW5pc2hlZCA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgICAgICBlbGFwc2VkICs9IGZpbmlzaGVkIC0gc3RhcnRlZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgd2FybklmRXhjZWVkZWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKGVsYXBzZWQgPiBtYXhEZWxheSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGZuTmFtZSArIFwiIHRvb2sgXCIgKyBlbGFwc2VkICsgXCJtcywgd2hpY2ggaXMgbW9yZSB0aGFuIHRoZSB3YXJuaW5nIHRocmVzaG9sZCBvZiBcIiArIG1heERlbGF5ICsgXCJtcy4gXFxuSWYgeW91ciBzdGF0ZSBvciBhY3Rpb25zIGFyZSB2ZXJ5IGxhcmdlLCB5b3UgbWF5IHdhbnQgdG8gZGlzYWJsZSB0aGUgbWlkZGxld2FyZSBhcyBpdCBtaWdodCBjYXVzZSB0b28gbXVjaCBvZiBhIHNsb3dkb3duIGluIGRldmVsb3BtZW50IG1vZGUuIFNlZSBodHRwczovL3JlZHV4LXRvb2xraXQuanMub3JnL2FwaS9nZXREZWZhdWx0TWlkZGxld2FyZSBmb3IgaW5zdHJ1Y3Rpb25zLlxcbkl0IGlzIGRpc2FibGVkIGluIHByb2R1Y3Rpb24gYnVpbGRzLCBzbyB5b3UgZG9uJ3QgbmVlZCB0byB3b3JyeSBhYm91dCB0aGF0LlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxudmFyIE1pZGRsZXdhcmVBcnJheSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhNaWRkbGV3YXJlQXJyYXksIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBNaWRkbGV3YXJlQXJyYXkoKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5hcHBseSh0aGlzLCBhcmdzKSB8fCB0aGlzO1xyXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihfdGhpcywgTWlkZGxld2FyZUFycmF5LnByb3RvdHlwZSk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1pZGRsZXdhcmVBcnJheSwgU3ltYm9sLnNwZWNpZXMsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1pZGRsZXdhcmVBcnJheTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBNaWRkbGV3YXJlQXJyYXkucHJvdG90eXBlLmNvbmNhdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJyID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgYXJyW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmNvbmNhdC5hcHBseSh0aGlzLCBhcnIpO1xyXG4gICAgfTtcclxuICAgIE1pZGRsZXdhcmVBcnJheS5wcm90b3R5cGUucHJlcGVuZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJyID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgYXJyW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhcnIubGVuZ3RoID09PSAxICYmIEFycmF5LmlzQXJyYXkoYXJyWzBdKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IChNaWRkbGV3YXJlQXJyYXkuYmluZC5hcHBseShNaWRkbGV3YXJlQXJyYXksIF9fc3ByZWFkQXJyYXkoW3ZvaWQgMF0sIGFyclswXS5jb25jYXQodGhpcykpKSkoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyAoTWlkZGxld2FyZUFycmF5LmJpbmQuYXBwbHkoTWlkZGxld2FyZUFycmF5LCBfX3NwcmVhZEFycmF5KFt2b2lkIDBdLCBhcnIuY29uY2F0KHRoaXMpKSkpKCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE1pZGRsZXdhcmVBcnJheTtcclxufShBcnJheSkpO1xyXG52YXIgRW5oYW5jZXJBcnJheSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhFbmhhbmNlckFycmF5LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRW5oYW5jZXJBcnJheSgpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3MpIHx8IHRoaXM7XHJcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKF90aGlzLCBFbmhhbmNlckFycmF5LnByb3RvdHlwZSk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEVuaGFuY2VyQXJyYXksIFN5bWJvbC5zcGVjaWVzLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBFbmhhbmNlckFycmF5O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIEVuaGFuY2VyQXJyYXkucHJvdG90eXBlLmNvbmNhdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJyID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgYXJyW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmNvbmNhdC5hcHBseSh0aGlzLCBhcnIpO1xyXG4gICAgfTtcclxuICAgIEVuaGFuY2VyQXJyYXkucHJvdG90eXBlLnByZXBlbmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFyciA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFycltfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXJyLmxlbmd0aCA9PT0gMSAmJiBBcnJheS5pc0FycmF5KGFyclswXSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyAoRW5oYW5jZXJBcnJheS5iaW5kLmFwcGx5KEVuaGFuY2VyQXJyYXksIF9fc3ByZWFkQXJyYXkoW3ZvaWQgMF0sIGFyclswXS5jb25jYXQodGhpcykpKSkoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyAoRW5oYW5jZXJBcnJheS5iaW5kLmFwcGx5KEVuaGFuY2VyQXJyYXksIF9fc3ByZWFkQXJyYXkoW3ZvaWQgMF0sIGFyci5jb25jYXQodGhpcykpKSkoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRW5oYW5jZXJBcnJheTtcclxufShBcnJheSkpO1xyXG5mdW5jdGlvbiBmcmVlemVEcmFmdGFibGUodmFsKSB7XHJcbiAgICByZXR1cm4gaXNEcmFmdGFibGUodmFsKSA/IGNyZWF0ZU5leHRTdGF0ZSh2YWwsIGZ1bmN0aW9uICgpIHtcclxuICAgIH0pIDogdmFsO1xyXG59XHJcbi8vIHNyYy9pbW11dGFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUudHNcclxudmFyIGlzUHJvZHVjdGlvbiA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIjtcclxudmFyIHByZWZpeCA9IFwiSW52YXJpYW50IGZhaWxlZFwiO1xyXG5mdW5jdGlvbiBpbnZhcmlhbnQoY29uZGl0aW9uLCBtZXNzYWdlKSB7XHJcbiAgICBpZiAoY29uZGl0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKGlzUHJvZHVjdGlvbikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihwcmVmaXgpO1xyXG4gICAgfVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKHByZWZpeCArIFwiOiBcIiArIChtZXNzYWdlIHx8IFwiXCIpKTtcclxufVxyXG5mdW5jdGlvbiBzdHJpbmdpZnkob2JqLCBzZXJpYWxpemVyLCBpbmRlbnQsIGRlY3ljbGVyKSB7XHJcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqLCBnZXRTZXJpYWxpemUoc2VyaWFsaXplciwgZGVjeWNsZXIpLCBpbmRlbnQpO1xyXG59XHJcbmZ1bmN0aW9uIGdldFNlcmlhbGl6ZShzZXJpYWxpemVyLCBkZWN5Y2xlcikge1xyXG4gICAgdmFyIHN0YWNrID0gW10sIGtleXMgPSBbXTtcclxuICAgIGlmICghZGVjeWNsZXIpXHJcbiAgICAgICAgZGVjeWNsZXIgPSBmdW5jdGlvbiAoXywgdmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKHN0YWNrWzBdID09PSB2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIltDaXJjdWxhciB+XVwiO1xyXG4gICAgICAgICAgICByZXR1cm4gXCJbQ2lyY3VsYXIgfi5cIiArIGtleXMuc2xpY2UoMCwgc3RhY2suaW5kZXhPZih2YWx1ZSkpLmpvaW4oXCIuXCIpICsgXCJdXCI7XHJcbiAgICAgICAgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIGlmIChzdGFjay5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGlzUG9zID0gc3RhY2suaW5kZXhPZih0aGlzKTtcclxuICAgICAgICAgICAgfnRoaXNQb3MgPyBzdGFjay5zcGxpY2UodGhpc1BvcyArIDEpIDogc3RhY2sucHVzaCh0aGlzKTtcclxuICAgICAgICAgICAgfnRoaXNQb3MgPyBrZXlzLnNwbGljZSh0aGlzUG9zLCBJbmZpbml0eSwga2V5KSA6IGtleXMucHVzaChrZXkpO1xyXG4gICAgICAgICAgICBpZiAofnN0YWNrLmluZGV4T2YodmFsdWUpKVxyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBkZWN5Y2xlci5jYWxsKHRoaXMsIGtleSwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHN0YWNrLnB1c2godmFsdWUpO1xyXG4gICAgICAgIHJldHVybiBzZXJpYWxpemVyID09IG51bGwgPyB2YWx1ZSA6IHNlcmlhbGl6ZXIuY2FsbCh0aGlzLCBrZXksIHZhbHVlKTtcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gaXNJbW11dGFibGVEZWZhdWx0KHZhbHVlKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiIHx8IHZhbHVlID09IG51bGwgfHwgT2JqZWN0LmlzRnJvemVuKHZhbHVlKTtcclxufVxyXG5mdW5jdGlvbiB0cmFja0Zvck11dGF0aW9ucyhpc0ltbXV0YWJsZSwgaWdub3JlUGF0aHMsIG9iaikge1xyXG4gICAgdmFyIHRyYWNrZWRQcm9wZXJ0aWVzID0gdHJhY2tQcm9wZXJ0aWVzKGlzSW1tdXRhYmxlLCBpZ25vcmVQYXRocywgb2JqKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZGV0ZWN0TXV0YXRpb25zOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkZXRlY3RNdXRhdGlvbnMoaXNJbW11dGFibGUsIGlnbm9yZVBhdGhzLCB0cmFja2VkUHJvcGVydGllcywgb2JqKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIHRyYWNrUHJvcGVydGllcyhpc0ltbXV0YWJsZSwgaWdub3JlUGF0aHMsIG9iaiwgcGF0aCwgY2hlY2tlZE9iamVjdHMpIHtcclxuICAgIGlmIChpZ25vcmVQYXRocyA9PT0gdm9pZCAwKSB7IGlnbm9yZVBhdGhzID0gW107IH1cclxuICAgIGlmIChwYXRoID09PSB2b2lkIDApIHsgcGF0aCA9IFwiXCI7IH1cclxuICAgIGlmIChjaGVja2VkT2JqZWN0cyA9PT0gdm9pZCAwKSB7IGNoZWNrZWRPYmplY3RzID0gbmV3IFNldCgpOyB9XHJcbiAgICB2YXIgdHJhY2tlZCA9IHsgdmFsdWU6IG9iaiB9O1xyXG4gICAgaWYgKCFpc0ltbXV0YWJsZShvYmopICYmICFjaGVja2VkT2JqZWN0cy5oYXMob2JqKSkge1xyXG4gICAgICAgIGNoZWNrZWRPYmplY3RzLmFkZChvYmopO1xyXG4gICAgICAgIHRyYWNrZWQuY2hpbGRyZW4gPSB7fTtcclxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZFBhdGggPSBwYXRoID8gcGF0aCArIFwiLlwiICsga2V5IDoga2V5O1xyXG4gICAgICAgICAgICBpZiAoaWdub3JlUGF0aHMubGVuZ3RoICYmIGlnbm9yZVBhdGhzLmluZGV4T2YoY2hpbGRQYXRoKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRyYWNrZWQuY2hpbGRyZW5ba2V5XSA9IHRyYWNrUHJvcGVydGllcyhpc0ltbXV0YWJsZSwgaWdub3JlUGF0aHMsIG9ialtrZXldLCBjaGlsZFBhdGgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cmFja2VkO1xyXG59XHJcbmZ1bmN0aW9uIGRldGVjdE11dGF0aW9ucyhpc0ltbXV0YWJsZSwgaWdub3JlZFBhdGhzLCB0cmFja2VkUHJvcGVydHksIG9iaiwgc2FtZVBhcmVudFJlZiwgcGF0aCkge1xyXG4gICAgaWYgKGlnbm9yZWRQYXRocyA9PT0gdm9pZCAwKSB7IGlnbm9yZWRQYXRocyA9IFtdOyB9XHJcbiAgICBpZiAoc2FtZVBhcmVudFJlZiA9PT0gdm9pZCAwKSB7IHNhbWVQYXJlbnRSZWYgPSBmYWxzZTsgfVxyXG4gICAgaWYgKHBhdGggPT09IHZvaWQgMCkgeyBwYXRoID0gXCJcIjsgfVxyXG4gICAgdmFyIHByZXZPYmogPSB0cmFja2VkUHJvcGVydHkgPyB0cmFja2VkUHJvcGVydHkudmFsdWUgOiB2b2lkIDA7XHJcbiAgICB2YXIgc2FtZVJlZiA9IHByZXZPYmogPT09IG9iajtcclxuICAgIGlmIChzYW1lUGFyZW50UmVmICYmICFzYW1lUmVmICYmICFOdW1iZXIuaXNOYU4ob2JqKSkge1xyXG4gICAgICAgIHJldHVybiB7IHdhc011dGF0ZWQ6IHRydWUsIHBhdGg6IHBhdGggfTtcclxuICAgIH1cclxuICAgIGlmIChpc0ltbXV0YWJsZShwcmV2T2JqKSB8fCBpc0ltbXV0YWJsZShvYmopKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgd2FzTXV0YXRlZDogZmFsc2UgfTtcclxuICAgIH1cclxuICAgIHZhciBrZXlzVG9EZXRlY3QgPSB7fTtcclxuICAgIGZvciAodmFyIGtleSBpbiB0cmFja2VkUHJvcGVydHkuY2hpbGRyZW4pIHtcclxuICAgICAgICBrZXlzVG9EZXRlY3Rba2V5XSA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAga2V5c1RvRGV0ZWN0W2tleV0gPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgdmFyIGhhc0lnbm9yZWRQYXRocyA9IGlnbm9yZWRQYXRocy5sZW5ndGggPiAwO1xyXG4gICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFyIG5lc3RlZFBhdGggPSBwYXRoID8gcGF0aCArIFwiLlwiICsga2V5IDoga2V5O1xyXG4gICAgICAgIGlmIChoYXNJZ25vcmVkUGF0aHMpIHtcclxuICAgICAgICAgICAgdmFyIGhhc01hdGNoZXMgPSBpZ25vcmVkUGF0aHMuc29tZShmdW5jdGlvbiAoaWdub3JlZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlnbm9yZWQgaW5zdGFuY2VvZiBSZWdFeHApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaWdub3JlZC50ZXN0KG5lc3RlZFBhdGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5lc3RlZFBhdGggPT09IGlnbm9yZWQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoaGFzTWF0Y2hlcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiY29udGludWVcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcmVzdWx0ID0gZGV0ZWN0TXV0YXRpb25zKGlzSW1tdXRhYmxlLCBpZ25vcmVkUGF0aHMsIHRyYWNrZWRQcm9wZXJ0eS5jaGlsZHJlbltrZXldLCBvYmpba2V5XSwgc2FtZVJlZiwgbmVzdGVkUGF0aCk7XHJcbiAgICAgICAgaWYgKHJlc3VsdC53YXNNdXRhdGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiByZXN1bHQgfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgZm9yICh2YXIga2V5IGluIGtleXNUb0RldGVjdCkge1xyXG4gICAgICAgIHZhciBzdGF0ZV8xID0gX2xvb3BfMShrZXkpO1xyXG4gICAgICAgIGlmICh0eXBlb2Ygc3RhdGVfMSA9PT0gXCJvYmplY3RcIilcclxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlXzEudmFsdWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4geyB3YXNNdXRhdGVkOiBmYWxzZSB9O1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZUltbXV0YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZShvcHRpb25zKSB7XHJcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxyXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIikge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBmdW5jdGlvbiAobmV4dCkgeyByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikgeyByZXR1cm4gbmV4dChhY3Rpb24pOyB9OyB9OyB9O1xyXG4gICAgfVxyXG4gICAgdmFyIF9jID0gb3B0aW9ucy5pc0ltbXV0YWJsZSwgaXNJbW11dGFibGUgPSBfYyA9PT0gdm9pZCAwID8gaXNJbW11dGFibGVEZWZhdWx0IDogX2MsIGlnbm9yZWRQYXRocyA9IG9wdGlvbnMuaWdub3JlZFBhdGhzLCBfZCA9IG9wdGlvbnMud2FybkFmdGVyLCB3YXJuQWZ0ZXIgPSBfZCA9PT0gdm9pZCAwID8gMzIgOiBfZCwgaWdub3JlID0gb3B0aW9ucy5pZ25vcmU7XHJcbiAgICBpZ25vcmVkUGF0aHMgPSBpZ25vcmVkUGF0aHMgfHwgaWdub3JlO1xyXG4gICAgdmFyIHRyYWNrID0gdHJhY2tGb3JNdXRhdGlvbnMuYmluZChudWxsLCBpc0ltbXV0YWJsZSwgaWdub3JlZFBhdGhzKTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoX2MpIHtcclxuICAgICAgICB2YXIgZ2V0U3RhdGUgPSBfYy5nZXRTdGF0ZTtcclxuICAgICAgICB2YXIgc3RhdGUgPSBnZXRTdGF0ZSgpO1xyXG4gICAgICAgIHZhciB0cmFja2VyID0gdHJhY2soc3RhdGUpO1xyXG4gICAgICAgIHZhciByZXN1bHQ7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChuZXh0KSB7IHJldHVybiBmdW5jdGlvbiAoYWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBtZWFzdXJlVXRpbHMgPSBnZXRUaW1lTWVhc3VyZVV0aWxzKHdhcm5BZnRlciwgXCJJbW11dGFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmVcIik7XHJcbiAgICAgICAgICAgIG1lYXN1cmVVdGlscy5tZWFzdXJlVGltZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZSA9IGdldFN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0cmFja2VyLmRldGVjdE11dGF0aW9ucygpO1xyXG4gICAgICAgICAgICAgICAgdHJhY2tlciA9IHRyYWNrKHN0YXRlKTtcclxuICAgICAgICAgICAgICAgIGludmFyaWFudCghcmVzdWx0Lndhc011dGF0ZWQsIFwiQSBzdGF0ZSBtdXRhdGlvbiB3YXMgZGV0ZWN0ZWQgYmV0d2VlbiBkaXNwYXRjaGVzLCBpbiB0aGUgcGF0aCAnXCIgKyAocmVzdWx0LnBhdGggfHwgXCJcIikgKyBcIicuICBUaGlzIG1heSBjYXVzZSBpbmNvcnJlY3QgYmVoYXZpb3IuIChodHRwczovL3JlZHV4LmpzLm9yZy9zdHlsZS1ndWlkZS9zdHlsZS1ndWlkZSNkby1ub3QtbXV0YXRlLXN0YXRlKVwiKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZhciBkaXNwYXRjaGVkQWN0aW9uID0gbmV4dChhY3Rpb24pO1xyXG4gICAgICAgICAgICBtZWFzdXJlVXRpbHMubWVhc3VyZVRpbWUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgc3RhdGUgPSBnZXRTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdHJhY2tlci5kZXRlY3RNdXRhdGlvbnMoKTtcclxuICAgICAgICAgICAgICAgIHRyYWNrZXIgPSB0cmFjayhzdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQud2FzTXV0YXRlZCAmJiBpbnZhcmlhbnQoIXJlc3VsdC53YXNNdXRhdGVkLCBcIkEgc3RhdGUgbXV0YXRpb24gd2FzIGRldGVjdGVkIGluc2lkZSBhIGRpc3BhdGNoLCBpbiB0aGUgcGF0aDogXCIgKyAocmVzdWx0LnBhdGggfHwgXCJcIikgKyBcIi4gVGFrZSBhIGxvb2sgYXQgdGhlIHJlZHVjZXIocykgaGFuZGxpbmcgdGhlIGFjdGlvbiBcIiArIHN0cmluZ2lmeShhY3Rpb24pICsgXCIuIChodHRwczovL3JlZHV4LmpzLm9yZy9zdHlsZS1ndWlkZS9zdHlsZS1ndWlkZSNkby1ub3QtbXV0YXRlLXN0YXRlKVwiKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG1lYXN1cmVVdGlscy53YXJuSWZFeGNlZWRlZCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2hlZEFjdGlvbjtcclxuICAgICAgICB9OyB9O1xyXG4gICAgfTtcclxufVxyXG4vLyBzcmMvc2VyaWFsaXphYmxlU3RhdGVJbnZhcmlhbnRNaWRkbGV3YXJlLnRzXHJcbmZ1bmN0aW9uIGlzUGxhaW4odmFsKSB7XHJcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiB2YWw7XHJcbiAgICByZXR1cm4gdmFsID09IG51bGwgfHwgdHlwZSA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlID09PSBcImJvb2xlYW5cIiB8fCB0eXBlID09PSBcIm51bWJlclwiIHx8IEFycmF5LmlzQXJyYXkodmFsKSB8fCBpc1BsYWluT2JqZWN0KHZhbCk7XHJcbn1cclxuZnVuY3Rpb24gZmluZE5vblNlcmlhbGl6YWJsZVZhbHVlKHZhbHVlLCBwYXRoLCBpc1NlcmlhbGl6YWJsZSwgZ2V0RW50cmllcywgaWdub3JlZFBhdGhzLCBjYWNoZSkge1xyXG4gICAgaWYgKHBhdGggPT09IHZvaWQgMCkgeyBwYXRoID0gXCJcIjsgfVxyXG4gICAgaWYgKGlzU2VyaWFsaXphYmxlID09PSB2b2lkIDApIHsgaXNTZXJpYWxpemFibGUgPSBpc1BsYWluOyB9XHJcbiAgICBpZiAoaWdub3JlZFBhdGhzID09PSB2b2lkIDApIHsgaWdub3JlZFBhdGhzID0gW107IH1cclxuICAgIHZhciBmb3VuZE5lc3RlZFNlcmlhbGl6YWJsZTtcclxuICAgIGlmICghaXNTZXJpYWxpemFibGUodmFsdWUpKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAga2V5UGF0aDogcGF0aCB8fCBcIjxyb290PlwiLFxyXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJvYmplY3RcIiB8fCB2YWx1ZSA9PT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmIChjYWNoZSA9PSBudWxsID8gdm9pZCAwIDogY2FjaGUuaGFzKHZhbHVlKSlcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB2YXIgZW50cmllcyA9IGdldEVudHJpZXMgIT0gbnVsbCA/IGdldEVudHJpZXModmFsdWUpIDogT2JqZWN0LmVudHJpZXModmFsdWUpO1xyXG4gICAgdmFyIGhhc0lnbm9yZWRQYXRocyA9IGlnbm9yZWRQYXRocy5sZW5ndGggPiAwO1xyXG4gICAgdmFyIF9sb29wXzIgPSBmdW5jdGlvbiAoa2V5LCBuZXN0ZWRWYWx1ZSkge1xyXG4gICAgICAgIHZhciBuZXN0ZWRQYXRoID0gcGF0aCA/IHBhdGggKyBcIi5cIiArIGtleSA6IGtleTtcclxuICAgICAgICBpZiAoaGFzSWdub3JlZFBhdGhzKSB7XHJcbiAgICAgICAgICAgIHZhciBoYXNNYXRjaGVzID0gaWdub3JlZFBhdGhzLnNvbWUoZnVuY3Rpb24gKGlnbm9yZWQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpZ25vcmVkIGluc3RhbmNlb2YgUmVnRXhwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlnbm9yZWQudGVzdChuZXN0ZWRQYXRoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXN0ZWRQYXRoID09PSBpZ25vcmVkO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKGhhc01hdGNoZXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcImNvbnRpbnVlXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFpc1NlcmlhbGl6YWJsZShuZXN0ZWRWYWx1ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHtcclxuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBuZXN0ZWRQYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBuZXN0ZWRWYWx1ZVxyXG4gICAgICAgICAgICAgICAgfSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIG5lc3RlZFZhbHVlID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgICAgIGZvdW5kTmVzdGVkU2VyaWFsaXphYmxlID0gZmluZE5vblNlcmlhbGl6YWJsZVZhbHVlKG5lc3RlZFZhbHVlLCBuZXN0ZWRQYXRoLCBpc1NlcmlhbGl6YWJsZSwgZ2V0RW50cmllcywgaWdub3JlZFBhdGhzLCBjYWNoZSk7XHJcbiAgICAgICAgICAgIGlmIChmb3VuZE5lc3RlZFNlcmlhbGl6YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IGZvdW5kTmVzdGVkU2VyaWFsaXphYmxlIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgZm9yICh2YXIgX2kgPSAwLCBlbnRyaWVzXzEgPSBlbnRyaWVzOyBfaSA8IGVudHJpZXNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICB2YXIgX2MgPSBlbnRyaWVzXzFbX2ldLCBrZXkgPSBfY1swXSwgbmVzdGVkVmFsdWUgPSBfY1sxXTtcclxuICAgICAgICB2YXIgc3RhdGVfMiA9IF9sb29wXzIoa2V5LCBuZXN0ZWRWYWx1ZSk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBzdGF0ZV8yID09PSBcIm9iamVjdFwiKVxyXG4gICAgICAgICAgICByZXR1cm4gc3RhdGVfMi52YWx1ZTtcclxuICAgIH1cclxuICAgIGlmIChjYWNoZSAmJiBpc05lc3RlZEZyb3plbih2YWx1ZSkpXHJcbiAgICAgICAgY2FjaGUuYWRkKHZhbHVlKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5mdW5jdGlvbiBpc05lc3RlZEZyb3plbih2YWx1ZSkge1xyXG4gICAgaWYgKCFPYmplY3QuaXNGcm96ZW4odmFsdWUpKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIGZvciAodmFyIF9pID0gMCwgX2MgPSBPYmplY3QudmFsdWVzKHZhbHVlKTsgX2kgPCBfYy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICB2YXIgbmVzdGVkVmFsdWUgPSBfY1tfaV07XHJcbiAgICAgICAgaWYgKHR5cGVvZiBuZXN0ZWRWYWx1ZSAhPT0gXCJvYmplY3RcIiB8fCBuZXN0ZWRWYWx1ZSA9PT0gbnVsbClcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgaWYgKCFpc05lc3RlZEZyb3plbihuZXN0ZWRWYWx1ZSkpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZVNlcmlhbGl6YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZShvcHRpb25zKSB7XHJcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxyXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIikge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBmdW5jdGlvbiAobmV4dCkgeyByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikgeyByZXR1cm4gbmV4dChhY3Rpb24pOyB9OyB9OyB9O1xyXG4gICAgfVxyXG4gICAgdmFyIF9jID0gb3B0aW9ucy5pc1NlcmlhbGl6YWJsZSwgaXNTZXJpYWxpemFibGUgPSBfYyA9PT0gdm9pZCAwID8gaXNQbGFpbiA6IF9jLCBnZXRFbnRyaWVzID0gb3B0aW9ucy5nZXRFbnRyaWVzLCBfZCA9IG9wdGlvbnMuaWdub3JlZEFjdGlvbnMsIGlnbm9yZWRBY3Rpb25zID0gX2QgPT09IHZvaWQgMCA/IFtdIDogX2QsIF9lID0gb3B0aW9ucy5pZ25vcmVkQWN0aW9uUGF0aHMsIGlnbm9yZWRBY3Rpb25QYXRocyA9IF9lID09PSB2b2lkIDAgPyBbXCJtZXRhLmFyZ1wiLCBcIm1ldGEuYmFzZVF1ZXJ5TWV0YVwiXSA6IF9lLCBfZiA9IG9wdGlvbnMuaWdub3JlZFBhdGhzLCBpZ25vcmVkUGF0aHMgPSBfZiA9PT0gdm9pZCAwID8gW10gOiBfZiwgX2cgPSBvcHRpb25zLndhcm5BZnRlciwgd2FybkFmdGVyID0gX2cgPT09IHZvaWQgMCA/IDMyIDogX2csIF9oID0gb3B0aW9ucy5pZ25vcmVTdGF0ZSwgaWdub3JlU3RhdGUgPSBfaCA9PT0gdm9pZCAwID8gZmFsc2UgOiBfaCwgX2ogPSBvcHRpb25zLmlnbm9yZUFjdGlvbnMsIGlnbm9yZUFjdGlvbnMgPSBfaiA9PT0gdm9pZCAwID8gZmFsc2UgOiBfaiwgX2sgPSBvcHRpb25zLmRpc2FibGVDYWNoZSwgZGlzYWJsZUNhY2hlID0gX2sgPT09IHZvaWQgMCA/IGZhbHNlIDogX2s7XHJcbiAgICB2YXIgY2FjaGUgPSAhZGlzYWJsZUNhY2hlICYmIFdlYWtTZXQgPyBuZXcgV2Vha1NldCgpIDogdm9pZCAwO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzdG9yZUFQSSkgeyByZXR1cm4gZnVuY3Rpb24gKG5leHQpIHsgcmV0dXJuIGZ1bmN0aW9uIChhY3Rpb24pIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gbmV4dChhY3Rpb24pO1xyXG4gICAgICAgIHZhciBtZWFzdXJlVXRpbHMgPSBnZXRUaW1lTWVhc3VyZVV0aWxzKHdhcm5BZnRlciwgXCJTZXJpYWxpemFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmVcIik7XHJcbiAgICAgICAgaWYgKCFpZ25vcmVBY3Rpb25zICYmICEoaWdub3JlZEFjdGlvbnMubGVuZ3RoICYmIGlnbm9yZWRBY3Rpb25zLmluZGV4T2YoYWN0aW9uLnR5cGUpICE9PSAtMSkpIHtcclxuICAgICAgICAgICAgbWVhc3VyZVV0aWxzLm1lYXN1cmVUaW1lKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBmb3VuZEFjdGlvbk5vblNlcmlhbGl6YWJsZVZhbHVlID0gZmluZE5vblNlcmlhbGl6YWJsZVZhbHVlKGFjdGlvbiwgXCJcIiwgaXNTZXJpYWxpemFibGUsIGdldEVudHJpZXMsIGlnbm9yZWRBY3Rpb25QYXRocywgY2FjaGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kQWN0aW9uTm9uU2VyaWFsaXphYmxlVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIga2V5UGF0aCA9IGZvdW5kQWN0aW9uTm9uU2VyaWFsaXphYmxlVmFsdWUua2V5UGF0aCwgdmFsdWUgPSBmb3VuZEFjdGlvbk5vblNlcmlhbGl6YWJsZVZhbHVlLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJBIG5vbi1zZXJpYWxpemFibGUgdmFsdWUgd2FzIGRldGVjdGVkIGluIGFuIGFjdGlvbiwgaW4gdGhlIHBhdGg6IGBcIiArIGtleVBhdGggKyBcImAuIFZhbHVlOlwiLCB2YWx1ZSwgXCJcXG5UYWtlIGEgbG9vayBhdCB0aGUgbG9naWMgdGhhdCBkaXNwYXRjaGVkIHRoaXMgYWN0aW9uOiBcIiwgYWN0aW9uLCBcIlxcbihTZWUgaHR0cHM6Ly9yZWR1eC5qcy5vcmcvZmFxL2FjdGlvbnMjd2h5LXNob3VsZC10eXBlLWJlLWEtc3RyaW5nLW9yLWF0LWxlYXN0LXNlcmlhbGl6YWJsZS13aHktc2hvdWxkLW15LWFjdGlvbi10eXBlcy1iZS1jb25zdGFudHMpXCIsIFwiXFxuKFRvIGFsbG93IG5vbi1zZXJpYWxpemFibGUgdmFsdWVzIHNlZTogaHR0cHM6Ly9yZWR1eC10b29sa2l0LmpzLm9yZy91c2FnZS91c2FnZS1ndWlkZSN3b3JraW5nLXdpdGgtbm9uLXNlcmlhbGl6YWJsZS1kYXRhKVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghaWdub3JlU3RhdGUpIHtcclxuICAgICAgICAgICAgbWVhc3VyZVV0aWxzLm1lYXN1cmVUaW1lKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzdGF0ZSA9IHN0b3JlQVBJLmdldFN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZm91bmRTdGF0ZU5vblNlcmlhbGl6YWJsZVZhbHVlID0gZmluZE5vblNlcmlhbGl6YWJsZVZhbHVlKHN0YXRlLCBcIlwiLCBpc1NlcmlhbGl6YWJsZSwgZ2V0RW50cmllcywgaWdub3JlZFBhdGhzLCBjYWNoZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZm91bmRTdGF0ZU5vblNlcmlhbGl6YWJsZVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleVBhdGggPSBmb3VuZFN0YXRlTm9uU2VyaWFsaXphYmxlVmFsdWUua2V5UGF0aCwgdmFsdWUgPSBmb3VuZFN0YXRlTm9uU2VyaWFsaXphYmxlVmFsdWUudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkEgbm9uLXNlcmlhbGl6YWJsZSB2YWx1ZSB3YXMgZGV0ZWN0ZWQgaW4gdGhlIHN0YXRlLCBpbiB0aGUgcGF0aDogYFwiICsga2V5UGF0aCArIFwiYC4gVmFsdWU6XCIsIHZhbHVlLCBcIlxcblRha2UgYSBsb29rIGF0IHRoZSByZWR1Y2VyKHMpIGhhbmRsaW5nIHRoaXMgYWN0aW9uIHR5cGU6IFwiICsgYWN0aW9uLnR5cGUgKyBcIi5cXG4oU2VlIGh0dHBzOi8vcmVkdXguanMub3JnL2ZhcS9vcmdhbml6aW5nLXN0YXRlI2Nhbi1pLXB1dC1mdW5jdGlvbnMtcHJvbWlzZXMtb3Itb3RoZXItbm9uLXNlcmlhbGl6YWJsZS1pdGVtcy1pbi1teS1zdG9yZS1zdGF0ZSlcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBtZWFzdXJlVXRpbHMud2FybklmRXhjZWVkZWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07IH07IH07XHJcbn1cclxuLy8gc3JjL2dldERlZmF1bHRNaWRkbGV3YXJlLnRzXHJcbmZ1bmN0aW9uIGlzQm9vbGVhbih4KSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHggPT09IFwiYm9vbGVhblwiO1xyXG59XHJcbmZ1bmN0aW9uIGN1cnJ5R2V0RGVmYXVsdE1pZGRsZXdhcmUoKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gY3VycmllZEdldERlZmF1bHRNaWRkbGV3YXJlKG9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gZ2V0RGVmYXVsdE1pZGRsZXdhcmUob3B0aW9ucyk7XHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGdldERlZmF1bHRNaWRkbGV3YXJlKG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XHJcbiAgICB2YXIgX2MgPSBvcHRpb25zLnRodW5rLCB0aHVuayA9IF9jID09PSB2b2lkIDAgPyB0cnVlIDogX2MsIF9kID0gb3B0aW9ucy5pbW11dGFibGVDaGVjaywgaW1tdXRhYmxlQ2hlY2sgPSBfZCA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9kLCBfZSA9IG9wdGlvbnMuc2VyaWFsaXphYmxlQ2hlY2ssIHNlcmlhbGl6YWJsZUNoZWNrID0gX2UgPT09IHZvaWQgMCA/IHRydWUgOiBfZSwgX2YgPSBvcHRpb25zLmFjdGlvbkNyZWF0b3JDaGVjaywgYWN0aW9uQ3JlYXRvckNoZWNrID0gX2YgPT09IHZvaWQgMCA/IHRydWUgOiBfZjtcclxuICAgIHZhciBtaWRkbGV3YXJlQXJyYXkgPSBuZXcgTWlkZGxld2FyZUFycmF5KCk7XHJcbiAgICBpZiAodGh1bmspIHtcclxuICAgICAgICBpZiAoaXNCb29sZWFuKHRodW5rKSkge1xyXG4gICAgICAgICAgICBtaWRkbGV3YXJlQXJyYXkucHVzaCh0aHVua01pZGRsZXdhcmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbWlkZGxld2FyZUFycmF5LnB1c2godGh1bmtNaWRkbGV3YXJlLndpdGhFeHRyYUFyZ3VtZW50KHRodW5rLmV4dHJhQXJndW1lbnQpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XHJcbiAgICAgICAgaWYgKGltbXV0YWJsZUNoZWNrKSB7XHJcbiAgICAgICAgICAgIHZhciBpbW11dGFibGVPcHRpb25zID0ge307XHJcbiAgICAgICAgICAgIGlmICghaXNCb29sZWFuKGltbXV0YWJsZUNoZWNrKSkge1xyXG4gICAgICAgICAgICAgICAgaW1tdXRhYmxlT3B0aW9ucyA9IGltbXV0YWJsZUNoZWNrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1pZGRsZXdhcmVBcnJheS51bnNoaWZ0KGNyZWF0ZUltbXV0YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZShpbW11dGFibGVPcHRpb25zKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzZXJpYWxpemFibGVDaGVjaykge1xyXG4gICAgICAgICAgICB2YXIgc2VyaWFsaXphYmxlT3B0aW9ucyA9IHt9O1xyXG4gICAgICAgICAgICBpZiAoIWlzQm9vbGVhbihzZXJpYWxpemFibGVDaGVjaykpIHtcclxuICAgICAgICAgICAgICAgIHNlcmlhbGl6YWJsZU9wdGlvbnMgPSBzZXJpYWxpemFibGVDaGVjaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtaWRkbGV3YXJlQXJyYXkucHVzaChjcmVhdGVTZXJpYWxpemFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUoc2VyaWFsaXphYmxlT3B0aW9ucykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYWN0aW9uQ3JlYXRvckNoZWNrKSB7XHJcbiAgICAgICAgICAgIHZhciBhY3Rpb25DcmVhdG9yT3B0aW9ucyA9IHt9O1xyXG4gICAgICAgICAgICBpZiAoIWlzQm9vbGVhbihhY3Rpb25DcmVhdG9yQ2hlY2spKSB7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb25DcmVhdG9yT3B0aW9ucyA9IGFjdGlvbkNyZWF0b3JDaGVjaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtaWRkbGV3YXJlQXJyYXkudW5zaGlmdChjcmVhdGVBY3Rpb25DcmVhdG9ySW52YXJpYW50TWlkZGxld2FyZShhY3Rpb25DcmVhdG9yT3B0aW9ucykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBtaWRkbGV3YXJlQXJyYXk7XHJcbn1cclxuLy8gc3JjL2NvbmZpZ3VyZVN0b3JlLnRzXHJcbnZhciBJU19QUk9EVUNUSU9OID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiO1xyXG5mdW5jdGlvbiBjb25maWd1cmVTdG9yZShvcHRpb25zKSB7XHJcbiAgICB2YXIgY3VycmllZEdldERlZmF1bHRNaWRkbGV3YXJlID0gY3VycnlHZXREZWZhdWx0TWlkZGxld2FyZSgpO1xyXG4gICAgdmFyIF9jID0gb3B0aW9ucyB8fCB7fSwgX2QgPSBfYy5yZWR1Y2VyLCByZWR1Y2VyID0gX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLCBfZSA9IF9jLm1pZGRsZXdhcmUsIG1pZGRsZXdhcmUgPSBfZSA9PT0gdm9pZCAwID8gY3VycmllZEdldERlZmF1bHRNaWRkbGV3YXJlKCkgOiBfZSwgX2YgPSBfYy5kZXZUb29scywgZGV2VG9vbHMgPSBfZiA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9mLCBfZyA9IF9jLnByZWxvYWRlZFN0YXRlLCBwcmVsb2FkZWRTdGF0ZSA9IF9nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZywgX2ggPSBfYy5lbmhhbmNlcnMsIGVuaGFuY2VycyA9IF9oID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaDtcclxuICAgIHZhciByb290UmVkdWNlcjtcclxuICAgIGlmICh0eXBlb2YgcmVkdWNlciA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgcm9vdFJlZHVjZXIgPSByZWR1Y2VyO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNQbGFpbk9iamVjdChyZWR1Y2VyKSkge1xyXG4gICAgICAgIHJvb3RSZWR1Y2VyID0gY29tYmluZVJlZHVjZXJzKHJlZHVjZXIpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdcInJlZHVjZXJcIiBpcyBhIHJlcXVpcmVkIGFyZ3VtZW50LCBhbmQgbXVzdCBiZSBhIGZ1bmN0aW9uIG9yIGFuIG9iamVjdCBvZiBmdW5jdGlvbnMgdGhhdCBjYW4gYmUgcGFzc2VkIHRvIGNvbWJpbmVSZWR1Y2VycycpO1xyXG4gICAgfVxyXG4gICAgdmFyIGZpbmFsTWlkZGxld2FyZSA9IG1pZGRsZXdhcmU7XHJcbiAgICBpZiAodHlwZW9mIGZpbmFsTWlkZGxld2FyZSA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgZmluYWxNaWRkbGV3YXJlID0gZmluYWxNaWRkbGV3YXJlKGN1cnJpZWRHZXREZWZhdWx0TWlkZGxld2FyZSk7XHJcbiAgICAgICAgaWYgKCFJU19QUk9EVUNUSU9OICYmICFBcnJheS5pc0FycmF5KGZpbmFsTWlkZGxld2FyZSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwid2hlbiB1c2luZyBhIG1pZGRsZXdhcmUgYnVpbGRlciBmdW5jdGlvbiwgYW4gYXJyYXkgb2YgbWlkZGxld2FyZSBtdXN0IGJlIHJldHVybmVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICghSVNfUFJPRFVDVElPTiAmJiBmaW5hbE1pZGRsZXdhcmUuc29tZShmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gdHlwZW9mIGl0ZW0gIT09IFwiZnVuY3Rpb25cIjsgfSkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJlYWNoIG1pZGRsZXdhcmUgcHJvdmlkZWQgdG8gY29uZmlndXJlU3RvcmUgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO1xyXG4gICAgfVxyXG4gICAgdmFyIG1pZGRsZXdhcmVFbmhhbmNlciA9IGFwcGx5TWlkZGxld2FyZS5hcHBseSh2b2lkIDAsIGZpbmFsTWlkZGxld2FyZSk7XHJcbiAgICB2YXIgZmluYWxDb21wb3NlID0gY29tcG9zZTI7XHJcbiAgICBpZiAoZGV2VG9vbHMpIHtcclxuICAgICAgICBmaW5hbENvbXBvc2UgPSBjb21wb3NlV2l0aERldlRvb2xzKF9fc3ByZWFkVmFsdWVzKHtcclxuICAgICAgICAgICAgdHJhY2U6ICFJU19QUk9EVUNUSU9OXHJcbiAgICAgICAgfSwgdHlwZW9mIGRldlRvb2xzID09PSBcIm9iamVjdFwiICYmIGRldlRvb2xzKSk7XHJcbiAgICB9XHJcbiAgICB2YXIgZGVmYXVsdEVuaGFuY2VycyA9IG5ldyBFbmhhbmNlckFycmF5KG1pZGRsZXdhcmVFbmhhbmNlcik7XHJcbiAgICB2YXIgc3RvcmVFbmhhbmNlcnMgPSBkZWZhdWx0RW5oYW5jZXJzO1xyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZW5oYW5jZXJzKSkge1xyXG4gICAgICAgIHN0b3JlRW5oYW5jZXJzID0gX19zcHJlYWRBcnJheShbbWlkZGxld2FyZUVuaGFuY2VyXSwgZW5oYW5jZXJzKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiBlbmhhbmNlcnMgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgIHN0b3JlRW5oYW5jZXJzID0gZW5oYW5jZXJzKGRlZmF1bHRFbmhhbmNlcnMpO1xyXG4gICAgfVxyXG4gICAgdmFyIGNvbXBvc2VkRW5oYW5jZXIgPSBmaW5hbENvbXBvc2UuYXBwbHkodm9pZCAwLCBzdG9yZUVuaGFuY2Vycyk7XHJcbiAgICByZXR1cm4gY3JlYXRlU3RvcmUocm9vdFJlZHVjZXIsIHByZWxvYWRlZFN0YXRlLCBjb21wb3NlZEVuaGFuY2VyKTtcclxufVxyXG4vLyBzcmMvY3JlYXRlUmVkdWNlci50c1xyXG5pbXBvcnQgY3JlYXRlTmV4dFN0YXRlMiwgeyBpc0RyYWZ0IGFzIGlzRHJhZnQyLCBpc0RyYWZ0YWJsZSBhcyBpc0RyYWZ0YWJsZTIgfSBmcm9tIFwiaW1tZXJcIjtcclxuLy8gc3JjL21hcEJ1aWxkZXJzLnRzXHJcbmZ1bmN0aW9uIGV4ZWN1dGVSZWR1Y2VyQnVpbGRlckNhbGxiYWNrKGJ1aWxkZXJDYWxsYmFjaykge1xyXG4gICAgdmFyIGFjdGlvbnNNYXAgPSB7fTtcclxuICAgIHZhciBhY3Rpb25NYXRjaGVycyA9IFtdO1xyXG4gICAgdmFyIGRlZmF1bHRDYXNlUmVkdWNlcjtcclxuICAgIHZhciBidWlsZGVyID0ge1xyXG4gICAgICAgIGFkZENhc2U6IGZ1bmN0aW9uICh0eXBlT3JBY3Rpb25DcmVhdG9yLCByZWR1Y2VyKSB7XHJcbiAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhY3Rpb25NYXRjaGVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYGJ1aWxkZXIuYWRkQ2FzZWAgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGJlZm9yZSBjYWxsaW5nIGBidWlsZGVyLmFkZE1hdGNoZXJgXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGRlZmF1bHRDYXNlUmVkdWNlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImBidWlsZGVyLmFkZENhc2VgIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBiZWZvcmUgY2FsbGluZyBgYnVpbGRlci5hZGREZWZhdWx0Q2FzZWBcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgdHlwZU9yQWN0aW9uQ3JlYXRvciA9PT0gXCJzdHJpbmdcIiA/IHR5cGVPckFjdGlvbkNyZWF0b3IgOiB0eXBlT3JBY3Rpb25DcmVhdG9yLnR5cGU7XHJcbiAgICAgICAgICAgIGlmICghdHlwZSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYGJ1aWxkZXIuYWRkQ2FzZWAgY2Fubm90IGJlIGNhbGxlZCB3aXRoIGFuIGVtcHR5IGFjdGlvbiB0eXBlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlIGluIGFjdGlvbnNNYXApIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImBidWlsZGVyLmFkZENhc2VgIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCB0d28gcmVkdWNlcnMgZm9yIHRoZSBzYW1lIGFjdGlvbiB0eXBlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFjdGlvbnNNYXBbdHlwZV0gPSByZWR1Y2VyO1xyXG4gICAgICAgICAgICByZXR1cm4gYnVpbGRlcjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFkZE1hdGNoZXI6IGZ1bmN0aW9uIChtYXRjaGVyLCByZWR1Y2VyKSB7XHJcbiAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkZWZhdWx0Q2FzZVJlZHVjZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJgYnVpbGRlci5hZGRNYXRjaGVyYCBzaG91bGQgb25seSBiZSBjYWxsZWQgYmVmb3JlIGNhbGxpbmcgYGJ1aWxkZXIuYWRkRGVmYXVsdENhc2VgXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFjdGlvbk1hdGNoZXJzLnB1c2goeyBtYXRjaGVyOiBtYXRjaGVyLCByZWR1Y2VyOiByZWR1Y2VyIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gYnVpbGRlcjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFkZERlZmF1bHRDYXNlOiBmdW5jdGlvbiAocmVkdWNlcikge1xyXG4gICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGVmYXVsdENhc2VSZWR1Y2VyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYGJ1aWxkZXIuYWRkRGVmYXVsdENhc2VgIGNhbiBvbmx5IGJlIGNhbGxlZCBvbmNlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlZmF1bHRDYXNlUmVkdWNlciA9IHJlZHVjZXI7XHJcbiAgICAgICAgICAgIHJldHVybiBidWlsZGVyO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBidWlsZGVyQ2FsbGJhY2soYnVpbGRlcik7XHJcbiAgICByZXR1cm4gW2FjdGlvbnNNYXAsIGFjdGlvbk1hdGNoZXJzLCBkZWZhdWx0Q2FzZVJlZHVjZXJdO1xyXG59XHJcbi8vIHNyYy9jcmVhdGVSZWR1Y2VyLnRzXHJcbmZ1bmN0aW9uIGlzU3RhdGVGdW5jdGlvbih4KSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHggPT09IFwiZnVuY3Rpb25cIjtcclxufVxyXG52YXIgaGFzV2FybmVkQWJvdXRPYmplY3ROb3RhdGlvbiA9IGZhbHNlO1xyXG5mdW5jdGlvbiBjcmVhdGVSZWR1Y2VyKGluaXRpYWxTdGF0ZSwgbWFwT3JCdWlsZGVyQ2FsbGJhY2ssIGFjdGlvbk1hdGNoZXJzLCBkZWZhdWx0Q2FzZVJlZHVjZXIpIHtcclxuICAgIGlmIChhY3Rpb25NYXRjaGVycyA9PT0gdm9pZCAwKSB7IGFjdGlvbk1hdGNoZXJzID0gW107IH1cclxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcclxuICAgICAgICBpZiAodHlwZW9mIG1hcE9yQnVpbGRlckNhbGxiYWNrID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgICAgIGlmICghaGFzV2FybmVkQWJvdXRPYmplY3ROb3RhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgaGFzV2FybmVkQWJvdXRPYmplY3ROb3RhdGlvbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJUaGUgb2JqZWN0IG5vdGF0aW9uIGZvciBgY3JlYXRlUmVkdWNlcmAgaXMgZGVwcmVjYXRlZCwgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBSVEsgMi4wLiBQbGVhc2UgdXNlIHRoZSAnYnVpbGRlciBjYWxsYmFjaycgbm90YXRpb24gaW5zdGVhZDogaHR0cHM6Ly9yZWR1eC10b29sa2l0LmpzLm9yZy9hcGkvY3JlYXRlUmVkdWNlclwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHZhciBfYyA9IHR5cGVvZiBtYXBPckJ1aWxkZXJDYWxsYmFjayA9PT0gXCJmdW5jdGlvblwiID8gZXhlY3V0ZVJlZHVjZXJCdWlsZGVyQ2FsbGJhY2sobWFwT3JCdWlsZGVyQ2FsbGJhY2spIDogW21hcE9yQnVpbGRlckNhbGxiYWNrLCBhY3Rpb25NYXRjaGVycywgZGVmYXVsdENhc2VSZWR1Y2VyXSwgYWN0aW9uc01hcCA9IF9jWzBdLCBmaW5hbEFjdGlvbk1hdGNoZXJzID0gX2NbMV0sIGZpbmFsRGVmYXVsdENhc2VSZWR1Y2VyID0gX2NbMl07XHJcbiAgICB2YXIgZ2V0SW5pdGlhbFN0YXRlO1xyXG4gICAgaWYgKGlzU3RhdGVGdW5jdGlvbihpbml0aWFsU3RhdGUpKSB7XHJcbiAgICAgICAgZ2V0SW5pdGlhbFN0YXRlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZnJlZXplRHJhZnRhYmxlKGluaXRpYWxTdGF0ZSgpKTsgfTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHZhciBmcm96ZW5Jbml0aWFsU3RhdGVfMSA9IGZyZWV6ZURyYWZ0YWJsZShpbml0aWFsU3RhdGUpO1xyXG4gICAgICAgIGdldEluaXRpYWxTdGF0ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZyb3plbkluaXRpYWxTdGF0ZV8xOyB9O1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcmVkdWNlcihzdGF0ZSwgYWN0aW9uKSB7XHJcbiAgICAgICAgaWYgKHN0YXRlID09PSB2b2lkIDApIHsgc3RhdGUgPSBnZXRJbml0aWFsU3RhdGUoKTsgfVxyXG4gICAgICAgIHZhciBjYXNlUmVkdWNlcnMgPSBfX3NwcmVhZEFycmF5KFtcclxuICAgICAgICAgICAgYWN0aW9uc01hcFthY3Rpb24udHlwZV1cclxuICAgICAgICBdLCBmaW5hbEFjdGlvbk1hdGNoZXJzLmZpbHRlcihmdW5jdGlvbiAoX2MpIHtcclxuICAgICAgICAgICAgdmFyIG1hdGNoZXIgPSBfYy5tYXRjaGVyO1xyXG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hlcihhY3Rpb24pO1xyXG4gICAgICAgIH0pLm1hcChmdW5jdGlvbiAoX2MpIHtcclxuICAgICAgICAgICAgdmFyIHJlZHVjZXIyID0gX2MucmVkdWNlcjtcclxuICAgICAgICAgICAgcmV0dXJuIHJlZHVjZXIyO1xyXG4gICAgICAgIH0pKTtcclxuICAgICAgICBpZiAoY2FzZVJlZHVjZXJzLmZpbHRlcihmdW5jdGlvbiAoY3IpIHsgcmV0dXJuICEhY3I7IH0pLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBjYXNlUmVkdWNlcnMgPSBbZmluYWxEZWZhdWx0Q2FzZVJlZHVjZXJdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2FzZVJlZHVjZXJzLnJlZHVjZShmdW5jdGlvbiAocHJldmlvdXNTdGF0ZSwgY2FzZVJlZHVjZXIpIHtcclxuICAgICAgICAgICAgaWYgKGNhc2VSZWR1Y2VyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNEcmFmdDIocHJldmlvdXNTdGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZHJhZnQgPSBwcmV2aW91c1N0YXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBjYXNlUmVkdWNlcihkcmFmdCwgYWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXZpb3VzU3RhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghaXNEcmFmdGFibGUyKHByZXZpb3VzU3RhdGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGNhc2VSZWR1Y2VyKHByZXZpb3VzU3RhdGUsIGFjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c1N0YXRlID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldmlvdXNTdGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihcIkEgY2FzZSByZWR1Y2VyIG9uIGEgbm9uLWRyYWZ0YWJsZSB2YWx1ZSBtdXN0IG5vdCByZXR1cm4gdW5kZWZpbmVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU5leHRTdGF0ZTIocHJldmlvdXNTdGF0ZSwgZnVuY3Rpb24gKGRyYWZ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYXNlUmVkdWNlcihkcmFmdCwgYWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcHJldmlvdXNTdGF0ZTtcclxuICAgICAgICB9LCBzdGF0ZSk7XHJcbiAgICB9XHJcbiAgICByZWR1Y2VyLmdldEluaXRpYWxTdGF0ZSA9IGdldEluaXRpYWxTdGF0ZTtcclxuICAgIHJldHVybiByZWR1Y2VyO1xyXG59XHJcbi8vIHNyYy9jcmVhdGVTbGljZS50c1xyXG52YXIgaGFzV2FybmVkQWJvdXRPYmplY3ROb3RhdGlvbjIgPSBmYWxzZTtcclxuZnVuY3Rpb24gZ2V0VHlwZTIoc2xpY2UsIGFjdGlvbktleSkge1xyXG4gICAgcmV0dXJuIHNsaWNlICsgXCIvXCIgKyBhY3Rpb25LZXk7XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlU2xpY2Uob3B0aW9ucykge1xyXG4gICAgdmFyIG5hbWUgPSBvcHRpb25zLm5hbWU7XHJcbiAgICBpZiAoIW5hbWUpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJgbmFtZWAgaXMgYSByZXF1aXJlZCBvcHRpb24gZm9yIGNyZWF0ZVNsaWNlXCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcImRldmVsb3BtZW50XCIpIHtcclxuICAgICAgICBpZiAob3B0aW9ucy5pbml0aWFsU3RhdGUgPT09IHZvaWQgMCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiWW91IG11c3QgcHJvdmlkZSBhbiBgaW5pdGlhbFN0YXRlYCB2YWx1ZSB0aGF0IGlzIG5vdCBgdW5kZWZpbmVkYC4gWW91IG1heSBoYXZlIG1pc3NwZWxsZWQgYGluaXRpYWxTdGF0ZWBcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdmFyIGluaXRpYWxTdGF0ZSA9IHR5cGVvZiBvcHRpb25zLmluaXRpYWxTdGF0ZSA9PSBcImZ1bmN0aW9uXCIgPyBvcHRpb25zLmluaXRpYWxTdGF0ZSA6IGZyZWV6ZURyYWZ0YWJsZShvcHRpb25zLmluaXRpYWxTdGF0ZSk7XHJcbiAgICB2YXIgcmVkdWNlcnMgPSBvcHRpb25zLnJlZHVjZXJzIHx8IHt9O1xyXG4gICAgdmFyIHJlZHVjZXJOYW1lcyA9IE9iamVjdC5rZXlzKHJlZHVjZXJzKTtcclxuICAgIHZhciBzbGljZUNhc2VSZWR1Y2Vyc0J5TmFtZSA9IHt9O1xyXG4gICAgdmFyIHNsaWNlQ2FzZVJlZHVjZXJzQnlUeXBlID0ge307XHJcbiAgICB2YXIgYWN0aW9uQ3JlYXRvcnMgPSB7fTtcclxuICAgIHJlZHVjZXJOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChyZWR1Y2VyTmFtZSkge1xyXG4gICAgICAgIHZhciBtYXliZVJlZHVjZXJXaXRoUHJlcGFyZSA9IHJlZHVjZXJzW3JlZHVjZXJOYW1lXTtcclxuICAgICAgICB2YXIgdHlwZSA9IGdldFR5cGUyKG5hbWUsIHJlZHVjZXJOYW1lKTtcclxuICAgICAgICB2YXIgY2FzZVJlZHVjZXI7XHJcbiAgICAgICAgdmFyIHByZXBhcmVDYWxsYmFjaztcclxuICAgICAgICBpZiAoXCJyZWR1Y2VyXCIgaW4gbWF5YmVSZWR1Y2VyV2l0aFByZXBhcmUpIHtcclxuICAgICAgICAgICAgY2FzZVJlZHVjZXIgPSBtYXliZVJlZHVjZXJXaXRoUHJlcGFyZS5yZWR1Y2VyO1xyXG4gICAgICAgICAgICBwcmVwYXJlQ2FsbGJhY2sgPSBtYXliZVJlZHVjZXJXaXRoUHJlcGFyZS5wcmVwYXJlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY2FzZVJlZHVjZXIgPSBtYXliZVJlZHVjZXJXaXRoUHJlcGFyZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2xpY2VDYXNlUmVkdWNlcnNCeU5hbWVbcmVkdWNlck5hbWVdID0gY2FzZVJlZHVjZXI7XHJcbiAgICAgICAgc2xpY2VDYXNlUmVkdWNlcnNCeVR5cGVbdHlwZV0gPSBjYXNlUmVkdWNlcjtcclxuICAgICAgICBhY3Rpb25DcmVhdG9yc1tyZWR1Y2VyTmFtZV0gPSBwcmVwYXJlQ2FsbGJhY2sgPyBjcmVhdGVBY3Rpb24odHlwZSwgcHJlcGFyZUNhbGxiYWNrKSA6IGNyZWF0ZUFjdGlvbih0eXBlKTtcclxuICAgIH0pO1xyXG4gICAgZnVuY3Rpb24gYnVpbGRSZWR1Y2VyKCkge1xyXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmV4dHJhUmVkdWNlcnMgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghaGFzV2FybmVkQWJvdXRPYmplY3ROb3RhdGlvbjIpIHtcclxuICAgICAgICAgICAgICAgICAgICBoYXNXYXJuZWRBYm91dE9iamVjdE5vdGF0aW9uMiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiVGhlIG9iamVjdCBub3RhdGlvbiBmb3IgYGNyZWF0ZVNsaWNlLmV4dHJhUmVkdWNlcnNgIGlzIGRlcHJlY2F0ZWQsIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gUlRLIDIuMC4gUGxlYXNlIHVzZSB0aGUgJ2J1aWxkZXIgY2FsbGJhY2snIG5vdGF0aW9uIGluc3RlYWQ6IGh0dHBzOi8vcmVkdXgtdG9vbGtpdC5qcy5vcmcvYXBpL2NyZWF0ZVNsaWNlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBfYyA9IHR5cGVvZiBvcHRpb25zLmV4dHJhUmVkdWNlcnMgPT09IFwiZnVuY3Rpb25cIiA/IGV4ZWN1dGVSZWR1Y2VyQnVpbGRlckNhbGxiYWNrKG9wdGlvbnMuZXh0cmFSZWR1Y2VycykgOiBbb3B0aW9ucy5leHRyYVJlZHVjZXJzXSwgX2QgPSBfY1swXSwgZXh0cmFSZWR1Y2VycyA9IF9kID09PSB2b2lkIDAgPyB7fSA6IF9kLCBfZSA9IF9jWzFdLCBhY3Rpb25NYXRjaGVycyA9IF9lID09PSB2b2lkIDAgPyBbXSA6IF9lLCBfZiA9IF9jWzJdLCBkZWZhdWx0Q2FzZVJlZHVjZXIgPSBfZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Y7XHJcbiAgICAgICAgdmFyIGZpbmFsQ2FzZVJlZHVjZXJzID0gX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sIGV4dHJhUmVkdWNlcnMpLCBzbGljZUNhc2VSZWR1Y2Vyc0J5VHlwZSk7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVJlZHVjZXIoaW5pdGlhbFN0YXRlLCBmdW5jdGlvbiAoYnVpbGRlcikge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gZmluYWxDYXNlUmVkdWNlcnMpIHtcclxuICAgICAgICAgICAgICAgIGJ1aWxkZXIuYWRkQ2FzZShrZXksIGZpbmFsQ2FzZVJlZHVjZXJzW2tleV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgYWN0aW9uTWF0Y2hlcnNfMSA9IGFjdGlvbk1hdGNoZXJzOyBfaSA8IGFjdGlvbk1hdGNoZXJzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbSA9IGFjdGlvbk1hdGNoZXJzXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgYnVpbGRlci5hZGRNYXRjaGVyKG0ubWF0Y2hlciwgbS5yZWR1Y2VyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGVmYXVsdENhc2VSZWR1Y2VyKSB7XHJcbiAgICAgICAgICAgICAgICBidWlsZGVyLmFkZERlZmF1bHRDYXNlKGRlZmF1bHRDYXNlUmVkdWNlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHZhciBfcmVkdWNlcjtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICByZWR1Y2VyOiBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xyXG4gICAgICAgICAgICBpZiAoIV9yZWR1Y2VyKVxyXG4gICAgICAgICAgICAgICAgX3JlZHVjZXIgPSBidWlsZFJlZHVjZXIoKTtcclxuICAgICAgICAgICAgcmV0dXJuIF9yZWR1Y2VyKHN0YXRlLCBhY3Rpb24pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWN0aW9uczogYWN0aW9uQ3JlYXRvcnMsXHJcbiAgICAgICAgY2FzZVJlZHVjZXJzOiBzbGljZUNhc2VSZWR1Y2Vyc0J5TmFtZSxcclxuICAgICAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCFfcmVkdWNlcilcclxuICAgICAgICAgICAgICAgIF9yZWR1Y2VyID0gYnVpbGRSZWR1Y2VyKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBfcmVkdWNlci5nZXRJbml0aWFsU3RhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcbi8vIHNyYy9lbnRpdGllcy9lbnRpdHlfc3RhdGUudHNcclxuZnVuY3Rpb24gZ2V0SW5pdGlhbEVudGl0eVN0YXRlKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBpZHM6IFtdLFxyXG4gICAgICAgIGVudGl0aWVzOiB7fVxyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVJbml0aWFsU3RhdGVGYWN0b3J5KCkge1xyXG4gICAgZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YXRlKGFkZGl0aW9uYWxTdGF0ZSkge1xyXG4gICAgICAgIGlmIChhZGRpdGlvbmFsU3RhdGUgPT09IHZvaWQgMCkgeyBhZGRpdGlvbmFsU3RhdGUgPSB7fTsgfVxyXG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKGdldEluaXRpYWxFbnRpdHlTdGF0ZSgpLCBhZGRpdGlvbmFsU3RhdGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHsgZ2V0SW5pdGlhbFN0YXRlOiBnZXRJbml0aWFsU3RhdGUgfTtcclxufVxyXG4vLyBzcmMvZW50aXRpZXMvc3RhdGVfc2VsZWN0b3JzLnRzXHJcbmZ1bmN0aW9uIGNyZWF0ZVNlbGVjdG9yc0ZhY3RvcnkoKSB7XHJcbiAgICBmdW5jdGlvbiBnZXRTZWxlY3RvcnMoc2VsZWN0U3RhdGUpIHtcclxuICAgICAgICB2YXIgc2VsZWN0SWRzID0gZnVuY3Rpb24gKHN0YXRlKSB7IHJldHVybiBzdGF0ZS5pZHM7IH07XHJcbiAgICAgICAgdmFyIHNlbGVjdEVudGl0aWVzID0gZnVuY3Rpb24gKHN0YXRlKSB7IHJldHVybiBzdGF0ZS5lbnRpdGllczsgfTtcclxuICAgICAgICB2YXIgc2VsZWN0QWxsID0gY3JlYXRlRHJhZnRTYWZlU2VsZWN0b3Ioc2VsZWN0SWRzLCBzZWxlY3RFbnRpdGllcywgZnVuY3Rpb24gKGlkcywgZW50aXRpZXMpIHsgcmV0dXJuIGlkcy5tYXAoZnVuY3Rpb24gKGlkKSB7IHJldHVybiBlbnRpdGllc1tpZF07IH0pOyB9KTtcclxuICAgICAgICB2YXIgc2VsZWN0SWQgPSBmdW5jdGlvbiAoXywgaWQpIHsgcmV0dXJuIGlkOyB9O1xyXG4gICAgICAgIHZhciBzZWxlY3RCeUlkID0gZnVuY3Rpb24gKGVudGl0aWVzLCBpZCkgeyByZXR1cm4gZW50aXRpZXNbaWRdOyB9O1xyXG4gICAgICAgIHZhciBzZWxlY3RUb3RhbCA9IGNyZWF0ZURyYWZ0U2FmZVNlbGVjdG9yKHNlbGVjdElkcywgZnVuY3Rpb24gKGlkcykgeyByZXR1cm4gaWRzLmxlbmd0aDsgfSk7XHJcbiAgICAgICAgaWYgKCFzZWxlY3RTdGF0ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0SWRzOiBzZWxlY3RJZHMsXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RFbnRpdGllczogc2VsZWN0RW50aXRpZXMsXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RBbGw6IHNlbGVjdEFsbCxcclxuICAgICAgICAgICAgICAgIHNlbGVjdFRvdGFsOiBzZWxlY3RUb3RhbCxcclxuICAgICAgICAgICAgICAgIHNlbGVjdEJ5SWQ6IGNyZWF0ZURyYWZ0U2FmZVNlbGVjdG9yKHNlbGVjdEVudGl0aWVzLCBzZWxlY3RJZCwgc2VsZWN0QnlJZClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHNlbGVjdEdsb2JhbGl6ZWRFbnRpdGllcyA9IGNyZWF0ZURyYWZ0U2FmZVNlbGVjdG9yKHNlbGVjdFN0YXRlLCBzZWxlY3RFbnRpdGllcyk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2VsZWN0SWRzOiBjcmVhdGVEcmFmdFNhZmVTZWxlY3RvcihzZWxlY3RTdGF0ZSwgc2VsZWN0SWRzKSxcclxuICAgICAgICAgICAgc2VsZWN0RW50aXRpZXM6IHNlbGVjdEdsb2JhbGl6ZWRFbnRpdGllcyxcclxuICAgICAgICAgICAgc2VsZWN0QWxsOiBjcmVhdGVEcmFmdFNhZmVTZWxlY3RvcihzZWxlY3RTdGF0ZSwgc2VsZWN0QWxsKSxcclxuICAgICAgICAgICAgc2VsZWN0VG90YWw6IGNyZWF0ZURyYWZ0U2FmZVNlbGVjdG9yKHNlbGVjdFN0YXRlLCBzZWxlY3RUb3RhbCksXHJcbiAgICAgICAgICAgIHNlbGVjdEJ5SWQ6IGNyZWF0ZURyYWZ0U2FmZVNlbGVjdG9yKHNlbGVjdEdsb2JhbGl6ZWRFbnRpdGllcywgc2VsZWN0SWQsIHNlbGVjdEJ5SWQpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHJldHVybiB7IGdldFNlbGVjdG9yczogZ2V0U2VsZWN0b3JzIH07XHJcbn1cclxuLy8gc3JjL2VudGl0aWVzL3N0YXRlX2FkYXB0ZXIudHNcclxuaW1wb3J0IGNyZWF0ZU5leHRTdGF0ZTMsIHsgaXNEcmFmdCBhcyBpc0RyYWZ0MyB9IGZyb20gXCJpbW1lclwiO1xyXG5mdW5jdGlvbiBjcmVhdGVTaW5nbGVBcmd1bWVudFN0YXRlT3BlcmF0b3IobXV0YXRvcikge1xyXG4gICAgdmFyIG9wZXJhdG9yID0gY3JlYXRlU3RhdGVPcGVyYXRvcihmdW5jdGlvbiAoXywgc3RhdGUpIHsgcmV0dXJuIG11dGF0b3Ioc3RhdGUpOyB9KTtcclxuICAgIHJldHVybiBmdW5jdGlvbiBvcGVyYXRpb24oc3RhdGUpIHtcclxuICAgICAgICByZXR1cm4gb3BlcmF0b3Ioc3RhdGUsIHZvaWQgMCk7XHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZVN0YXRlT3BlcmF0b3IobXV0YXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG9wZXJhdGlvbihzdGF0ZSwgYXJnKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gaXNQYXlsb2FkQWN0aW9uQXJndW1lbnQoYXJnMikge1xyXG4gICAgICAgICAgICByZXR1cm4gaXNGU0EoYXJnMik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBydW5NdXRhdG9yID0gZnVuY3Rpb24gKGRyYWZ0KSB7XHJcbiAgICAgICAgICAgIGlmIChpc1BheWxvYWRBY3Rpb25Bcmd1bWVudChhcmcpKSB7XHJcbiAgICAgICAgICAgICAgICBtdXRhdG9yKGFyZy5wYXlsb2FkLCBkcmFmdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBtdXRhdG9yKGFyZywgZHJhZnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoaXNEcmFmdDMoc3RhdGUpKSB7XHJcbiAgICAgICAgICAgIHJ1bk11dGF0b3Ioc3RhdGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlTmV4dFN0YXRlMyhzdGF0ZSwgcnVuTXV0YXRvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG4vLyBzcmMvZW50aXRpZXMvdXRpbHMudHNcclxuZnVuY3Rpb24gc2VsZWN0SWRWYWx1ZShlbnRpdHksIHNlbGVjdElkKSB7XHJcbiAgICB2YXIga2V5ID0gc2VsZWN0SWQoZW50aXR5KTtcclxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgJiYga2V5ID09PSB2b2lkIDApIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oXCJUaGUgZW50aXR5IHBhc3NlZCB0byB0aGUgYHNlbGVjdElkYCBpbXBsZW1lbnRhdGlvbiByZXR1cm5lZCB1bmRlZmluZWQuXCIsIFwiWW91IHNob3VsZCBwcm9iYWJseSBwcm92aWRlIHlvdXIgb3duIGBzZWxlY3RJZGAgaW1wbGVtZW50YXRpb24uXCIsIFwiVGhlIGVudGl0eSB0aGF0IHdhcyBwYXNzZWQ6XCIsIGVudGl0eSwgXCJUaGUgYHNlbGVjdElkYCBpbXBsZW1lbnRhdGlvbjpcIiwgc2VsZWN0SWQudG9TdHJpbmcoKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ga2V5O1xyXG59XHJcbmZ1bmN0aW9uIGVuc3VyZUVudGl0aWVzQXJyYXkoZW50aXRpZXMpIHtcclxuICAgIGlmICghQXJyYXkuaXNBcnJheShlbnRpdGllcykpIHtcclxuICAgICAgICBlbnRpdGllcyA9IE9iamVjdC52YWx1ZXMoZW50aXRpZXMpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVudGl0aWVzO1xyXG59XHJcbmZ1bmN0aW9uIHNwbGl0QWRkZWRVcGRhdGVkRW50aXRpZXMobmV3RW50aXRpZXMsIHNlbGVjdElkLCBzdGF0ZSkge1xyXG4gICAgbmV3RW50aXRpZXMgPSBlbnN1cmVFbnRpdGllc0FycmF5KG5ld0VudGl0aWVzKTtcclxuICAgIHZhciBhZGRlZCA9IFtdO1xyXG4gICAgdmFyIHVwZGF0ZWQgPSBbXTtcclxuICAgIGZvciAodmFyIF9pID0gMCwgbmV3RW50aXRpZXNfMSA9IG5ld0VudGl0aWVzOyBfaSA8IG5ld0VudGl0aWVzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgdmFyIGVudGl0eSA9IG5ld0VudGl0aWVzXzFbX2ldO1xyXG4gICAgICAgIHZhciBpZCA9IHNlbGVjdElkVmFsdWUoZW50aXR5LCBzZWxlY3RJZCk7XHJcbiAgICAgICAgaWYgKGlkIGluIHN0YXRlLmVudGl0aWVzKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZWQucHVzaCh7IGlkOiBpZCwgY2hhbmdlczogZW50aXR5IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYWRkZWQucHVzaChlbnRpdHkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBbYWRkZWQsIHVwZGF0ZWRdO1xyXG59XHJcbi8vIHNyYy9lbnRpdGllcy91bnNvcnRlZF9zdGF0ZV9hZGFwdGVyLnRzXHJcbmZ1bmN0aW9uIGNyZWF0ZVVuc29ydGVkU3RhdGVBZGFwdGVyKHNlbGVjdElkKSB7XHJcbiAgICBmdW5jdGlvbiBhZGRPbmVNdXRhYmx5KGVudGl0eSwgc3RhdGUpIHtcclxuICAgICAgICB2YXIga2V5ID0gc2VsZWN0SWRWYWx1ZShlbnRpdHksIHNlbGVjdElkKTtcclxuICAgICAgICBpZiAoa2V5IGluIHN0YXRlLmVudGl0aWVzKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3RhdGUuaWRzLnB1c2goa2V5KTtcclxuICAgICAgICBzdGF0ZS5lbnRpdGllc1trZXldID0gZW50aXR5O1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gYWRkTWFueU11dGFibHkobmV3RW50aXRpZXMsIHN0YXRlKSB7XHJcbiAgICAgICAgbmV3RW50aXRpZXMgPSBlbnN1cmVFbnRpdGllc0FycmF5KG5ld0VudGl0aWVzKTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIG5ld0VudGl0aWVzXzIgPSBuZXdFbnRpdGllczsgX2kgPCBuZXdFbnRpdGllc18yLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgZW50aXR5ID0gbmV3RW50aXRpZXNfMltfaV07XHJcbiAgICAgICAgICAgIGFkZE9uZU11dGFibHkoZW50aXR5LCBzdGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc2V0T25lTXV0YWJseShlbnRpdHksIHN0YXRlKSB7XHJcbiAgICAgICAgdmFyIGtleSA9IHNlbGVjdElkVmFsdWUoZW50aXR5LCBzZWxlY3RJZCk7XHJcbiAgICAgICAgaWYgKCEoa2V5IGluIHN0YXRlLmVudGl0aWVzKSkge1xyXG4gICAgICAgICAgICBzdGF0ZS5pZHMucHVzaChrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzdGF0ZS5lbnRpdGllc1trZXldID0gZW50aXR5O1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc2V0TWFueU11dGFibHkobmV3RW50aXRpZXMsIHN0YXRlKSB7XHJcbiAgICAgICAgbmV3RW50aXRpZXMgPSBlbnN1cmVFbnRpdGllc0FycmF5KG5ld0VudGl0aWVzKTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIG5ld0VudGl0aWVzXzMgPSBuZXdFbnRpdGllczsgX2kgPCBuZXdFbnRpdGllc18zLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgZW50aXR5ID0gbmV3RW50aXRpZXNfM1tfaV07XHJcbiAgICAgICAgICAgIHNldE9uZU11dGFibHkoZW50aXR5LCBzdGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc2V0QWxsTXV0YWJseShuZXdFbnRpdGllcywgc3RhdGUpIHtcclxuICAgICAgICBuZXdFbnRpdGllcyA9IGVuc3VyZUVudGl0aWVzQXJyYXkobmV3RW50aXRpZXMpO1xyXG4gICAgICAgIHN0YXRlLmlkcyA9IFtdO1xyXG4gICAgICAgIHN0YXRlLmVudGl0aWVzID0ge307XHJcbiAgICAgICAgYWRkTWFueU11dGFibHkobmV3RW50aXRpZXMsIHN0YXRlKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlbW92ZU9uZU11dGFibHkoa2V5LCBzdGF0ZSkge1xyXG4gICAgICAgIHJldHVybiByZW1vdmVNYW55TXV0YWJseShba2V5XSwgc3RhdGUpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcmVtb3ZlTWFueU11dGFibHkoa2V5cywgc3RhdGUpIHtcclxuICAgICAgICB2YXIgZGlkTXV0YXRlID0gZmFsc2U7XHJcbiAgICAgICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgaWYgKGtleSBpbiBzdGF0ZS5lbnRpdGllcykge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHN0YXRlLmVudGl0aWVzW2tleV07XHJcbiAgICAgICAgICAgICAgICBkaWRNdXRhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKGRpZE11dGF0ZSkge1xyXG4gICAgICAgICAgICBzdGF0ZS5pZHMgPSBzdGF0ZS5pZHMuZmlsdGVyKGZ1bmN0aW9uIChpZCkgeyByZXR1cm4gaWQgaW4gc3RhdGUuZW50aXRpZXM7IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlbW92ZUFsbE11dGFibHkoc3RhdGUpIHtcclxuICAgICAgICBPYmplY3QuYXNzaWduKHN0YXRlLCB7XHJcbiAgICAgICAgICAgIGlkczogW10sXHJcbiAgICAgICAgICAgIGVudGl0aWVzOiB7fVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdGFrZU5ld0tleShrZXlzLCB1cGRhdGUsIHN0YXRlKSB7XHJcbiAgICAgICAgdmFyIG9yaWdpbmFsMiA9IHN0YXRlLmVudGl0aWVzW3VwZGF0ZS5pZF07XHJcbiAgICAgICAgdmFyIHVwZGF0ZWQgPSBPYmplY3QuYXNzaWduKHt9LCBvcmlnaW5hbDIsIHVwZGF0ZS5jaGFuZ2VzKTtcclxuICAgICAgICB2YXIgbmV3S2V5ID0gc2VsZWN0SWRWYWx1ZSh1cGRhdGVkLCBzZWxlY3RJZCk7XHJcbiAgICAgICAgdmFyIGhhc05ld0tleSA9IG5ld0tleSAhPT0gdXBkYXRlLmlkO1xyXG4gICAgICAgIGlmIChoYXNOZXdLZXkpIHtcclxuICAgICAgICAgICAga2V5c1t1cGRhdGUuaWRdID0gbmV3S2V5O1xyXG4gICAgICAgICAgICBkZWxldGUgc3RhdGUuZW50aXRpZXNbdXBkYXRlLmlkXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3RhdGUuZW50aXRpZXNbbmV3S2V5XSA9IHVwZGF0ZWQ7XHJcbiAgICAgICAgcmV0dXJuIGhhc05ld0tleTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZU9uZU11dGFibHkodXBkYXRlLCBzdGF0ZSkge1xyXG4gICAgICAgIHJldHVybiB1cGRhdGVNYW55TXV0YWJseShbdXBkYXRlXSwgc3RhdGUpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdXBkYXRlTWFueU11dGFibHkodXBkYXRlcywgc3RhdGUpIHtcclxuICAgICAgICB2YXIgbmV3S2V5cyA9IHt9O1xyXG4gICAgICAgIHZhciB1cGRhdGVzUGVyRW50aXR5ID0ge307XHJcbiAgICAgICAgdXBkYXRlcy5mb3JFYWNoKGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuICAgICAgICAgICAgaWYgKHVwZGF0ZS5pZCBpbiBzdGF0ZS5lbnRpdGllcykge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlc1BlckVudGl0eVt1cGRhdGUuaWRdID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiB1cGRhdGUuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlczogX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sIHVwZGF0ZXNQZXJFbnRpdHlbdXBkYXRlLmlkXSA/IHVwZGF0ZXNQZXJFbnRpdHlbdXBkYXRlLmlkXS5jaGFuZ2VzIDogbnVsbCksIHVwZGF0ZS5jaGFuZ2VzKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHVwZGF0ZXMgPSBPYmplY3QudmFsdWVzKHVwZGF0ZXNQZXJFbnRpdHkpO1xyXG4gICAgICAgIHZhciBkaWRNdXRhdGVFbnRpdGllcyA9IHVwZGF0ZXMubGVuZ3RoID4gMDtcclxuICAgICAgICBpZiAoZGlkTXV0YXRlRW50aXRpZXMpIHtcclxuICAgICAgICAgICAgdmFyIGRpZE11dGF0ZUlkcyA9IHVwZGF0ZXMuZmlsdGVyKGZ1bmN0aW9uICh1cGRhdGUpIHsgcmV0dXJuIHRha2VOZXdLZXkobmV3S2V5cywgdXBkYXRlLCBzdGF0ZSk7IH0pLmxlbmd0aCA+IDA7XHJcbiAgICAgICAgICAgIGlmIChkaWRNdXRhdGVJZHMpIHtcclxuICAgICAgICAgICAgICAgIHN0YXRlLmlkcyA9IE9iamVjdC5rZXlzKHN0YXRlLmVudGl0aWVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHVwc2VydE9uZU11dGFibHkoZW50aXR5LCBzdGF0ZSkge1xyXG4gICAgICAgIHJldHVybiB1cHNlcnRNYW55TXV0YWJseShbZW50aXR5XSwgc3RhdGUpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdXBzZXJ0TWFueU11dGFibHkobmV3RW50aXRpZXMsIHN0YXRlKSB7XHJcbiAgICAgICAgdmFyIF9jID0gc3BsaXRBZGRlZFVwZGF0ZWRFbnRpdGllcyhuZXdFbnRpdGllcywgc2VsZWN0SWQsIHN0YXRlKSwgYWRkZWQgPSBfY1swXSwgdXBkYXRlZCA9IF9jWzFdO1xyXG4gICAgICAgIHVwZGF0ZU1hbnlNdXRhYmx5KHVwZGF0ZWQsIHN0YXRlKTtcclxuICAgICAgICBhZGRNYW55TXV0YWJseShhZGRlZCwgc3RhdGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICByZW1vdmVBbGw6IGNyZWF0ZVNpbmdsZUFyZ3VtZW50U3RhdGVPcGVyYXRvcihyZW1vdmVBbGxNdXRhYmx5KSxcclxuICAgICAgICBhZGRPbmU6IGNyZWF0ZVN0YXRlT3BlcmF0b3IoYWRkT25lTXV0YWJseSksXHJcbiAgICAgICAgYWRkTWFueTogY3JlYXRlU3RhdGVPcGVyYXRvcihhZGRNYW55TXV0YWJseSksXHJcbiAgICAgICAgc2V0T25lOiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHNldE9uZU11dGFibHkpLFxyXG4gICAgICAgIHNldE1hbnk6IGNyZWF0ZVN0YXRlT3BlcmF0b3Ioc2V0TWFueU11dGFibHkpLFxyXG4gICAgICAgIHNldEFsbDogY3JlYXRlU3RhdGVPcGVyYXRvcihzZXRBbGxNdXRhYmx5KSxcclxuICAgICAgICB1cGRhdGVPbmU6IGNyZWF0ZVN0YXRlT3BlcmF0b3IodXBkYXRlT25lTXV0YWJseSksXHJcbiAgICAgICAgdXBkYXRlTWFueTogY3JlYXRlU3RhdGVPcGVyYXRvcih1cGRhdGVNYW55TXV0YWJseSksXHJcbiAgICAgICAgdXBzZXJ0T25lOiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHVwc2VydE9uZU11dGFibHkpLFxyXG4gICAgICAgIHVwc2VydE1hbnk6IGNyZWF0ZVN0YXRlT3BlcmF0b3IodXBzZXJ0TWFueU11dGFibHkpLFxyXG4gICAgICAgIHJlbW92ZU9uZTogY3JlYXRlU3RhdGVPcGVyYXRvcihyZW1vdmVPbmVNdXRhYmx5KSxcclxuICAgICAgICByZW1vdmVNYW55OiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHJlbW92ZU1hbnlNdXRhYmx5KVxyXG4gICAgfTtcclxufVxyXG4vLyBzcmMvZW50aXRpZXMvc29ydGVkX3N0YXRlX2FkYXB0ZXIudHNcclxuZnVuY3Rpb24gY3JlYXRlU29ydGVkU3RhdGVBZGFwdGVyKHNlbGVjdElkLCBzb3J0KSB7XHJcbiAgICB2YXIgX2MgPSBjcmVhdGVVbnNvcnRlZFN0YXRlQWRhcHRlcihzZWxlY3RJZCksIHJlbW92ZU9uZSA9IF9jLnJlbW92ZU9uZSwgcmVtb3ZlTWFueSA9IF9jLnJlbW92ZU1hbnksIHJlbW92ZUFsbCA9IF9jLnJlbW92ZUFsbDtcclxuICAgIGZ1bmN0aW9uIGFkZE9uZU11dGFibHkoZW50aXR5LCBzdGF0ZSkge1xyXG4gICAgICAgIHJldHVybiBhZGRNYW55TXV0YWJseShbZW50aXR5XSwgc3RhdGUpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gYWRkTWFueU11dGFibHkobmV3RW50aXRpZXMsIHN0YXRlKSB7XHJcbiAgICAgICAgbmV3RW50aXRpZXMgPSBlbnN1cmVFbnRpdGllc0FycmF5KG5ld0VudGl0aWVzKTtcclxuICAgICAgICB2YXIgbW9kZWxzID0gbmV3RW50aXRpZXMuZmlsdGVyKGZ1bmN0aW9uIChtb2RlbCkgeyByZXR1cm4gIShzZWxlY3RJZFZhbHVlKG1vZGVsLCBzZWxlY3RJZCkgaW4gc3RhdGUuZW50aXRpZXMpOyB9KTtcclxuICAgICAgICBpZiAobW9kZWxzLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgICAgICBtZXJnZShtb2RlbHMsIHN0YXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBzZXRPbmVNdXRhYmx5KGVudGl0eSwgc3RhdGUpIHtcclxuICAgICAgICByZXR1cm4gc2V0TWFueU11dGFibHkoW2VudGl0eV0sIHN0YXRlKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHNldE1hbnlNdXRhYmx5KG5ld0VudGl0aWVzLCBzdGF0ZSkge1xyXG4gICAgICAgIG5ld0VudGl0aWVzID0gZW5zdXJlRW50aXRpZXNBcnJheShuZXdFbnRpdGllcyk7XHJcbiAgICAgICAgaWYgKG5ld0VudGl0aWVzLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgICAgICBtZXJnZShuZXdFbnRpdGllcywgc3RhdGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHNldEFsbE11dGFibHkobmV3RW50aXRpZXMsIHN0YXRlKSB7XHJcbiAgICAgICAgbmV3RW50aXRpZXMgPSBlbnN1cmVFbnRpdGllc0FycmF5KG5ld0VudGl0aWVzKTtcclxuICAgICAgICBzdGF0ZS5lbnRpdGllcyA9IHt9O1xyXG4gICAgICAgIHN0YXRlLmlkcyA9IFtdO1xyXG4gICAgICAgIGFkZE1hbnlNdXRhYmx5KG5ld0VudGl0aWVzLCBzdGF0ZSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiB1cGRhdGVPbmVNdXRhYmx5KHVwZGF0ZSwgc3RhdGUpIHtcclxuICAgICAgICByZXR1cm4gdXBkYXRlTWFueU11dGFibHkoW3VwZGF0ZV0sIHN0YXRlKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZU1hbnlNdXRhYmx5KHVwZGF0ZXMsIHN0YXRlKSB7XHJcbiAgICAgICAgdmFyIGFwcGxpZWRVcGRhdGVzID0gZmFsc2U7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCB1cGRhdGVzXzEgPSB1cGRhdGVzOyBfaSA8IHVwZGF0ZXNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIHVwZGF0ZSA9IHVwZGF0ZXNfMVtfaV07XHJcbiAgICAgICAgICAgIHZhciBlbnRpdHkgPSBzdGF0ZS5lbnRpdGllc1t1cGRhdGUuaWRdO1xyXG4gICAgICAgICAgICBpZiAoIWVudGl0eSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXBwbGllZFVwZGF0ZXMgPSB0cnVlO1xyXG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGVudGl0eSwgdXBkYXRlLmNoYW5nZXMpO1xyXG4gICAgICAgICAgICB2YXIgbmV3SWQgPSBzZWxlY3RJZChlbnRpdHkpO1xyXG4gICAgICAgICAgICBpZiAodXBkYXRlLmlkICE9PSBuZXdJZCkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHN0YXRlLmVudGl0aWVzW3VwZGF0ZS5pZF07XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5lbnRpdGllc1tuZXdJZF0gPSBlbnRpdHk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFwcGxpZWRVcGRhdGVzKSB7XHJcbiAgICAgICAgICAgIHJlc29ydEVudGl0aWVzKHN0YXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiB1cHNlcnRPbmVNdXRhYmx5KGVudGl0eSwgc3RhdGUpIHtcclxuICAgICAgICByZXR1cm4gdXBzZXJ0TWFueU11dGFibHkoW2VudGl0eV0sIHN0YXRlKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHVwc2VydE1hbnlNdXRhYmx5KG5ld0VudGl0aWVzLCBzdGF0ZSkge1xyXG4gICAgICAgIHZhciBfYyA9IHNwbGl0QWRkZWRVcGRhdGVkRW50aXRpZXMobmV3RW50aXRpZXMsIHNlbGVjdElkLCBzdGF0ZSksIGFkZGVkID0gX2NbMF0sIHVwZGF0ZWQgPSBfY1sxXTtcclxuICAgICAgICB1cGRhdGVNYW55TXV0YWJseSh1cGRhdGVkLCBzdGF0ZSk7XHJcbiAgICAgICAgYWRkTWFueU11dGFibHkoYWRkZWQsIHN0YXRlKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGFyZUFycmF5c0VxdWFsKGEsIGIpIHtcclxuICAgICAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aCAmJiBpIDwgYi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoYVtpXSA9PT0gYltpXSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIG1lcmdlKG1vZGVscywgc3RhdGUpIHtcclxuICAgICAgICBtb2RlbHMuZm9yRWFjaChmdW5jdGlvbiAobW9kZWwpIHtcclxuICAgICAgICAgICAgc3RhdGUuZW50aXRpZXNbc2VsZWN0SWQobW9kZWwpXSA9IG1vZGVsO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJlc29ydEVudGl0aWVzKHN0YXRlKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlc29ydEVudGl0aWVzKHN0YXRlKSB7XHJcbiAgICAgICAgdmFyIGFsbEVudGl0aWVzID0gT2JqZWN0LnZhbHVlcyhzdGF0ZS5lbnRpdGllcyk7XHJcbiAgICAgICAgYWxsRW50aXRpZXMuc29ydChzb3J0KTtcclxuICAgICAgICB2YXIgbmV3U29ydGVkSWRzID0gYWxsRW50aXRpZXMubWFwKHNlbGVjdElkKTtcclxuICAgICAgICB2YXIgaWRzID0gc3RhdGUuaWRzO1xyXG4gICAgICAgIGlmICghYXJlQXJyYXlzRXF1YWwoaWRzLCBuZXdTb3J0ZWRJZHMpKSB7XHJcbiAgICAgICAgICAgIHN0YXRlLmlkcyA9IG5ld1NvcnRlZElkcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlbW92ZU9uZTogcmVtb3ZlT25lLFxyXG4gICAgICAgIHJlbW92ZU1hbnk6IHJlbW92ZU1hbnksXHJcbiAgICAgICAgcmVtb3ZlQWxsOiByZW1vdmVBbGwsXHJcbiAgICAgICAgYWRkT25lOiBjcmVhdGVTdGF0ZU9wZXJhdG9yKGFkZE9uZU11dGFibHkpLFxyXG4gICAgICAgIHVwZGF0ZU9uZTogY3JlYXRlU3RhdGVPcGVyYXRvcih1cGRhdGVPbmVNdXRhYmx5KSxcclxuICAgICAgICB1cHNlcnRPbmU6IGNyZWF0ZVN0YXRlT3BlcmF0b3IodXBzZXJ0T25lTXV0YWJseSksXHJcbiAgICAgICAgc2V0T25lOiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHNldE9uZU11dGFibHkpLFxyXG4gICAgICAgIHNldE1hbnk6IGNyZWF0ZVN0YXRlT3BlcmF0b3Ioc2V0TWFueU11dGFibHkpLFxyXG4gICAgICAgIHNldEFsbDogY3JlYXRlU3RhdGVPcGVyYXRvcihzZXRBbGxNdXRhYmx5KSxcclxuICAgICAgICBhZGRNYW55OiBjcmVhdGVTdGF0ZU9wZXJhdG9yKGFkZE1hbnlNdXRhYmx5KSxcclxuICAgICAgICB1cGRhdGVNYW55OiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHVwZGF0ZU1hbnlNdXRhYmx5KSxcclxuICAgICAgICB1cHNlcnRNYW55OiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHVwc2VydE1hbnlNdXRhYmx5KVxyXG4gICAgfTtcclxufVxyXG4vLyBzcmMvZW50aXRpZXMvY3JlYXRlX2FkYXB0ZXIudHNcclxuZnVuY3Rpb24gY3JlYXRlRW50aXR5QWRhcHRlcihvcHRpb25zKSB7XHJcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxyXG4gICAgdmFyIF9jID0gX19zcHJlYWRWYWx1ZXMoe1xyXG4gICAgICAgIHNvcnRDb21wYXJlcjogZmFsc2UsXHJcbiAgICAgICAgc2VsZWN0SWQ6IGZ1bmN0aW9uIChpbnN0YW5jZSkgeyByZXR1cm4gaW5zdGFuY2UuaWQ7IH1cclxuICAgIH0sIG9wdGlvbnMpLCBzZWxlY3RJZCA9IF9jLnNlbGVjdElkLCBzb3J0Q29tcGFyZXIgPSBfYy5zb3J0Q29tcGFyZXI7XHJcbiAgICB2YXIgc3RhdGVGYWN0b3J5ID0gY3JlYXRlSW5pdGlhbFN0YXRlRmFjdG9yeSgpO1xyXG4gICAgdmFyIHNlbGVjdG9yc0ZhY3RvcnkgPSBjcmVhdGVTZWxlY3RvcnNGYWN0b3J5KCk7XHJcbiAgICB2YXIgc3RhdGVBZGFwdGVyID0gc29ydENvbXBhcmVyID8gY3JlYXRlU29ydGVkU3RhdGVBZGFwdGVyKHNlbGVjdElkLCBzb3J0Q29tcGFyZXIpIDogY3JlYXRlVW5zb3J0ZWRTdGF0ZUFkYXB0ZXIoc2VsZWN0SWQpO1xyXG4gICAgcmV0dXJuIF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHtcclxuICAgICAgICBzZWxlY3RJZDogc2VsZWN0SWQsXHJcbiAgICAgICAgc29ydENvbXBhcmVyOiBzb3J0Q29tcGFyZXJcclxuICAgIH0sIHN0YXRlRmFjdG9yeSksIHNlbGVjdG9yc0ZhY3RvcnkpLCBzdGF0ZUFkYXB0ZXIpO1xyXG59XHJcbi8vIHNyYy9uYW5vaWQudHNcclxudmFyIHVybEFscGhhYmV0ID0gXCJNb2R1bGVTeW1iaGFzT3duUHItMDEyMzQ1Njc4OUFCQ0RFRkdITlJWZmdjdGlVdnpfS3FZVEprTHhwWlhJalFXXCI7XHJcbnZhciBuYW5vaWQgPSBmdW5jdGlvbiAoc2l6ZSkge1xyXG4gICAgaWYgKHNpemUgPT09IHZvaWQgMCkgeyBzaXplID0gMjE7IH1cclxuICAgIHZhciBpZCA9IFwiXCI7XHJcbiAgICB2YXIgaSA9IHNpemU7XHJcbiAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgaWQgKz0gdXJsQWxwaGFiZXRbTWF0aC5yYW5kb20oKSAqIDY0IHwgMF07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaWQ7XHJcbn07XHJcbi8vIHNyYy9jcmVhdGVBc3luY1RodW5rLnRzXHJcbnZhciBjb21tb25Qcm9wZXJ0aWVzID0gW1xyXG4gICAgXCJuYW1lXCIsXHJcbiAgICBcIm1lc3NhZ2VcIixcclxuICAgIFwic3RhY2tcIixcclxuICAgIFwiY29kZVwiXHJcbl07XHJcbnZhciBSZWplY3RXaXRoVmFsdWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBSZWplY3RXaXRoVmFsdWUocGF5bG9hZCwgbWV0YSkge1xyXG4gICAgICAgIHRoaXMucGF5bG9hZCA9IHBheWxvYWQ7XHJcbiAgICAgICAgdGhpcy5tZXRhID0gbWV0YTtcclxuICAgIH1cclxuICAgIHJldHVybiBSZWplY3RXaXRoVmFsdWU7XHJcbn0oKSk7XHJcbnZhciBGdWxmaWxsV2l0aE1ldGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGdWxmaWxsV2l0aE1ldGEocGF5bG9hZCwgbWV0YSkge1xyXG4gICAgICAgIHRoaXMucGF5bG9hZCA9IHBheWxvYWQ7XHJcbiAgICAgICAgdGhpcy5tZXRhID0gbWV0YTtcclxuICAgIH1cclxuICAgIHJldHVybiBGdWxmaWxsV2l0aE1ldGE7XHJcbn0oKSk7XHJcbnZhciBtaW5pU2VyaWFsaXplRXJyb3IgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgIT09IG51bGwpIHtcclxuICAgICAgICB2YXIgc2ltcGxlRXJyb3IgPSB7fTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNvbW1vblByb3BlcnRpZXNfMSA9IGNvbW1vblByb3BlcnRpZXM7IF9pIDwgY29tbW9uUHJvcGVydGllc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgcHJvcGVydHkgPSBjb21tb25Qcm9wZXJ0aWVzXzFbX2ldO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlW3Byb3BlcnR5XSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgc2ltcGxlRXJyb3JbcHJvcGVydHldID0gdmFsdWVbcHJvcGVydHldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzaW1wbGVFcnJvcjtcclxuICAgIH1cclxuICAgIHJldHVybiB7IG1lc3NhZ2U6IFN0cmluZyh2YWx1ZSkgfTtcclxufTtcclxudmFyIGNyZWF0ZUFzeW5jVGh1bmsgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gY3JlYXRlQXN5bmNUaHVuazIodHlwZVByZWZpeCwgcGF5bG9hZENyZWF0b3IsIG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgZnVsZmlsbGVkID0gY3JlYXRlQWN0aW9uKHR5cGVQcmVmaXggKyBcIi9mdWxmaWxsZWRcIiwgZnVuY3Rpb24gKHBheWxvYWQsIHJlcXVlc3RJZCwgYXJnLCBtZXRhKSB7IHJldHVybiAoe1xyXG4gICAgICAgICAgICBwYXlsb2FkOiBwYXlsb2FkLFxyXG4gICAgICAgICAgICBtZXRhOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBtZXRhIHx8IHt9KSwge1xyXG4gICAgICAgICAgICAgICAgYXJnOiBhcmcsXHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0SWQ6IHJlcXVlc3RJZCxcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RTdGF0dXM6IFwiZnVsZmlsbGVkXCJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTsgfSk7XHJcbiAgICAgICAgdmFyIHBlbmRpbmcgPSBjcmVhdGVBY3Rpb24odHlwZVByZWZpeCArIFwiL3BlbmRpbmdcIiwgZnVuY3Rpb24gKHJlcXVlc3RJZCwgYXJnLCBtZXRhKSB7IHJldHVybiAoe1xyXG4gICAgICAgICAgICBwYXlsb2FkOiB2b2lkIDAsXHJcbiAgICAgICAgICAgIG1ldGE6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIG1ldGEgfHwge30pLCB7XHJcbiAgICAgICAgICAgICAgICBhcmc6IGFyZyxcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RJZDogcmVxdWVzdElkLFxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdFN0YXR1czogXCJwZW5kaW5nXCJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTsgfSk7XHJcbiAgICAgICAgdmFyIHJlamVjdGVkID0gY3JlYXRlQWN0aW9uKHR5cGVQcmVmaXggKyBcIi9yZWplY3RlZFwiLCBmdW5jdGlvbiAoZXJyb3IsIHJlcXVlc3RJZCwgYXJnLCBwYXlsb2FkLCBtZXRhKSB7IHJldHVybiAoe1xyXG4gICAgICAgICAgICBwYXlsb2FkOiBwYXlsb2FkLFxyXG4gICAgICAgICAgICBlcnJvcjogKG9wdGlvbnMgJiYgb3B0aW9ucy5zZXJpYWxpemVFcnJvciB8fCBtaW5pU2VyaWFsaXplRXJyb3IpKGVycm9yIHx8IFwiUmVqZWN0ZWRcIiksXHJcbiAgICAgICAgICAgIG1ldGE6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIG1ldGEgfHwge30pLCB7XHJcbiAgICAgICAgICAgICAgICBhcmc6IGFyZyxcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RJZDogcmVxdWVzdElkLFxyXG4gICAgICAgICAgICAgICAgcmVqZWN0ZWRXaXRoVmFsdWU6ICEhcGF5bG9hZCxcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RTdGF0dXM6IFwicmVqZWN0ZWRcIixcclxuICAgICAgICAgICAgICAgIGFib3J0ZWQ6IChlcnJvciA9PSBudWxsID8gdm9pZCAwIDogZXJyb3IubmFtZSkgPT09IFwiQWJvcnRFcnJvclwiLFxyXG4gICAgICAgICAgICAgICAgY29uZGl0aW9uOiAoZXJyb3IgPT0gbnVsbCA/IHZvaWQgMCA6IGVycm9yLm5hbWUpID09PSBcIkNvbmRpdGlvbkVycm9yXCJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTsgfSk7XHJcbiAgICAgICAgdmFyIGRpc3BsYXllZFdhcm5pbmcgPSBmYWxzZTtcclxuICAgICAgICB2YXIgQUMgPSB0eXBlb2YgQWJvcnRDb250cm9sbGVyICE9PSBcInVuZGVmaW5lZFwiID8gQWJvcnRDb250cm9sbGVyIDogLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBjbGFzc18xKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaWduYWwgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWJvcnRlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2hFdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBvbmFib3J0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICByZWFzb246IHZvaWQgMCxcclxuICAgICAgICAgICAgICAgICAgICB0aHJvd0lmQWJvcnRlZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUuYWJvcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkaXNwbGF5ZWRXYXJuaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXllZFdhcm5pbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oXCJUaGlzIHBsYXRmb3JtIGRvZXMgbm90IGltcGxlbWVudCBBYm9ydENvbnRyb2xsZXIuIFxcbklmIHlvdSB3YW50IHRvIHVzZSB0aGUgQWJvcnRDb250cm9sbGVyIHRvIHJlYWN0IHRvIGBhYm9ydGAgZXZlbnRzLCBwbGVhc2UgY29uc2lkZXIgaW1wb3J0aW5nIGEgcG9seWZpbGwgbGlrZSAnYWJvcnRjb250cm9sbGVyLXBvbHlmaWxsL2Rpc3QvYWJvcnRjb250cm9sbGVyLXBvbHlmaWxsLW9ubHknLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiBjbGFzc18xO1xyXG4gICAgICAgIH0oKSk7XHJcbiAgICAgICAgZnVuY3Rpb24gYWN0aW9uQ3JlYXRvcihhcmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkaXNwYXRjaCwgZ2V0U3RhdGUsIGV4dHJhKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdElkID0gKG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuaWRHZW5lcmF0b3IpID8gb3B0aW9ucy5pZEdlbmVyYXRvcihhcmcpIDogbmFub2lkKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYWJvcnRDb250cm9sbGVyID0gbmV3IEFDKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYWJvcnRSZWFzb247XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gYWJvcnQocmVhc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWJvcnRSZWFzb24gPSByZWFzb247XHJcbiAgICAgICAgICAgICAgICAgICAgYWJvcnRDb250cm9sbGVyLmFib3J0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZTIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2EsIF9iLCBmaW5hbEFjdGlvbiwgY29uZGl0aW9uUmVzdWx0LCBhYm9ydGVkUHJvbWlzZSwgZXJyXzEsIHNraXBEaXNwYXRjaDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MudHJ5cy5wdXNoKFswLCA0LCAsIDVdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uUmVzdWx0ID0gKF9hID0gb3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5jb25kaXRpb24pID09IG51bGwgPyB2b2lkIDAgOiBfYS5jYWxsKG9wdGlvbnMsIGFyZywgeyBnZXRTdGF0ZTogZ2V0U3RhdGUsIGV4dHJhOiBleHRyYSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1RoZW5hYmxlKGNvbmRpdGlvblJlc3VsdCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBjb25kaXRpb25SZXN1bHRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uUmVzdWx0ID0gX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYy5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29uZGl0aW9uUmVzdWx0ID09PSBmYWxzZSB8fCBhYm9ydENvbnRyb2xsZXIuc2lnbmFsLmFib3J0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkNvbmRpdGlvbkVycm9yXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJBYm9ydGVkIGR1ZSB0byBjb25kaXRpb24gY2FsbGJhY2sgcmV0dXJuaW5nIGZhbHNlLlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYm9ydGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChfLCByZWplY3QpIHsgcmV0dXJuIGFib3J0Q29udHJvbGxlci5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlamVjdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkFib3J0RXJyb3JcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGFib3J0UmVhc29uIHx8IFwiQWJvcnRlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyB9KTsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKHBlbmRpbmcocmVxdWVzdElkLCBhcmcsIChfYiA9IG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuZ2V0UGVuZGluZ01ldGEpID09IG51bGwgPyB2b2lkIDAgOiBfYi5jYWxsKG9wdGlvbnMsIHsgcmVxdWVzdElkOiByZXF1ZXN0SWQsIGFyZzogYXJnIH0sIHsgZ2V0U3RhdGU6IGdldFN0YXRlLCBleHRyYTogZXh0cmEgfSkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgUHJvbWlzZS5yYWNlKFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYm9ydGVkUHJvbWlzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQcm9taXNlLnJlc29sdmUocGF5bG9hZENyZWF0b3IoYXJnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoOiBkaXNwYXRjaCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0U3RhdGU6IGdldFN0YXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYTogZXh0cmEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RJZDogcmVxdWVzdElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduYWw6IGFib3J0Q29udHJvbGxlci5zaWduYWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0OiBhYm9ydCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0V2l0aFZhbHVlOiBmdW5jdGlvbiAodmFsdWUsIG1ldGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVqZWN0V2l0aFZhbHVlKHZhbHVlLCBtZXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsZmlsbFdpdGhWYWx1ZTogZnVuY3Rpb24gKHZhbHVlLCBtZXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZ1bGZpbGxXaXRoTWV0YSh2YWx1ZSwgbWV0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBSZWplY3RXaXRoVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgRnVsZmlsbFdpdGhNZXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVsZmlsbGVkKHJlc3VsdC5wYXlsb2FkLCByZXF1ZXN0SWQsIGFyZywgcmVzdWx0Lm1ldGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdWxmaWxsZWQocmVzdWx0LCByZXF1ZXN0SWQsIGFyZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsQWN0aW9uID0gX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA1XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycl8xID0gX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbEFjdGlvbiA9IGVycl8xIGluc3RhbmNlb2YgUmVqZWN0V2l0aFZhbHVlID8gcmVqZWN0ZWQobnVsbCwgcmVxdWVzdElkLCBhcmcsIGVycl8xLnBheWxvYWQsIGVycl8xLm1ldGEpIDogcmVqZWN0ZWQoZXJyXzEsIHJlcXVlc3RJZCwgYXJnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBza2lwRGlzcGF0Y2ggPSBvcHRpb25zICYmICFvcHRpb25zLmRpc3BhdGNoQ29uZGl0aW9uUmVqZWN0aW9uICYmIHJlamVjdGVkLm1hdGNoKGZpbmFsQWN0aW9uKSAmJiBmaW5hbEFjdGlvbi5tZXRhLmNvbmRpdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFza2lwRGlzcGF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKGZpbmFsQWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgZmluYWxBY3Rpb25dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0oKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHByb21pc2UyLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWJvcnQ6IGFib3J0LFxyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RJZDogcmVxdWVzdElkLFxyXG4gICAgICAgICAgICAgICAgICAgIGFyZzogYXJnLFxyXG4gICAgICAgICAgICAgICAgICAgIHVud3JhcDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZTIudGhlbih1bndyYXBSZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihhY3Rpb25DcmVhdG9yLCB7XHJcbiAgICAgICAgICAgIHBlbmRpbmc6IHBlbmRpbmcsXHJcbiAgICAgICAgICAgIHJlamVjdGVkOiByZWplY3RlZCxcclxuICAgICAgICAgICAgZnVsZmlsbGVkOiBmdWxmaWxsZWQsXHJcbiAgICAgICAgICAgIHR5cGVQcmVmaXg6IHR5cGVQcmVmaXhcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNyZWF0ZUFzeW5jVGh1bmsyLndpdGhUeXBlcyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNyZWF0ZUFzeW5jVGh1bmsyOyB9O1xyXG4gICAgcmV0dXJuIGNyZWF0ZUFzeW5jVGh1bmsyO1xyXG59KSgpO1xyXG5mdW5jdGlvbiB1bndyYXBSZXN1bHQoYWN0aW9uKSB7XHJcbiAgICBpZiAoYWN0aW9uLm1ldGEgJiYgYWN0aW9uLm1ldGEucmVqZWN0ZWRXaXRoVmFsdWUpIHtcclxuICAgICAgICB0aHJvdyBhY3Rpb24ucGF5bG9hZDtcclxuICAgIH1cclxuICAgIGlmIChhY3Rpb24uZXJyb3IpIHtcclxuICAgICAgICB0aHJvdyBhY3Rpb24uZXJyb3I7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYWN0aW9uLnBheWxvYWQ7XHJcbn1cclxuZnVuY3Rpb24gaXNUaGVuYWJsZSh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gXCJmdW5jdGlvblwiO1xyXG59XHJcbi8vIHNyYy9tYXRjaGVycy50c1xyXG52YXIgbWF0Y2hlcyA9IGZ1bmN0aW9uIChtYXRjaGVyLCBhY3Rpb24pIHtcclxuICAgIGlmIChoYXNNYXRjaEZ1bmN0aW9uKG1hdGNoZXIpKSB7XHJcbiAgICAgICAgcmV0dXJuIG1hdGNoZXIubWF0Y2goYWN0aW9uKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBtYXRjaGVyKGFjdGlvbik7XHJcbiAgICB9XHJcbn07XHJcbmZ1bmN0aW9uIGlzQW55T2YoKSB7XHJcbiAgICB2YXIgbWF0Y2hlcnMgPSBbXTtcclxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgbWF0Y2hlcnNbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgIH1cclxuICAgIHJldHVybiBmdW5jdGlvbiAoYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIG1hdGNoZXJzLnNvbWUoZnVuY3Rpb24gKG1hdGNoZXIpIHsgcmV0dXJuIG1hdGNoZXMobWF0Y2hlciwgYWN0aW9uKTsgfSk7XHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGlzQWxsT2YoKSB7XHJcbiAgICB2YXIgbWF0Y2hlcnMgPSBbXTtcclxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgbWF0Y2hlcnNbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgIH1cclxuICAgIHJldHVybiBmdW5jdGlvbiAoYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIG1hdGNoZXJzLmV2ZXJ5KGZ1bmN0aW9uIChtYXRjaGVyKSB7IHJldHVybiBtYXRjaGVzKG1hdGNoZXIsIGFjdGlvbik7IH0pO1xyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBoYXNFeHBlY3RlZFJlcXVlc3RNZXRhZGF0YShhY3Rpb24sIHZhbGlkU3RhdHVzKSB7XHJcbiAgICBpZiAoIWFjdGlvbiB8fCAhYWN0aW9uLm1ldGEpXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgdmFyIGhhc1ZhbGlkUmVxdWVzdElkID0gdHlwZW9mIGFjdGlvbi5tZXRhLnJlcXVlc3RJZCA9PT0gXCJzdHJpbmdcIjtcclxuICAgIHZhciBoYXNWYWxpZFJlcXVlc3RTdGF0dXMgPSB2YWxpZFN0YXR1cy5pbmRleE9mKGFjdGlvbi5tZXRhLnJlcXVlc3RTdGF0dXMpID4gLTE7XHJcbiAgICByZXR1cm4gaGFzVmFsaWRSZXF1ZXN0SWQgJiYgaGFzVmFsaWRSZXF1ZXN0U3RhdHVzO1xyXG59XHJcbmZ1bmN0aW9uIGlzQXN5bmNUaHVua0FycmF5KGEpIHtcclxuICAgIHJldHVybiB0eXBlb2YgYVswXSA9PT0gXCJmdW5jdGlvblwiICYmIFwicGVuZGluZ1wiIGluIGFbMF0gJiYgXCJmdWxmaWxsZWRcIiBpbiBhWzBdICYmIFwicmVqZWN0ZWRcIiBpbiBhWzBdO1xyXG59XHJcbmZ1bmN0aW9uIGlzUGVuZGluZygpIHtcclxuICAgIHZhciBhc3luY1RodW5rcyA9IFtdO1xyXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICBhc3luY1RodW5rc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgfVxyXG4gICAgaWYgKGFzeW5jVGh1bmtzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYWN0aW9uKSB7IHJldHVybiBoYXNFeHBlY3RlZFJlcXVlc3RNZXRhZGF0YShhY3Rpb24sIFtcInBlbmRpbmdcIl0pOyB9O1xyXG4gICAgfVxyXG4gICAgaWYgKCFpc0FzeW5jVGh1bmtBcnJheShhc3luY1RodW5rcykpIHtcclxuICAgICAgICByZXR1cm4gaXNQZW5kaW5nKCkoYXN5bmNUaHVua3NbMF0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhY3Rpb24pIHtcclxuICAgICAgICB2YXIgbWF0Y2hlcnMgPSBhc3luY1RodW5rcy5tYXAoZnVuY3Rpb24gKGFzeW5jVGh1bmspIHsgcmV0dXJuIGFzeW5jVGh1bmsucGVuZGluZzsgfSk7XHJcbiAgICAgICAgdmFyIGNvbWJpbmVkTWF0Y2hlciA9IGlzQW55T2YuYXBwbHkodm9pZCAwLCBtYXRjaGVycyk7XHJcbiAgICAgICAgcmV0dXJuIGNvbWJpbmVkTWF0Y2hlcihhY3Rpb24pO1xyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBpc1JlamVjdGVkKCkge1xyXG4gICAgdmFyIGFzeW5jVGh1bmtzID0gW107XHJcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIGFzeW5jVGh1bmtzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICB9XHJcbiAgICBpZiAoYXN5bmNUaHVua3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhY3Rpb24pIHsgcmV0dXJuIGhhc0V4cGVjdGVkUmVxdWVzdE1ldGFkYXRhKGFjdGlvbiwgW1wicmVqZWN0ZWRcIl0pOyB9O1xyXG4gICAgfVxyXG4gICAgaWYgKCFpc0FzeW5jVGh1bmtBcnJheShhc3luY1RodW5rcykpIHtcclxuICAgICAgICByZXR1cm4gaXNSZWplY3RlZCgpKGFzeW5jVGh1bmtzWzBdKTtcclxuICAgIH1cclxuICAgIHJldHVybiBmdW5jdGlvbiAoYWN0aW9uKSB7XHJcbiAgICAgICAgdmFyIG1hdGNoZXJzID0gYXN5bmNUaHVua3MubWFwKGZ1bmN0aW9uIChhc3luY1RodW5rKSB7IHJldHVybiBhc3luY1RodW5rLnJlamVjdGVkOyB9KTtcclxuICAgICAgICB2YXIgY29tYmluZWRNYXRjaGVyID0gaXNBbnlPZi5hcHBseSh2b2lkIDAsIG1hdGNoZXJzKTtcclxuICAgICAgICByZXR1cm4gY29tYmluZWRNYXRjaGVyKGFjdGlvbik7XHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGlzUmVqZWN0ZWRXaXRoVmFsdWUoKSB7XHJcbiAgICB2YXIgYXN5bmNUaHVua3MgPSBbXTtcclxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgYXN5bmNUaHVua3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgIH1cclxuICAgIHZhciBoYXNGbGFnID0gZnVuY3Rpb24gKGFjdGlvbikge1xyXG4gICAgICAgIHJldHVybiBhY3Rpb24gJiYgYWN0aW9uLm1ldGEgJiYgYWN0aW9uLm1ldGEucmVqZWN0ZWRXaXRoVmFsdWU7XHJcbiAgICB9O1xyXG4gICAgaWYgKGFzeW5jVGh1bmtzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBjb21iaW5lZE1hdGNoZXIgPSBpc0FsbE9mKGlzUmVqZWN0ZWQuYXBwbHkodm9pZCAwLCBhc3luY1RodW5rcyksIGhhc0ZsYWcpO1xyXG4gICAgICAgICAgICByZXR1cm4gY29tYmluZWRNYXRjaGVyKGFjdGlvbik7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGlmICghaXNBc3luY1RodW5rQXJyYXkoYXN5bmNUaHVua3MpKSB7XHJcbiAgICAgICAgcmV0dXJuIGlzUmVqZWN0ZWRXaXRoVmFsdWUoKShhc3luY1RodW5rc1swXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikge1xyXG4gICAgICAgIHZhciBjb21iaW5lZE1hdGNoZXIgPSBpc0FsbE9mKGlzUmVqZWN0ZWQuYXBwbHkodm9pZCAwLCBhc3luY1RodW5rcyksIGhhc0ZsYWcpO1xyXG4gICAgICAgIHJldHVybiBjb21iaW5lZE1hdGNoZXIoYWN0aW9uKTtcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gaXNGdWxmaWxsZWQoKSB7XHJcbiAgICB2YXIgYXN5bmNUaHVua3MgPSBbXTtcclxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgYXN5bmNUaHVua3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgIH1cclxuICAgIGlmIChhc3luY1RodW5rcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikgeyByZXR1cm4gaGFzRXhwZWN0ZWRSZXF1ZXN0TWV0YWRhdGEoYWN0aW9uLCBbXCJmdWxmaWxsZWRcIl0pOyB9O1xyXG4gICAgfVxyXG4gICAgaWYgKCFpc0FzeW5jVGh1bmtBcnJheShhc3luY1RodW5rcykpIHtcclxuICAgICAgICByZXR1cm4gaXNGdWxmaWxsZWQoKShhc3luY1RodW5rc1swXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikge1xyXG4gICAgICAgIHZhciBtYXRjaGVycyA9IGFzeW5jVGh1bmtzLm1hcChmdW5jdGlvbiAoYXN5bmNUaHVuaykgeyByZXR1cm4gYXN5bmNUaHVuay5mdWxmaWxsZWQ7IH0pO1xyXG4gICAgICAgIHZhciBjb21iaW5lZE1hdGNoZXIgPSBpc0FueU9mLmFwcGx5KHZvaWQgMCwgbWF0Y2hlcnMpO1xyXG4gICAgICAgIHJldHVybiBjb21iaW5lZE1hdGNoZXIoYWN0aW9uKTtcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gaXNBc3luY1RodW5rQWN0aW9uKCkge1xyXG4gICAgdmFyIGFzeW5jVGh1bmtzID0gW107XHJcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIGFzeW5jVGh1bmtzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICB9XHJcbiAgICBpZiAoYXN5bmNUaHVua3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhY3Rpb24pIHsgcmV0dXJuIGhhc0V4cGVjdGVkUmVxdWVzdE1ldGFkYXRhKGFjdGlvbiwgW1wicGVuZGluZ1wiLCBcImZ1bGZpbGxlZFwiLCBcInJlamVjdGVkXCJdKTsgfTtcclxuICAgIH1cclxuICAgIGlmICghaXNBc3luY1RodW5rQXJyYXkoYXN5bmNUaHVua3MpKSB7XHJcbiAgICAgICAgcmV0dXJuIGlzQXN5bmNUaHVua0FjdGlvbigpKGFzeW5jVGh1bmtzWzBdKTtcclxuICAgIH1cclxuICAgIHJldHVybiBmdW5jdGlvbiAoYWN0aW9uKSB7XHJcbiAgICAgICAgdmFyIG1hdGNoZXJzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBhc3luY1RodW5rc18xID0gYXN5bmNUaHVua3M7IF9pIDwgYXN5bmNUaHVua3NfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGFzeW5jVGh1bmsgPSBhc3luY1RodW5rc18xW19pXTtcclxuICAgICAgICAgICAgbWF0Y2hlcnMucHVzaChhc3luY1RodW5rLnBlbmRpbmcsIGFzeW5jVGh1bmsucmVqZWN0ZWQsIGFzeW5jVGh1bmsuZnVsZmlsbGVkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGNvbWJpbmVkTWF0Y2hlciA9IGlzQW55T2YuYXBwbHkodm9pZCAwLCBtYXRjaGVycyk7XHJcbiAgICAgICAgcmV0dXJuIGNvbWJpbmVkTWF0Y2hlcihhY3Rpb24pO1xyXG4gICAgfTtcclxufVxyXG4vLyBzcmMvbGlzdGVuZXJNaWRkbGV3YXJlL3V0aWxzLnRzXHJcbnZhciBhc3NlcnRGdW5jdGlvbiA9IGZ1bmN0aW9uIChmdW5jLCBleHBlY3RlZCkge1xyXG4gICAgaWYgKHR5cGVvZiBmdW5jICE9PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGV4cGVjdGVkICsgXCIgaXMgbm90IGEgZnVuY3Rpb25cIik7XHJcbiAgICB9XHJcbn07XHJcbnZhciBub29wID0gZnVuY3Rpb24gKCkge1xyXG59O1xyXG52YXIgY2F0Y2hSZWplY3Rpb24gPSBmdW5jdGlvbiAocHJvbWlzZTIsIG9uRXJyb3IpIHtcclxuICAgIGlmIChvbkVycm9yID09PSB2b2lkIDApIHsgb25FcnJvciA9IG5vb3A7IH1cclxuICAgIHByb21pc2UyLmNhdGNoKG9uRXJyb3IpO1xyXG4gICAgcmV0dXJuIHByb21pc2UyO1xyXG59O1xyXG52YXIgYWRkQWJvcnRTaWduYWxMaXN0ZW5lciA9IGZ1bmN0aW9uIChhYm9ydFNpZ25hbCwgY2FsbGJhY2spIHtcclxuICAgIGFib3J0U2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBjYWxsYmFjaywgeyBvbmNlOiB0cnVlIH0pO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGFib3J0U2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBjYWxsYmFjayk7IH07XHJcbn07XHJcbnZhciBhYm9ydENvbnRyb2xsZXJXaXRoUmVhc29uID0gZnVuY3Rpb24gKGFib3J0Q29udHJvbGxlciwgcmVhc29uKSB7XHJcbiAgICB2YXIgc2lnbmFsID0gYWJvcnRDb250cm9sbGVyLnNpZ25hbDtcclxuICAgIGlmIChzaWduYWwuYWJvcnRlZCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICghKFwicmVhc29uXCIgaW4gc2lnbmFsKSkge1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzaWduYWwsIFwicmVhc29uXCIsIHtcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgdmFsdWU6IHJlYXNvbixcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgO1xyXG4gICAgYWJvcnRDb250cm9sbGVyLmFib3J0KHJlYXNvbik7XHJcbn07XHJcbi8vIHNyYy9saXN0ZW5lck1pZGRsZXdhcmUvZXhjZXB0aW9ucy50c1xyXG52YXIgdGFzayA9IFwidGFza1wiO1xyXG52YXIgbGlzdGVuZXIgPSBcImxpc3RlbmVyXCI7XHJcbnZhciBjb21wbGV0ZWQgPSBcImNvbXBsZXRlZFwiO1xyXG52YXIgY2FuY2VsbGVkID0gXCJjYW5jZWxsZWRcIjtcclxudmFyIHRhc2tDYW5jZWxsZWQgPSBcInRhc2stXCIgKyBjYW5jZWxsZWQ7XHJcbnZhciB0YXNrQ29tcGxldGVkID0gXCJ0YXNrLVwiICsgY29tcGxldGVkO1xyXG52YXIgbGlzdGVuZXJDYW5jZWxsZWQgPSBsaXN0ZW5lciArIFwiLVwiICsgY2FuY2VsbGVkO1xyXG52YXIgbGlzdGVuZXJDb21wbGV0ZWQgPSBsaXN0ZW5lciArIFwiLVwiICsgY29tcGxldGVkO1xyXG52YXIgVGFza0Fib3J0RXJyb3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBUYXNrQWJvcnRFcnJvcihjb2RlKSB7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcclxuICAgICAgICB0aGlzLm5hbWUgPSBcIlRhc2tBYm9ydEVycm9yXCI7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gdGFzayArIFwiIFwiICsgY2FuY2VsbGVkICsgXCIgKHJlYXNvbjogXCIgKyBjb2RlICsgXCIpXCI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gVGFza0Fib3J0RXJyb3I7XHJcbn0oKSk7XHJcbi8vIHNyYy9saXN0ZW5lck1pZGRsZXdhcmUvdGFzay50c1xyXG52YXIgdmFsaWRhdGVBY3RpdmUgPSBmdW5jdGlvbiAoc2lnbmFsKSB7XHJcbiAgICBpZiAoc2lnbmFsLmFib3J0ZWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVGFza0Fib3J0RXJyb3Ioc2lnbmFsLnJlYXNvbik7XHJcbiAgICB9XHJcbn07XHJcbmZ1bmN0aW9uIHJhY2VXaXRoU2lnbmFsKHNpZ25hbCwgcHJvbWlzZTIpIHtcclxuICAgIHZhciBjbGVhbnVwID0gbm9vcDtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgdmFyIG5vdGlmeVJlamVjdGlvbiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlamVjdChuZXcgVGFza0Fib3J0RXJyb3Ioc2lnbmFsLnJlYXNvbikpOyB9O1xyXG4gICAgICAgIGlmIChzaWduYWwuYWJvcnRlZCkge1xyXG4gICAgICAgICAgICBub3RpZnlSZWplY3Rpb24oKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjbGVhbnVwID0gYWRkQWJvcnRTaWduYWxMaXN0ZW5lcihzaWduYWwsIG5vdGlmeVJlamVjdGlvbik7XHJcbiAgICAgICAgcHJvbWlzZTIuZmluYWxseShmdW5jdGlvbiAoKSB7IHJldHVybiBjbGVhbnVwKCk7IH0pLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcclxuICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNsZWFudXAgPSBub29wO1xyXG4gICAgfSk7XHJcbn1cclxudmFyIHJ1blRhc2sgPSBmdW5jdGlvbiAodGFzazIsIGNsZWFuVXApIHsgcmV0dXJuIF9fYXN5bmModm9pZCAwLCBudWxsLCBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgdmFsdWUsIGVycm9yXzE7XHJcbiAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XHJcbiAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xyXG4gICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICBfYy50cnlzLnB1c2goWzAsIDMsIDQsIDVdKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFByb21pc2UucmVzb2x2ZSgpXTtcclxuICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGFzazIoKV07XHJcbiAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBcIm9rXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH1dO1xyXG4gICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICBlcnJvcl8xID0gX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBlcnJvcl8xIGluc3RhbmNlb2YgVGFza0Fib3J0RXJyb3IgPyBcImNhbmNlbGxlZFwiIDogXCJyZWplY3RlZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JfMVxyXG4gICAgICAgICAgICAgICAgICAgIH1dO1xyXG4gICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICBjbGVhblVwID09IG51bGwgPyB2b2lkIDAgOiBjbGVhblVwKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzcgLyplbmRmaW5hbGx5Ki9dO1xyXG4gICAgICAgICAgICBjYXNlIDU6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufSk7IH07XHJcbnZhciBjcmVhdGVQYXVzZSA9IGZ1bmN0aW9uIChzaWduYWwpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAocHJvbWlzZTIpIHtcclxuICAgICAgICByZXR1cm4gY2F0Y2hSZWplY3Rpb24ocmFjZVdpdGhTaWduYWwoc2lnbmFsLCBwcm9taXNlMikudGhlbihmdW5jdGlvbiAob3V0cHV0KSB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlQWN0aXZlKHNpZ25hbCk7XHJcbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgfTtcclxufTtcclxudmFyIGNyZWF0ZURlbGF5ID0gZnVuY3Rpb24gKHNpZ25hbCkge1xyXG4gICAgdmFyIHBhdXNlID0gY3JlYXRlUGF1c2Uoc2lnbmFsKTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGltZW91dE1zKSB7XHJcbiAgICAgICAgcmV0dXJuIHBhdXNlKG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJldHVybiBzZXRUaW1lb3V0KHJlc29sdmUsIHRpbWVvdXRNcyk7IH0pKTtcclxuICAgIH07XHJcbn07XHJcbi8vIHNyYy9saXN0ZW5lck1pZGRsZXdhcmUvaW5kZXgudHNcclxudmFyIGFzc2lnbiA9IE9iamVjdC5hc3NpZ247XHJcbnZhciBJTlRFUk5BTF9OSUxfVE9LRU4gPSB7fTtcclxudmFyIGFsbSA9IFwibGlzdGVuZXJNaWRkbGV3YXJlXCI7XHJcbnZhciBjcmVhdGVGb3JrID0gZnVuY3Rpb24gKHBhcmVudEFib3J0U2lnbmFsLCBwYXJlbnRCbG9ja2luZ1Byb21pc2VzKSB7XHJcbiAgICB2YXIgbGlua0NvbnRyb2xsZXJzID0gZnVuY3Rpb24gKGNvbnRyb2xsZXIpIHsgcmV0dXJuIGFkZEFib3J0U2lnbmFsTGlzdGVuZXIocGFyZW50QWJvcnRTaWduYWwsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGFib3J0Q29udHJvbGxlcldpdGhSZWFzb24oY29udHJvbGxlciwgcGFyZW50QWJvcnRTaWduYWwucmVhc29uKTsgfSk7IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhc2tFeGVjdXRvciwgb3B0cykge1xyXG4gICAgICAgIGFzc2VydEZ1bmN0aW9uKHRhc2tFeGVjdXRvciwgXCJ0YXNrRXhlY3V0b3JcIik7XHJcbiAgICAgICAgdmFyIGNoaWxkQWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xyXG4gICAgICAgIGxpbmtDb250cm9sbGVycyhjaGlsZEFib3J0Q29udHJvbGxlcik7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IHJ1blRhc2soZnVuY3Rpb24gKCkgeyByZXR1cm4gX19hc3luYyh2b2lkIDAsIG51bGwsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdDI7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlQWN0aXZlKHBhcmVudEFib3J0U2lnbmFsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVBY3RpdmUoY2hpbGRBYm9ydENvbnRyb2xsZXIuc2lnbmFsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGFza0V4ZWN1dG9yKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXVzZTogY3JlYXRlUGF1c2UoY2hpbGRBYm9ydENvbnRyb2xsZXIuc2lnbmFsKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxheTogY3JlYXRlRGVsYXkoY2hpbGRBYm9ydENvbnRyb2xsZXIuc2lnbmFsKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduYWw6IGNoaWxkQWJvcnRDb250cm9sbGVyLnNpZ25hbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0MiA9IF9jLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVBY3RpdmUoY2hpbGRBYm9ydENvbnRyb2xsZXIuc2lnbmFsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3VsdDJdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTsgfSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gYWJvcnRDb250cm9sbGVyV2l0aFJlYXNvbihjaGlsZEFib3J0Q29udHJvbGxlciwgdGFza0NvbXBsZXRlZCk7IH0pO1xyXG4gICAgICAgIGlmIChvcHRzID09IG51bGwgPyB2b2lkIDAgOiBvcHRzLmF1dG9Kb2luKSB7XHJcbiAgICAgICAgICAgIHBhcmVudEJsb2NraW5nUHJvbWlzZXMucHVzaChyZXN1bHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN1bHQ6IGNyZWF0ZVBhdXNlKHBhcmVudEFib3J0U2lnbmFsKShyZXN1bHQpLFxyXG4gICAgICAgICAgICBjYW5jZWw6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGFib3J0Q29udHJvbGxlcldpdGhSZWFzb24oY2hpbGRBYm9ydENvbnRyb2xsZXIsIHRhc2tDYW5jZWxsZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbn07XHJcbnZhciBjcmVhdGVUYWtlUGF0dGVybiA9IGZ1bmN0aW9uIChzdGFydExpc3RlbmluZywgc2lnbmFsKSB7XHJcbiAgICB2YXIgdGFrZSA9IGZ1bmN0aW9uIChwcmVkaWNhdGUsIHRpbWVvdXQpIHsgcmV0dXJuIF9fYXN5bmModm9pZCAwLCBudWxsLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHVuc3Vic2NyaWJlLCB0dXBsZVByb21pc2UsIHByb21pc2VzLCBvdXRwdXQ7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVBY3RpdmUoc2lnbmFsKTtcclxuICAgICAgICAgICAgICAgICAgICB1bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHR1cGxlUHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3BMaXN0ZW5pbmcgPSBzdGFydExpc3RlbmluZyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVkaWNhdGU6IHByZWRpY2F0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVmZmVjdDogZnVuY3Rpb24gKGFjdGlvbiwgbGlzdGVuZXJBcGkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lckFwaS51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyQXBpLmdldFN0YXRlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyQXBpLmdldE9yaWdpbmFsU3RhdGUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9wTGlzdGVuaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlcyA9IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHVwbGVQcm9taXNlXHJcbiAgICAgICAgICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGltZW91dCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2gobmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmV0dXJuIHNldFRpbWVvdXQocmVzb2x2ZSwgdGltZW91dCwgbnVsbCk7IH0pKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgX2MubGFiZWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIF9jLnRyeXMucHVzaChbMSwgLCAzLCA0XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmFjZVdpdGhTaWduYWwoc2lnbmFsLCBQcm9taXNlLnJhY2UocHJvbWlzZXMpKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlQWN0aXZlKHNpZ25hbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG91dHB1dF07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgdW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzcgLyplbmRmaW5hbGx5Ki9dO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChwcmVkaWNhdGUsIHRpbWVvdXQpIHsgcmV0dXJuIGNhdGNoUmVqZWN0aW9uKHRha2UocHJlZGljYXRlLCB0aW1lb3V0KSk7IH07XHJcbn07XHJcbnZhciBnZXRMaXN0ZW5lckVudHJ5UHJvcHNGcm9tID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgIHZhciB0eXBlID0gb3B0aW9ucy50eXBlLCBhY3Rpb25DcmVhdG9yID0gb3B0aW9ucy5hY3Rpb25DcmVhdG9yLCBtYXRjaGVyID0gb3B0aW9ucy5tYXRjaGVyLCBwcmVkaWNhdGUgPSBvcHRpb25zLnByZWRpY2F0ZSwgZWZmZWN0ID0gb3B0aW9ucy5lZmZlY3Q7XHJcbiAgICBpZiAodHlwZSkge1xyXG4gICAgICAgIHByZWRpY2F0ZSA9IGNyZWF0ZUFjdGlvbih0eXBlKS5tYXRjaDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGFjdGlvbkNyZWF0b3IpIHtcclxuICAgICAgICB0eXBlID0gYWN0aW9uQ3JlYXRvci50eXBlO1xyXG4gICAgICAgIHByZWRpY2F0ZSA9IGFjdGlvbkNyZWF0b3IubWF0Y2g7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChtYXRjaGVyKSB7XHJcbiAgICAgICAgcHJlZGljYXRlID0gbWF0Y2hlcjtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHByZWRpY2F0ZSkge1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ3JlYXRpbmcgb3IgcmVtb3ZpbmcgYSBsaXN0ZW5lciByZXF1aXJlcyBvbmUgb2YgdGhlIGtub3duIGZpZWxkcyBmb3IgbWF0Y2hpbmcgYW4gYWN0aW9uXCIpO1xyXG4gICAgfVxyXG4gICAgYXNzZXJ0RnVuY3Rpb24oZWZmZWN0LCBcIm9wdGlvbnMubGlzdGVuZXJcIik7XHJcbiAgICByZXR1cm4geyBwcmVkaWNhdGU6IHByZWRpY2F0ZSwgdHlwZTogdHlwZSwgZWZmZWN0OiBlZmZlY3QgfTtcclxufTtcclxudmFyIGNyZWF0ZUxpc3RlbmVyRW50cnkgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgdmFyIF9jID0gZ2V0TGlzdGVuZXJFbnRyeVByb3BzRnJvbShvcHRpb25zKSwgdHlwZSA9IF9jLnR5cGUsIHByZWRpY2F0ZSA9IF9jLnByZWRpY2F0ZSwgZWZmZWN0ID0gX2MuZWZmZWN0O1xyXG4gICAgdmFyIGlkID0gbmFub2lkKCk7XHJcbiAgICB2YXIgZW50cnkgPSB7XHJcbiAgICAgICAgaWQ6IGlkLFxyXG4gICAgICAgIGVmZmVjdDogZWZmZWN0LFxyXG4gICAgICAgIHR5cGU6IHR5cGUsXHJcbiAgICAgICAgcHJlZGljYXRlOiBwcmVkaWNhdGUsXHJcbiAgICAgICAgcGVuZGluZzogbmV3IFNldCgpLFxyXG4gICAgICAgIHVuc3Vic2NyaWJlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuc3Vic2NyaWJlIG5vdCBpbml0aWFsaXplZFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGVudHJ5O1xyXG59O1xyXG52YXIgY2FuY2VsQWN0aXZlTGlzdGVuZXJzID0gZnVuY3Rpb24gKGVudHJ5KSB7XHJcbiAgICBlbnRyeS5wZW5kaW5nLmZvckVhY2goZnVuY3Rpb24gKGNvbnRyb2xsZXIpIHtcclxuICAgICAgICBhYm9ydENvbnRyb2xsZXJXaXRoUmVhc29uKGNvbnRyb2xsZXIsIGxpc3RlbmVyQ2FuY2VsbGVkKTtcclxuICAgIH0pO1xyXG59O1xyXG52YXIgY3JlYXRlQ2xlYXJMaXN0ZW5lck1pZGRsZXdhcmUgPSBmdW5jdGlvbiAobGlzdGVuZXJNYXApIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGlzdGVuZXJNYXAuZm9yRWFjaChjYW5jZWxBY3RpdmVMaXN0ZW5lcnMpO1xyXG4gICAgICAgIGxpc3RlbmVyTWFwLmNsZWFyKCk7XHJcbiAgICB9O1xyXG59O1xyXG52YXIgc2FmZWx5Tm90aWZ5RXJyb3IgPSBmdW5jdGlvbiAoZXJyb3JIYW5kbGVyLCBlcnJvclRvTm90aWZ5LCBlcnJvckluZm8pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgZXJyb3JIYW5kbGVyKGVycm9yVG9Ob3RpZnksIGVycm9ySW5mbyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3JIYW5kbGVyRXJyb3IpIHtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3JIYW5kbGVyRXJyb3I7XHJcbiAgICAgICAgfSwgMCk7XHJcbiAgICB9XHJcbn07XHJcbnZhciBhZGRMaXN0ZW5lciA9IGNyZWF0ZUFjdGlvbihhbG0gKyBcIi9hZGRcIik7XHJcbnZhciBjbGVhckFsbExpc3RlbmVycyA9IGNyZWF0ZUFjdGlvbihhbG0gKyBcIi9yZW1vdmVBbGxcIik7XHJcbnZhciByZW1vdmVMaXN0ZW5lciA9IGNyZWF0ZUFjdGlvbihhbG0gKyBcIi9yZW1vdmVcIik7XHJcbnZhciBkZWZhdWx0RXJyb3JIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgfVxyXG4gICAgY29uc29sZS5lcnJvci5hcHBseShjb25zb2xlLCBfX3NwcmVhZEFycmF5KFthbG0gKyBcIi9lcnJvclwiXSwgYXJncykpO1xyXG59O1xyXG5mdW5jdGlvbiBjcmVhdGVMaXN0ZW5lck1pZGRsZXdhcmUobWlkZGxld2FyZU9wdGlvbnMpIHtcclxuICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICBpZiAobWlkZGxld2FyZU9wdGlvbnMgPT09IHZvaWQgMCkgeyBtaWRkbGV3YXJlT3B0aW9ucyA9IHt9OyB9XHJcbiAgICB2YXIgbGlzdGVuZXJNYXAgPSBuZXcgTWFwKCk7XHJcbiAgICB2YXIgZXh0cmEgPSBtaWRkbGV3YXJlT3B0aW9ucy5leHRyYSwgX2MgPSBtaWRkbGV3YXJlT3B0aW9ucy5vbkVycm9yLCBvbkVycm9yID0gX2MgPT09IHZvaWQgMCA/IGRlZmF1bHRFcnJvckhhbmRsZXIgOiBfYztcclxuICAgIGFzc2VydEZ1bmN0aW9uKG9uRXJyb3IsIFwib25FcnJvclwiKTtcclxuICAgIHZhciBpbnNlcnRFbnRyeSA9IGZ1bmN0aW9uIChlbnRyeSkge1xyXG4gICAgICAgIGVudHJ5LnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gbGlzdGVuZXJNYXAuZGVsZXRlKGVudHJ5LmlkKTsgfTtcclxuICAgICAgICBsaXN0ZW5lck1hcC5zZXQoZW50cnkuaWQsIGVudHJ5KTtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGNhbmNlbE9wdGlvbnMpIHtcclxuICAgICAgICAgICAgZW50cnkudW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgaWYgKGNhbmNlbE9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IGNhbmNlbE9wdGlvbnMuY2FuY2VsQWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICBjYW5jZWxBY3RpdmVMaXN0ZW5lcnMoZW50cnkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICB2YXIgZmluZExpc3RlbmVyRW50cnkgPSBmdW5jdGlvbiAoY29tcGFyYXRvcikge1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2MgPSBBcnJheS5mcm9tKGxpc3RlbmVyTWFwLnZhbHVlcygpKTsgX2kgPCBfYy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGVudHJ5ID0gX2NbX2ldO1xyXG4gICAgICAgICAgICBpZiAoY29tcGFyYXRvcihlbnRyeSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdm9pZCAwO1xyXG4gICAgfTtcclxuICAgIHZhciBzdGFydExpc3RlbmluZyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIGVudHJ5ID0gZmluZExpc3RlbmVyRW50cnkoZnVuY3Rpb24gKGV4aXN0aW5nRW50cnkpIHsgcmV0dXJuIGV4aXN0aW5nRW50cnkuZWZmZWN0ID09PSBvcHRpb25zLmVmZmVjdDsgfSk7XHJcbiAgICAgICAgaWYgKCFlbnRyeSkge1xyXG4gICAgICAgICAgICBlbnRyeSA9IGNyZWF0ZUxpc3RlbmVyRW50cnkob3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnNlcnRFbnRyeShlbnRyeSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIHN0b3BMaXN0ZW5pbmcgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfYyA9IGdldExpc3RlbmVyRW50cnlQcm9wc0Zyb20ob3B0aW9ucyksIHR5cGUgPSBfYy50eXBlLCBlZmZlY3QgPSBfYy5lZmZlY3QsIHByZWRpY2F0ZSA9IF9jLnByZWRpY2F0ZTtcclxuICAgICAgICB2YXIgZW50cnkgPSBmaW5kTGlzdGVuZXJFbnRyeShmdW5jdGlvbiAoZW50cnkyKSB7XHJcbiAgICAgICAgICAgIHZhciBtYXRjaFByZWRpY2F0ZU9yVHlwZSA9IHR5cGVvZiB0eXBlID09PSBcInN0cmluZ1wiID8gZW50cnkyLnR5cGUgPT09IHR5cGUgOiBlbnRyeTIucHJlZGljYXRlID09PSBwcmVkaWNhdGU7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXRjaFByZWRpY2F0ZU9yVHlwZSAmJiBlbnRyeTIuZWZmZWN0ID09PSBlZmZlY3Q7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKGVudHJ5KSB7XHJcbiAgICAgICAgICAgIGVudHJ5LnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmNhbmNlbEFjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgY2FuY2VsQWN0aXZlTGlzdGVuZXJzKGVudHJ5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gISFlbnRyeTtcclxuICAgIH07XHJcbiAgICB2YXIgbm90aWZ5TGlzdGVuZXIgPSBmdW5jdGlvbiAoZW50cnksIGFjdGlvbiwgYXBpLCBnZXRPcmlnaW5hbFN0YXRlKSB7IHJldHVybiBfX2FzeW5jKF90aGlzLCBudWxsLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGludGVybmFsVGFza0NvbnRyb2xsZXIsIHRha2UsIGF1dG9Kb2luUHJvbWlzZXMsIGxpc3RlbmVyRXJyb3JfMTtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBpbnRlcm5hbFRhc2tDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRha2UgPSBjcmVhdGVUYWtlUGF0dGVybihzdGFydExpc3RlbmluZywgaW50ZXJuYWxUYXNrQ29udHJvbGxlci5zaWduYWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF1dG9Kb2luUHJvbWlzZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBfYy5sYWJlbCA9IDE7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgX2MudHJ5cy5wdXNoKFsxLCAzLCA0LCA2XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnkucGVuZGluZy5hZGQoaW50ZXJuYWxUYXNrQ29udHJvbGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgUHJvbWlzZS5yZXNvbHZlKGVudHJ5LmVmZmVjdChhY3Rpb24sIGFzc2lnbih7fSwgYXBpLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRPcmlnaW5hbFN0YXRlOiBnZXRPcmlnaW5hbFN0YXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uOiBmdW5jdGlvbiAocHJlZGljYXRlLCB0aW1lb3V0KSB7IHJldHVybiB0YWtlKHByZWRpY2F0ZSwgdGltZW91dCkudGhlbihCb29sZWFuKTsgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRha2U6IHRha2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxheTogY3JlYXRlRGVsYXkoaW50ZXJuYWxUYXNrQ29udHJvbGxlci5zaWduYWwpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF1c2U6IGNyZWF0ZVBhdXNlKGludGVybmFsVGFza0NvbnRyb2xsZXIuc2lnbmFsKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhOiBleHRyYSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbDogaW50ZXJuYWxUYXNrQ29udHJvbGxlci5zaWduYWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JrOiBjcmVhdGVGb3JrKGludGVybmFsVGFza0NvbnRyb2xsZXIuc2lnbmFsLCBhdXRvSm9pblByb21pc2VzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlOiBlbnRyeS51bnN1YnNjcmliZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyTWFwLnNldChlbnRyeS5pZCwgZW50cnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbEFjdGl2ZUxpc3RlbmVyczogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LnBlbmRpbmcuZm9yRWFjaChmdW5jdGlvbiAoY29udHJvbGxlciwgXywgc2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250cm9sbGVyICE9PSBpbnRlcm5hbFRhc2tDb250cm9sbGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYm9ydENvbnRyb2xsZXJXaXRoUmVhc29uKGNvbnRyb2xsZXIsIGxpc3RlbmVyQ2FuY2VsbGVkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldC5kZWxldGUoY29udHJvbGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyRXJyb3JfMSA9IF9jLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIShsaXN0ZW5lckVycm9yXzEgaW5zdGFuY2VvZiBUYXNrQWJvcnRFcnJvcikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2FmZWx5Tm90aWZ5RXJyb3Iob25FcnJvciwgbGlzdGVuZXJFcnJvcl8xLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWlzZWRCeTogXCJlZmZlY3RcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbNCAvKnlpZWxkKi8sIFByb21pc2UuYWxsU2V0dGxlZChhdXRvSm9pblByb21pc2VzKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFib3J0Q29udHJvbGxlcldpdGhSZWFzb24oaW50ZXJuYWxUYXNrQ29udHJvbGxlciwgbGlzdGVuZXJDb21wbGV0ZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5LnBlbmRpbmcuZGVsZXRlKGludGVybmFsVGFza0NvbnRyb2xsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNyAvKmVuZGZpbmFsbHkqL107XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7IH07XHJcbiAgICB2YXIgY2xlYXJMaXN0ZW5lck1pZGRsZXdhcmUgPSBjcmVhdGVDbGVhckxpc3RlbmVyTWlkZGxld2FyZShsaXN0ZW5lck1hcCk7XHJcbiAgICB2YXIgbWlkZGxld2FyZSA9IGZ1bmN0aW9uIChhcGkpIHsgcmV0dXJuIGZ1bmN0aW9uIChuZXh0KSB7IHJldHVybiBmdW5jdGlvbiAoYWN0aW9uKSB7XHJcbiAgICAgICAgaWYgKCFpc0FjdGlvbihhY3Rpb24pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXh0KGFjdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhZGRMaXN0ZW5lci5tYXRjaChhY3Rpb24pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdGFydExpc3RlbmluZyhhY3Rpb24ucGF5bG9hZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjbGVhckFsbExpc3RlbmVycy5tYXRjaChhY3Rpb24pKSB7XHJcbiAgICAgICAgICAgIGNsZWFyTGlzdGVuZXJNaWRkbGV3YXJlKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlbW92ZUxpc3RlbmVyLm1hdGNoKGFjdGlvbikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0b3BMaXN0ZW5pbmcoYWN0aW9uLnBheWxvYWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgb3JpZ2luYWxTdGF0ZSA9IGFwaS5nZXRTdGF0ZSgpO1xyXG4gICAgICAgIHZhciBnZXRPcmlnaW5hbFN0YXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAob3JpZ2luYWxTdGF0ZSA9PT0gSU5URVJOQUxfTklMX1RPS0VOKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYWxtICsgXCI6IGdldE9yaWdpbmFsU3RhdGUgY2FuIG9ubHkgYmUgY2FsbGVkIHN5bmNocm9ub3VzbHlcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsU3RhdGU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgcmVzdWx0O1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IG5leHQoYWN0aW9uKTtcclxuICAgICAgICAgICAgaWYgKGxpc3RlbmVyTWFwLnNpemUgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gYXBpLmdldFN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGlzdGVuZXJFbnRyaWVzID0gQXJyYXkuZnJvbShsaXN0ZW5lck1hcC52YWx1ZXMoKSk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGxpc3RlbmVyRW50cmllc18xID0gbGlzdGVuZXJFbnRyaWVzOyBfaSA8IGxpc3RlbmVyRW50cmllc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbnRyeSA9IGxpc3RlbmVyRW50cmllc18xW19pXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcnVuTGlzdGVuZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBydW5MaXN0ZW5lciA9IGVudHJ5LnByZWRpY2F0ZShhY3Rpb24sIGN1cnJlbnRTdGF0ZSwgb3JpZ2luYWxTdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChwcmVkaWNhdGVFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBydW5MaXN0ZW5lciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzYWZlbHlOb3RpZnlFcnJvcihvbkVycm9yLCBwcmVkaWNhdGVFcnJvciwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2VkQnk6IFwicHJlZGljYXRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcnVuTGlzdGVuZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIG5vdGlmeUxpc3RlbmVyKGVudHJ5LCBhY3Rpb24sIGFwaSwgZ2V0T3JpZ2luYWxTdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7XHJcbiAgICAgICAgICAgIG9yaWdpbmFsU3RhdGUgPSBJTlRFUk5BTF9OSUxfVE9LRU47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9OyB9OyB9O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBtaWRkbGV3YXJlOiBtaWRkbGV3YXJlLFxyXG4gICAgICAgIHN0YXJ0TGlzdGVuaW5nOiBzdGFydExpc3RlbmluZyxcclxuICAgICAgICBzdG9wTGlzdGVuaW5nOiBzdG9wTGlzdGVuaW5nLFxyXG4gICAgICAgIGNsZWFyTGlzdGVuZXJzOiBjbGVhckxpc3RlbmVyTWlkZGxld2FyZVxyXG4gICAgfTtcclxufVxyXG4vLyBzcmMvYXV0b0JhdGNoRW5oYW5jZXIudHNcclxudmFyIFNIT1VMRF9BVVRPQkFUQ0ggPSBcIlJUS19hdXRvQmF0Y2hcIjtcclxudmFyIHByZXBhcmVBdXRvQmF0Y2hlZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZ1bmN0aW9uIChwYXlsb2FkKSB7XHJcbiAgICB2YXIgX2M7XHJcbiAgICByZXR1cm4gKHtcclxuICAgICAgICBwYXlsb2FkOiBwYXlsb2FkLFxyXG4gICAgICAgIG1ldGE6IChfYyA9IHt9LCBfY1tTSE9VTERfQVVUT0JBVENIXSA9IHRydWUsIF9jKVxyXG4gICAgfSk7XHJcbn07IH07XHJcbnZhciBwcm9taXNlO1xyXG52YXIgcXVldWVNaWNyb3Rhc2tTaGltID0gdHlwZW9mIHF1ZXVlTWljcm90YXNrID09PSBcImZ1bmN0aW9uXCIgPyBxdWV1ZU1pY3JvdGFzay5iaW5kKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogZ2xvYmFsVGhpcykgOiBmdW5jdGlvbiAoY2IpIHsgcmV0dXJuIChwcm9taXNlIHx8IChwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCkpKS50aGVuKGNiKS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7IHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgIHRocm93IGVycjtcclxufSwgMCk7IH0pOyB9O1xyXG52YXIgY3JlYXRlUXVldWVXaXRoVGltZXIgPSBmdW5jdGlvbiAodGltZW91dCkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChub3RpZnkpIHtcclxuICAgICAgICBzZXRUaW1lb3V0KG5vdGlmeSwgdGltZW91dCk7XHJcbiAgICB9O1xyXG59O1xyXG52YXIgckFGID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID8gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA6IGNyZWF0ZVF1ZXVlV2l0aFRpbWVyKDEwKTtcclxudmFyIGF1dG9CYXRjaEVuaGFuY2VyID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHsgdHlwZTogXCJyYWZcIiB9OyB9XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKG5leHQpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHN0b3JlID0gbmV4dC5hcHBseSh2b2lkIDAsIGFyZ3MpO1xyXG4gICAgICAgIHZhciBub3RpZnlpbmcgPSB0cnVlO1xyXG4gICAgICAgIHZhciBzaG91bGROb3RpZnlBdEVuZE9mVGljayA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBub3RpZmljYXRpb25RdWV1ZWQgPSBmYWxzZTtcclxuICAgICAgICB2YXIgbGlzdGVuZXJzID0gbmV3IFNldCgpO1xyXG4gICAgICAgIHZhciBxdWV1ZUNhbGxiYWNrID0gb3B0aW9ucy50eXBlID09PSBcInRpY2tcIiA/IHF1ZXVlTWljcm90YXNrU2hpbSA6IG9wdGlvbnMudHlwZSA9PT0gXCJyYWZcIiA/IHJBRiA6IG9wdGlvbnMudHlwZSA9PT0gXCJjYWxsYmFja1wiID8gb3B0aW9ucy5xdWV1ZU5vdGlmaWNhdGlvbiA6IGNyZWF0ZVF1ZXVlV2l0aFRpbWVyKG9wdGlvbnMudGltZW91dCk7XHJcbiAgICAgICAgdmFyIG5vdGlmeUxpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbm90aWZpY2F0aW9uUXVldWVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChzaG91bGROb3RpZnlBdEVuZE9mVGljaykge1xyXG4gICAgICAgICAgICAgICAgc2hvdWxkTm90aWZ5QXRFbmRPZlRpY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChsKSB7IHJldHVybiBsKCk7IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgc3RvcmUsIHtcclxuICAgICAgICAgICAgc3Vic2NyaWJlOiBmdW5jdGlvbiAobGlzdGVuZXIyKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd3JhcHBlZExpc3RlbmVyID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gbm90aWZ5aW5nICYmIGxpc3RlbmVyMigpOyB9O1xyXG4gICAgICAgICAgICAgICAgdmFyIHVuc3Vic2NyaWJlID0gc3RvcmUuc3Vic2NyaWJlKHdyYXBwZWRMaXN0ZW5lcik7XHJcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcnMuYWRkKGxpc3RlbmVyMik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcjIpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGlzcGF0Y2g6IGZ1bmN0aW9uIChhY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm90aWZ5aW5nID0gISgoX2EgPSBhY3Rpb24gPT0gbnVsbCA/IHZvaWQgMCA6IGFjdGlvbi5tZXRhKSA9PSBudWxsID8gdm9pZCAwIDogX2FbU0hPVUxEX0FVVE9CQVRDSF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHNob3VsZE5vdGlmeUF0RW5kT2ZUaWNrID0gIW5vdGlmeWluZztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkTm90aWZ5QXRFbmRPZlRpY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFub3RpZmljYXRpb25RdWV1ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblF1ZXVlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZUNhbGxiYWNrKG5vdGlmeUxpc3RlbmVycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKGFjdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgICAgICAgICAgICBub3RpZnlpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9OyB9O1xyXG59O1xyXG4vLyBzcmMvaW5kZXgudHNcclxuZW5hYmxlRVM1KCk7XHJcbmV4cG9ydCB7IEVuaGFuY2VyQXJyYXksIE1pZGRsZXdhcmVBcnJheSwgU0hPVUxEX0FVVE9CQVRDSCwgVGFza0Fib3J0RXJyb3IsIGFkZExpc3RlbmVyLCBhdXRvQmF0Y2hFbmhhbmNlciwgY2xlYXJBbGxMaXN0ZW5lcnMsIGNvbmZpZ3VyZVN0b3JlLCBjcmVhdGVBY3Rpb24sIGNyZWF0ZUFjdGlvbkNyZWF0b3JJbnZhcmlhbnRNaWRkbGV3YXJlLCBjcmVhdGVBc3luY1RodW5rLCBjcmVhdGVEcmFmdFNhZmVTZWxlY3RvciwgY3JlYXRlRW50aXR5QWRhcHRlciwgY3JlYXRlSW1tdXRhYmxlU3RhdGVJbnZhcmlhbnRNaWRkbGV3YXJlLCBjcmVhdGVMaXN0ZW5lck1pZGRsZXdhcmUsIGRlZmF1bHQyIGFzIGNyZWF0ZU5leHRTdGF0ZSwgY3JlYXRlUmVkdWNlciwgY3JlYXRlU2VsZWN0b3IyIGFzIGNyZWF0ZVNlbGVjdG9yLCBjcmVhdGVTZXJpYWxpemFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUsIGNyZWF0ZVNsaWNlLCBjdXJyZW50MiBhcyBjdXJyZW50LCBmaW5kTm9uU2VyaWFsaXphYmxlVmFsdWUsIGZyZWV6ZSwgZ2V0RGVmYXVsdE1pZGRsZXdhcmUsIGdldFR5cGUsIGlzQWN0aW9uLCBpc0FjdGlvbkNyZWF0b3IsIGlzQWxsT2YsIGlzQW55T2YsIGlzQXN5bmNUaHVua0FjdGlvbiwgaXNEcmFmdDQgYXMgaXNEcmFmdCwgaXNGU0EgYXMgaXNGbHV4U3RhbmRhcmRBY3Rpb24sIGlzRnVsZmlsbGVkLCBpc0ltbXV0YWJsZURlZmF1bHQsIGlzUGVuZGluZywgaXNQbGFpbiwgaXNQbGFpbk9iamVjdCwgaXNSZWplY3RlZCwgaXNSZWplY3RlZFdpdGhWYWx1ZSwgbWluaVNlcmlhbGl6ZUVycm9yLCBuYW5vaWQsIG9yaWdpbmFsLCBwcmVwYXJlQXV0b0JhdGNoZWQsIHJlbW92ZUxpc3RlbmVyLCB1bndyYXBSZXN1bHQgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVkdXgtdG9vbGtpdC5lc20uanMubWFwIiwiaW1wb3J0IHsgTkFWX0hFSUdIVCB9IGZyb20gXCIuLi9hcHBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1vZGFsTXV0YXRlT2JzZXJ2ZXIoc3RhdGUgPSB7fSwgYWN0aW9uKSB7XHJcbiAgICAvLyB6ID0geisxO1xyXG4gICAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xyXG4gICAgICAgIGNhc2UgXCJtb2RhbE11dGF0ZU9ic2VydmVyL3VwZGF0ZVwiOlxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgLi4uc3RhdGUsIFxyXG4gICAgICAgICAgICAgICAgW2FjdGlvbi5uYW1lXToge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGFjdGlvbi5uYW1lLCBcclxuICAgICAgICAgICAgICAgICAgICB4OiBhY3Rpb24ueCwgXHJcbiAgICAgICAgICAgICAgICAgICAgeTogYWN0aW9uLnksIFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBhY3Rpb24ud2lkdGgsIFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogYWN0aW9uLmhlaWdodFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICBjYXNlIFwibW9kYWxNdXRhdGVPYnNlcnZlci9hY3RpdmVcIjpcclxuICAgICAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIFxyXG4gICAgICAgICAgICAgICAgW2FjdGlvbi5uYW1lXTogeyBcclxuICAgICAgICAgICAgICAgICAgICAuLi5zdGF0ZVthY3Rpb24ubmFtZV0sIFxyXG4gICAgICAgICAgICAgICAgICAgIHpJbmRleDogYWN0aW9uLnpJbmRleCBcclxuICAgICAgICAgICAgICAgIH0gfTtcclxuXHJcbiAgICAgICAgY2FzZSBcIm1vZGFsTXV0YXRlT2JzZXJ2ZXIvZGVsZXRlXCI6XHJcbiAgICAgICAgICAgIGNvbnN0IGNvcGllZFN0YXRlID0gey4uLnN0YXRlfTtcclxuICAgICAgICAgICAgZGVsZXRlIGNvcGllZFN0YXRlW2FjdGlvbi5uYW1lXTtcclxuICAgICAgICAgICAgcmV0dXJuIGNvcGllZFN0YXRlO1xyXG5cclxuICAgICAgICBjYXNlIFwibW9kYWxNdXRhdGVPYnNlcnZlci9tYXhpbWl6ZVwiOlxyXG4gICAgICAgICAgICByZXR1cm4geyAuLi5zdGF0ZSwgXHJcbiAgICAgICAgICAgICAgICBbYWN0aW9uLm5hbWVdOiB7IFxyXG4gICAgICAgICAgICAgICAgICAgIC4uLnN0YXRlW2FjdGlvbi5uYW1lXSwgXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogYGNhbGMoMTAwJSAtICR7TkFWX0hFSUdIVH1weClgLCBcclxuICAgICAgICAgICAgICAgICAgICB4OiBgMHB4YCwgXHJcbiAgICAgICAgICAgICAgICAgICAgeTogYCR7TkFWX0hFSUdIVH1weGAgXHJcbiAgICAgICAgICAgICAgICB9IH07XHJcblxyXG4gICAgICAgIGNhc2UgXCJtb2RhbE11dGF0ZU9ic2VydmVyL3Bvc2l0aW9uXCI6XHJcbiAgICAgICAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBcclxuICAgICAgICAgICAgICAgIFthY3Rpb24ubmFtZV06IHsgXHJcbiAgICAgICAgICAgICAgICAgICAgLi4uc3RhdGVbYWN0aW9uLm5hbWVdLCBcclxuICAgICAgICAgICAgICAgICAgICB4OiBhY3Rpb24ueCwgXHJcbiAgICAgICAgICAgICAgICAgICAgeTogYWN0aW9uLnkgXHJcbiAgICAgICAgICAgICAgICB9IH07XHJcblxyXG4gICAgICAgIGNhc2UgXCJtb2RhbE11dGF0ZU9ic2VydmVyL3NpemVcIjpcclxuICAgICAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIFxyXG4gICAgICAgICAgICAgICAgW2FjdGlvbi5uYW1lXTogeyBcclxuICAgICAgICAgICAgICAgICAgICAuLi5zdGF0ZVthY3Rpb24ubmFtZV0sIFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBhY3Rpb24ud2lkdGgsIFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogYWN0aW9uLmhlaWdodCBcclxuICAgICAgICAgICAgICAgIH0gfTtcclxuXHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUgfTtcclxuICAgIH1cclxufSIsIlxyXG4vKipcclxuICogc3RvcmUgZm9yIHdoZW4gdXNlciBkcmFncyBhIG1vZGFsXHJcbiAqIEBwYXJhbSB7Kn0gc3RhdGUgXHJcbiAqIEBwYXJhbSB7Kn0gYWN0aW9uIFxyXG4gKiBAcmV0dXJucyBudWxsXHJcbiAqL1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbW9kYWxEcmFnT2JzZXJ2ZXIoc3RhdGUgPSB7XHJcbiAgICBtb3VzZU9uOiBmYWxzZSxcclxuICAgIG5hbWU6IFwiXCIsXHJcbiAgICB0YXJnZXQ6IFwiXCIsXHJcbiAgICBtb3VzZVBvc2l0aW9uOiB7IHg6IDAsIHk6IDAgfVxyXG59LCBhY3Rpb24pe1xyXG4gICAgc3dpdGNoKGFjdGlvbi50eXBlKXtcclxuICAgICAgICBjYXNlIFwibW9kYWxEcmFnT2JzZXJ2ZXIvc3RhcnRcIjpcclxuICAgICAgICAgICAgcmV0dXJuIHsgXHJcbiAgICAgICAgICAgICAgICAuLi5zdGF0ZSwgXHJcbiAgICAgICAgICAgICAgICBtb3VzZU9uOiB0cnVlLCBcclxuICAgICAgICAgICAgICAgIG5hbWU6IGFjdGlvbi5uYW1lLCBcclxuICAgICAgICAgICAgICAgIG1vdXNlUG9zaXRpb246IHsgXHJcbiAgICAgICAgICAgICAgICAgICAgeDogYWN0aW9uLm1vdXNlUG9zaXRpb24ueCwgXHJcbiAgICAgICAgICAgICAgICAgICAgeTogYWN0aW9uLm1vdXNlUG9zaXRpb24ueVxyXG4gICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICBjYXNlIFwibW9kYWxEcmFnT2JzZXJ2ZXIvZW5kXCI6XHJcbiAgICAgICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICAgICAgLi4uc3RhdGUsIFxyXG4gICAgICAgICAgICAgICAgbW91c2VPbjogZmFsc2UgXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xyXG4gICAgfVxyXG59OyIsIlxyXG4vKipcclxuICogY3VycmVudGx5IGFjdGl2YXRlZCBtb2RhbCBpbmZvcm1hdGlvblxyXG4gKiBAcGFyYW0geyp9IHN0YXRlIFxyXG4gKiBAcGFyYW0geyp9IGFjdGlvbiBcclxuICogQHJldHVybnMgbnVsbFxyXG4gKi9cclxuXHJcbiBleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBmb2N1c2VkTW9kYWxPYnNlcnZlcihzdGF0ZSA9IHsgbmFtZTogXCJcIiB9LCBhY3Rpb24pe1xyXG4gICAgc3dpdGNoKGFjdGlvbi50eXBlKXtcclxuICAgICAgICBjYXNlIFwiZm9jdXNcIjpcclxuICAgICAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIG5hbWU6IGFjdGlvbi5uYW1lIH07XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xyXG4gICAgfVxyXG59O1xyXG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtb2RhbFJlc2l6ZU9ic2VydmVyKCBzdGF0ZSA9IHtcclxuICAgIGlzUmVzaXplZDogZmFsc2UsXHJcbiAgICBuYW1lOiBcIlwiLFxyXG4gICAgbW91c2VQb3NpdGlvbjoge30sXHJcbiAgICByZXNpemVUcmlnZ2VyUHJvcDogXCJcIixcclxufSwgYWN0aW9uICl7XHJcbiAgICBzd2l0Y2goYWN0aW9uLnR5cGUpe1xyXG4gICAgICAgIGNhc2UgXCJtb2RhbFJlc2l6ZU9ic2VydmVyL3N0YXJ0XCI6XHJcbiAgICAgICAgICAgIHJldHVybntcclxuICAgICAgICAgICAgICAgIGlzUmVzaXplZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGFjdGlvbi5uYW1lLFxyXG4gICAgICAgICAgICAgICAgbW91c2VQb3NpdGlvbjogYWN0aW9uLm1vdXNlUG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICByZXNpemVUcmlnZ2VyUHJvcDogYWN0aW9uLnJlc2l6ZVRyaWdnZXJQcm9wXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgY2FzZSBcIm1vZGFsUmVzaXplT2JzZXJ2ZXIvZW5kXCI6XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBpc1Jlc2l6ZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJcIixcclxuICAgICAgICAgICAgICAgIG1vdXNlUG9zaXRpb246IHt9LFxyXG4gICAgICAgICAgICAgICAgcmVzaXplVHJpZ2dlclByb3A6IFwiXCIsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgZGVmYXVsdDogcmV0dXJuIHsuLi5zdGF0ZX07XHJcbiAgICB9XHJcbn0iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxuX193ZWJwYWNrX3JlcXVpcmVfXyg5MDQpO1xudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4NSk7XG4iXSwibmFtZXMiOlsiUmVzaXplIiwid2lkdGgiLCJoZWlnaHQiLCJ0aGlzIiwiQ09STkVSX1JFU0laRVIiLCJMRUZUIiwiVE9QIiwiVE9QX0xFRlQiLCJUT1BfUklHSFQiLCJSSUdIVCIsIkJPVFRPTSIsIkJPVFRPTV9MRUZUIiwiQk9UVE9NX1JJR0hUIiwibW9kYWxNaW5pbXVtU2l6ZSIsIk51bWJlciIsIm1hdGNoIiwiYm9keSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm1vZGFsIiwiQnV0dG9uRXZudCIsIkJUTl9DTElDSyIsIkJHX0NPTE9SIiwiTUlOSU1JWkUiLCJNQVhJTUlaRSIsIkNMT1NFIiwiRFJBRyIsIm1vZGFsTmFtZSIsImRhdGFzZXQiLCJuYW1lIiwidW5zdWJzY3JpYmUiLCJvcmlnaW5JbmZvIiwieCIsInkiLCJwcm90b3R5cGUiLCJpbml0IiwicHJvcGVydHkiLCJyZXNpemVUcmlnZ2VyUHJvcCIsInJlc2l6ZVRyaWdnZXJzIiwicXVlcnlTZWxlY3RvckFsbCIsImxlbmd0aCIsImZvckVhY2giLCJ0cmlnZ2VyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJyZXNpemVDbGlja1N0YXJ0SGFuZGxlciIsIl90aGlzIiwicHJldmVudERlZmF1bHQiLCJyZXNpemVUcmlnZ2VyIiwiY3VycmVudFRhcmdldCIsInJlc2l6ZVRyaWdnZXJOYW1lIiwicGFyZW50RWxlbWVudCIsImdldEF0dHJpYnV0ZSIsIm1vdXNlUG9zaXRpb24iLCJwYWdlWCIsInBhZ2VZIiwidXBkYXRlQXNDdXJyZW50Iiwic3RvcmUiLCJkaXNwYXRjaCIsInR5cGUiLCJyZXNpemVJbmZvIiwiZ2V0U3RhdGUiLCJtb2RhbFJlc2l6ZU9ic2VydmVyIiwicmVzaXplZE1vZGFsSW5mbyIsImdldE1vZGFsIiwiaXNNb2RhbFJlc2l6ZWQiLCJpc1Jlc2l6ZWQiLCJzdWJzY3JpYmVJZlJlc2l6ZSIsInJlc2l6ZUhhbmRsZXIiLCJzdG9wUHJvcGFnYXRpb24iLCJyZXNpemVNb2RhbCIsImdldFdpZHRoRnJvbVVucG9zaXRpb25lZE1vZGFsIiwibW91c2VQb3NpdGlvblgiLCJnZXRPcmlnaW5Qb3NpdGlvbiIsImdldE9yaWdpblNpemUiLCJnZXRXaWR0aEZyb21Qb3NpdGlvbmVkTW9kYWwiLCJnZXRIZWlnaHRGcm9tVW5wb3NpdGlvbmVkTW9kYWwiLCJtb3VzZVBvc2l0aW9uWSIsImdldEhlaWdodEZyb21Qb3NpdGlvbmVkTW9kYWwiLCJzZXRTaXplV2l0aFdpZHRoIiwiY2hlY2tJZk1pbmltdW1XaWR0aCIsInNldFNpemVXaXRoSGVpZ2h0IiwiY2hlY2tJZk1pbmltdW1IZWlnaHQiLCJsZXQiLCJOQVZfSEVJR0hUIiwiaXNXaWR0aE5hcnJvdyIsImlzSGVpZ2h0U2hvcnQiLCJzaXplIiwicG9zaXRpb24iLCJzdHlsZSIsImN1cnNvciIsInVwZGF0ZU1vZGFsIiwidXBkYXRlTW9kYWxTaXplIiwibW9kYWxNdXRhdGVPYnNlcnZlciIsInBhcnNlRmxvYXQiLCJzdWJzY3JpYmVJZkZpbmlzaFJlc2l6ZSIsImZpbmlzaFJlc2l6ZUhhbmRsZXIiLCJzdWJzY3JpYmUiLCJiZ0NvbG9yRXZlbnQiLCJiZ0NvbG9yQnRuIiwiYmFja2dyb3VuZENvbG9yIiwidGFyZ2V0IiwidmFsdWUiLCJtYXhpbWl6ZUV2ZW50IiwibWF4QnRuIiwic3RhdGUiLCJtb2RhbEluZm8iLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJtaW5pbWl6ZUV2ZW50IiwibWluaW1pemVCdG4iLCJjbG9zZUV2ZW50IiwicmVtb3ZlQ2hpbGQiLCJ6SW5kZXhFdmVudCIsInpJbmRleCIsInVwZGF0ZU1vZGFsU3RhdGUiLCJmb2N1c2VkTW9kYWxPYnNlcnZlciIsImluZm8iLCJsZWZ0IiwidG9wIiwiTWVtb0NyZWF0b3IiLCJEcmFnbkRyb3AiLCJNZW1vIiwibWVtb0NudCIsImRyYWduRHJvcCIsInJlc2l6ZSIsIm12IiwiY3JlYXRlTWVtb0hhbmRsZXIiLCJib3giLCJlbGVtcyIsImNvbnRhaW5lciIsInNldEF0dHJpYnV0ZSIsImFwcGVuZENoaWxkIiwiZm9jdXMiLCJoZWFkZXIiLCJib2R5RXZudHMiLCJFTEVNUyIsIkNPTlRBSU5FUiIsIkhFQURFUiIsIkJPRFkiLCJDT1JORVJTIiwiRk9PVEVSIiwiZGVmU2V0dGluZyIsInJhbmRvbVBvc1JhbmdlIiwiVEFHIiwiQ0xBU1NfTkFNRSIsIklOTkVSX0hUTUwiLCJnZXRSYW5kb21JbnQiLCJtYXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjcmVhdGVFbGVtIiwiZWxlbSIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJmb290ZXIiLCJjb3JuZXJzIiwibW91c2VEb3duSGFuZGxlciIsImRyb3BIYW5kbGVyIiwibW91c2VNb3ZlSGFuZGxlciIsIm1vdXNlUG9zaXRpb25Pbk1vZGFsIiwibGF5ZXJYIiwibGF5ZXJZIiwiZHJhZ25kcm9wU3RhdHVzIiwibW9kYWxEcmFnT2JzZXJ2ZXIiLCJtb3VzZU9uIiwiY29tcHV0ZWRZIiwibW9kYWxQb3NpdGlvbiIsIm4iLCJyIiwiYXJndW1lbnRzIiwidCIsIkFycmF5IiwiRXJyb3IiLCJtYXAiLCJqb2luIiwiUSIsIk9iamVjdCIsImdldFByb3RvdHlwZU9mIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiY29uc3RydWN0b3IiLCJGdW5jdGlvbiIsInRvU3RyaW5nIiwiWiIsImlzQXJyYXkiLCJMIiwicyIsInYiLCJpIiwibyIsImtleXMiLCJubiIsInUiLCJoYXMiLCJhIiwiZ2V0IiwiZiIsInNldCIsImMiLCJYIiwiTWFwIiwicSIsIlNldCIsInAiLCJsIiwic2xpY2UiLCJybiIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImNyZWF0ZSIsImQiLCJjbGVhciIsImRlbGV0ZSIsImgiLCJmcmVlemUiLCJpc0Zyb3plbiIsImIiLCJ0biIsIm0iLCJqIiwiZyIsIk8iLCJTIiwiVSIsInciLCJfIiwiUCIsIk0iLCJIIiwiQSIsIkkiLCJrIiwiTiIsIlIiLCJjb25jYXQiLCJEIiwieiIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIkUiLCJGIiwiVCIsIkMiLCJlbiIsIm9uIiwiUHJveHkiLCJyZXZvY2FibGUiLCJyZXZva2UiLCJwcm94eSIsIkoiLCJwdXNoIiwiZnJvbSIsImRlZmluZVByb3BlcnR5IiwibWluIiwiSyIsIlciLCJTeW1ib2wiLCJCIiwiUmVmbGVjdCIsImZvciIsIkciLCJvd25LZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJpc05hTiIsImRlbGV0ZVByb3BlcnR5Iiwic2V0UHJvdG90eXBlT2YiLCJhcHBseSIsImNyZWF0ZURyYWZ0IiwiZmluaXNoRHJhZnQiLCJzZXRBdXRvRnJlZXplIiwic2V0VXNlUHJveGllcyIsImFwcGx5UGF0Y2hlcyIsInBhdGgiLCJvcCIsIiQiLCJwcm9kdWNlIiwiYW4iLCJwcm9kdWNlV2l0aFBhdGNoZXMiLCJiaW5kIiwiUHJvbWlzZSIsInRoZW4iLCJ1c2VQcm94aWVzIiwiYXV0b0ZyZWV6ZSIsIl90eXBlb2YiLCJpdGVyYXRvciIsInRvUHJvcGVydHlLZXkiLCJ0b1ByaW1pdGl2ZSIsIlN0cmluZyIsIlR5cGVFcnJvciIsImZpbHRlciIsIl9vYmplY3RTcHJlYWQyIiwiZGVmaW5lUHJvcGVydGllcyIsImZvcm1hdFByb2RFcnJvck1lc3NhZ2UiLCJjb2RlIiwicmFuZG9tU3RyaW5nIiwic3Vic3RyaW5nIiwic3BsaXQiLCIkJG9ic2VydmFibGUiLCJvYnNlcnZhYmxlIiwiQWN0aW9uVHlwZXMiLCJJTklUIiwiUkVQTEFDRSIsIlBST0JFX1VOS05PV05fQUNUSU9OIiwiaXNQbGFpbk9iamVjdCIsIm9iaiIsInByb3RvIiwiY3JlYXRlU3RvcmUiLCJyZWR1Y2VyIiwicHJlbG9hZGVkU3RhdGUiLCJlbmhhbmNlciIsInVuZGVmaW5lZCIsImN1cnJlbnRSZWR1Y2VyIiwiY3VycmVudFN0YXRlIiwiY3VycmVudExpc3RlbmVycyIsIm5leHRMaXN0ZW5lcnMiLCJpc0Rpc3BhdGNoaW5nIiwiZW5zdXJlQ2FuTXV0YXRlTmV4dExpc3RlbmVycyIsImxpc3RlbmVyIiwiaXNTdWJzY3JpYmVkIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiYWN0aW9uIiwibGlzdGVuZXJzIiwiX3JlZjIiLCJyZXBsYWNlUmVkdWNlciIsIm5leHRSZWR1Y2VyIiwib3V0ZXJTdWJzY3JpYmUiLCJfcmVmIiwib2JzZXJ2ZXIiLCJvYnNlcnZlU3RhdGUiLCJuZXh0IiwiY29tYmluZVJlZHVjZXJzIiwicmVkdWNlcnMiLCJyZWR1Y2VyS2V5cyIsImZpbmFsUmVkdWNlcnMiLCJrZXkiLCJzaGFwZUFzc2VydGlvbkVycm9yIiwiZmluYWxSZWR1Y2VyS2V5cyIsImhhc0NoYW5nZWQiLCJuZXh0U3RhdGUiLCJfaSIsIl9rZXkiLCJwcmV2aW91c1N0YXRlRm9yS2V5IiwibmV4dFN0YXRlRm9yS2V5IiwiY29tcG9zZSIsIl9sZW4iLCJmdW5jcyIsImFyZyIsInJlZHVjZSIsImNyZWF0ZVRodW5rTWlkZGxld2FyZSIsImV4dHJhQXJndW1lbnQiLCJ0aHVuayIsIndpdGhFeHRyYUFyZ3VtZW50IiwiX19zcHJlYWRQcm9wcyIsIl9fZGVmUHJvcHMiLCJfX2dldE93blByb3BEZXNjcyIsImV4dGVuZFN0YXRpY3MiLCJfX3Byb3RvX18iLCJfX2V4dGVuZHMiLCJfXyIsIl9fZ2VuZXJhdG9yIiwidGhpc0FyZyIsImxhYmVsIiwic2VudCIsInRyeXMiLCJvcHMiLCJ2ZXJiIiwic3RlcCIsImRvbmUiLCJwb3AiLCJfX3NwcmVhZEFycmF5IiwidG8iLCJpbCIsIl9fZGVmUHJvcCIsIl9fZ2V0T3duUHJvcFN5bWJvbHMiLCJfX2hhc093blByb3AiLCJfX3Byb3BJc0VudW0iLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsIl9fZGVmTm9ybWFsUHJvcCIsIl9fc3ByZWFkVmFsdWVzIiwicHJvcCIsIl9jIiwiX19hc3luYyIsIl9fdGhpcyIsIl9fYXJndW1lbnRzIiwiZ2VuZXJhdG9yIiwicmVzb2x2ZSIsInJlamVjdCIsImZ1bGZpbGxlZCIsInJlamVjdGVkIiwidGhyb3ciLCJjb21wb3NlV2l0aERldlRvb2xzIiwid2luZG93IiwiX19SRURVWF9ERVZUT09MU19FWFRFTlNJT05fQ09NUE9TRV9fIiwiYmFzZVByb3RvIiwiY3JlYXRlQWN0aW9uIiwicHJlcGFyZUFjdGlvbiIsImFjdGlvbkNyZWF0b3IiLCJhcmdzIiwicHJlcGFyZWQiLCJwYXlsb2FkIiwibWV0YSIsImVycm9yIiwiX3N1cGVyIiwiTWlkZGxld2FyZUFycmF5Iiwic3BlY2llcyIsImFyciIsInByZXBlbmQiLCJFbmhhbmNlckFycmF5IiwiY3VycnlHZXREZWZhdWx0TWlkZGxld2FyZSIsIm9wdGlvbnMiLCJnZXREZWZhdWx0TWlkZGxld2FyZSIsIm1pZGRsZXdhcmVBcnJheSIsImltbXV0YWJsZUNoZWNrIiwic2VyaWFsaXphYmxlQ2hlY2siLCJhY3Rpb25DcmVhdG9yQ2hlY2siLCJtaW5pU2VyaWFsaXplRXJyb3IiLCJtZXNzYWdlIiwic2ltcGxlRXJyb3IiLCJjb21tb25Qcm9wZXJ0aWVzXzEiLCJjb21tb25Qcm9wZXJ0aWVzIiwidXJsQWxwaGFiZXQiLCJuYW5vaWQiLCJpZCIsIlJlamVjdFdpdGhWYWx1ZSIsIkZ1bGZpbGxXaXRoTWV0YSIsImNyZWF0ZUFzeW5jVGh1bmsyIiwid2l0aFR5cGVzIiwidHlwZVByZWZpeCIsInBheWxvYWRDcmVhdG9yIiwicmVxdWVzdElkIiwicmVxdWVzdFN0YXR1cyIsInBlbmRpbmciLCJzZXJpYWxpemVFcnJvciIsInJlamVjdGVkV2l0aFZhbHVlIiwiYWJvcnRlZCIsImNvbmRpdGlvbiIsIkFDIiwiQWJvcnRDb250cm9sbGVyIiwiY2xhc3NfMSIsImFib3J0Iiwic2lnbmFsIiwiZGlzcGF0Y2hFdmVudCIsIm9uYWJvcnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicmVhc29uIiwidGhyb3dJZkFib3J0ZWQiLCJhc3NpZ24iLCJleHRyYSIsImFib3J0UmVhc29uIiwiaWRHZW5lcmF0b3IiLCJhYm9ydENvbnRyb2xsZXIiLCJwcm9taXNlMiIsImZpbmFsQWN0aW9uIiwiY29uZGl0aW9uUmVzdWx0IiwiYWJvcnRlZFByb21pc2UiLCJlcnJfMSIsIl9hIiwiX2IiLCJnZXRQZW5kaW5nTWV0YSIsInJhY2UiLCJyZWplY3RXaXRoVmFsdWUiLCJmdWxmaWxsV2l0aFZhbHVlIiwicmVzdWx0IiwiZGlzcGF0Y2hDb25kaXRpb25SZWplY3Rpb24iLCJ1bndyYXAiLCJ1bndyYXBSZXN1bHQiLCJhbG0iLCJxdWV1ZU1pY3JvdGFzayIsImdsb2JhbFRoaXMiLCJjcmVhdGVRdWV1ZVdpdGhUaW1lciIsInRpbWVvdXQiLCJub3RpZnkiLCJzZXRUaW1lb3V0IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwicm9vdFJlZHVjZXIiLCJjdXJyaWVkR2V0RGVmYXVsdE1pZGRsZXdhcmUiLCJfZCIsIm1pZGRsZXdhcmUiLCJfZSIsImRldlRvb2xzIiwiX2YiLCJfZyIsImVuaGFuY2VycyIsIl9oIiwiZmluYWxNaWRkbGV3YXJlIiwibWlkZGxld2FyZUVuaGFuY2VyIiwibWlkZGxld2FyZXMiLCJfZGlzcGF0Y2giLCJtaWRkbGV3YXJlQVBJIiwiY2hhaW4iLCJmaW5hbENvbXBvc2UiLCJ0cmFjZSIsImRlZmF1bHRFbmhhbmNlcnMiLCJzdG9yZUVuaGFuY2VycyIsImNvcGllZFN0YXRlIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwibW9kdWxlIiwiZXhwb3J0cyIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkZWZpbml0aW9uIiwidG9TdHJpbmdUYWciXSwic291cmNlUm9vdCI6IiJ9